(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"e+VP":function(t,e,n){"use strict";n.r(e),n.d(e,"AccountTransactionListPageModule",function(){return Ut});var i=n("ofXK"),o=n("3Pt+"),c=n("tyNb"),a=n("TEn/"),r=n("sYmb"),s=n("QUrN"),l=n("j1ZV"),u=n("iTUp"),d=n("mrSG"),b=n("RKiA"),h=n("kB5k"),g=n("PqYM"),f=n("quSY"),p=n("VE8E"),m=n("jysE"),v=n("Xl7a"),w=n("57MG"),y=n("nxqh"),P=n("hPkG"),x=n("fXoL"),A=n("138U");function T(t,e){if(1&t){var n=x.Rb();x.Qb(0,"ion-item",9),x.Yb("click",function(){return x.oc(n),x.ac().changeNetwork()}),x.Mb(1,"ion-icon",10),x.wc(2),x.bc(3,"translate"),x.Pb()}2&t&&(x.Ab(2),x.yc(" ",x.cc(3,1,"wallet-edit-popover-component.change-network_label")," "))}function O(t,e){if(1&t){var n=x.Rb();x.Qb(0,"ion-item",1),x.Yb("click",function(){return x.oc(n),x.ac().importAccountAction.start()}),x.Mb(1,"ion-icon",11),x.wc(2),x.bc(3,"translate"),x.Pb()}if(2&t){var i=x.ac();x.Ab(1),x.gc("name",i.importAccountAction.context.icon),x.Ab(1),x.yc(" ",x.cc(3,2,i.importAccountAction.context.name)," ")}}var I=function(){function t(t,e,n,i,o,c,a,r,s,l){this.alertCtrl=t,this.navParams=e,this.walletsProvider=n,this.viewCtrl=i,this.clipboardProvider=o,this.translateService=c,this.operationsProvider=a,this.browserService=r,this.cdr=s,this.protocolService=l,this.isTezosKT=!1,this.isDelegated=!1,this.networks=[],this.wallet=this.navParams.get("wallet"),this.importAccountAction=this.navParams.get("importAccountAction"),this.onDelete=this.navParams.get("onDelete"),this.initNetworks()}return t.prototype.copyAddressToClipboard=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.clipboardProvider.copyAndShowToast(this.wallet.receivingPublicAddress)];case 1:return t.sent(),[4,this.dismissPopover()];case 2:return t.sent(),[2]}})})},t.prototype.openBlockExplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),[4,this.browserService.openUrl(t)];case 2:return e.sent(),[2]}})})},t.prototype.ngOnInit=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.wallet.protocol.identifier===b.SubProtocolSymbols.XTZ_KT&&(this.isTezosKT=!0),Object(p.b)(this.wallet.protocol)?(t=this,[4,this.operationsProvider.getDelegationStatusOfAddress(this.wallet.protocol,this.wallet.receivingPublicAddress)]):[3,2];case 1:t.isDelegated=e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.delete=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:this.translateService.instant("account-edit-popover-component.header"),message:this.translateService.instant("account-edit-popover-component.message"),buttons:[{text:this.translateService.instant("account-edit-popover-component.cancel"),role:"cancel",handler:function(){t.dismissPopover()}},{text:this.translateService.instant("account-edit-popover-component.delete"),handler:function(){t.walletsProvider.removeWallet(t.wallet).then(function(){t.dismissPopover(),t.onDelete?t.onDelete():Object(P.b)(P.a.OTHER)("onDelete not defined")}).catch(Object(P.b)(P.a.WALLET_PROVIDER))}}]})];case 1:return e.sent().present().catch(Object(P.b)(P.a.IONIC_ALERT)),[2]}})})},t.prototype.changeNetwork=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Network",inputs:this.networks.map(function(e,n){return{name:e.name,type:"radio",label:e.name,value:n,checked:t.wallet.protocol.options.network.identifier===e.identifier}}),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.walletsProvider.setWalletNetwork(this.wallet,this.networks[e])];case 1:return t.sent(),this.cdr.detectChanges(),[4,this.dismissPopover()];case 2:return t.sent(),[2]}})})}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},t.prototype.dismissPopover=function(){return this.viewCtrl.dismiss().catch(Object(P.b)(P.a.NAVIGATION))},t.prototype.initNetworks=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.wallet.protocol.identifier!==b.MainProtocolSymbols.XTZ?[3,2]:(t=this,[4,this.protocolService.getNetworksForProtocol(this.wallet.protocol.identifier)]);case 1:t.networks=e.sent(),e.label=2;case 2:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(x.Lb(a.a),x.Lb(a.nb),x.Lb(w.a),x.Lb(a.qb),x.Lb(A.k),x.Lb(r.d),x.Lb(y.a),x.Lb(m.a),x.Lb(x.i),x.Lb(A.y))},t.\u0275cmp=x.Fb({type:t,selectors:[["ng-component"]],decls:19,vars:14,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","clipboard-outline","color","dark","slot","end"],["id","blockexplorer","button","","detail","false",3,"click"],["name","open-outline","color","dark","slot","end"],["id","network","button","","detail","false",3,"click",4,"ngIf"],["id","delete","button","","detail","false",3,"click"],["name","trash-outline","color","dark","slot","end"],["button","","detail","false",3,"click",4,"ngIf"],["id","network","button","","detail","false",3,"click"],["name","globe-outline","color","dark","slot","end"],["color","dark","slot","end",3,"name"]],template:function(t,e){1&t&&(x.Qb(0,"ion-list",0),x.Qb(1,"ion-list-header"),x.Qb(2,"ion-label"),x.wc(3),x.bc(4,"translate"),x.Pb(),x.Pb(),x.Qb(5,"ion-item",1),x.Yb("click",function(){return e.copyAddressToClipboard()}),x.Mb(6,"ion-icon",2),x.wc(7),x.bc(8,"translate"),x.Pb(),x.Qb(9,"ion-item",3),x.Yb("click",function(){return e.openBlockExplorer()}),x.Mb(10,"ion-icon",4),x.wc(11),x.bc(12,"translate"),x.Pb(),x.uc(13,T,4,3,"ion-item",5),x.Qb(14,"ion-item",6),x.Yb("click",function(){return e.delete()}),x.Mb(15,"ion-icon",7),x.wc(16),x.bc(17,"translate"),x.Pb(),x.uc(18,O,4,4,"ion-item",8),x.Pb()),2&t&&(x.Ab(3),x.xc(x.cc(4,6,"wallet-edit-popover-component.settings_label")),x.Ab(4),x.yc(" ",x.cc(8,8,"wallet-edit-popover-component.copy-address_label")," "),x.Ab(4),x.yc(" ",x.cc(12,10,"wallet-edit-popover-component.block-explorer_label")," "),x.Ab(2),x.gc("ngIf",e.networks.length>1),x.Ab(3),x.yc(" ",x.cc(17,12,"wallet-edit-popover-component.delete_label")," "),x.Ab(2),x.gc("ngIf",e.importAccountAction))},directives:[a.F,a.G,a.E,a.A,a.w,i.n],pipes:[r.c],styles:["ion-list.list-ios[_ngcontent-%COMP%]{margin-bottom:0}"]}),t}(),k=n("0pct"),C=n("Y9VN"),j=n("+B6e"),L=n("ZheS"),S=n("Z7Z5"),D=n("Z7VQ"),_=n("1y+R"),Q=n("u8Qk"),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info={name:"account-transaction-list.add-tokens_label",icon:"add-outline"},e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return"add-token-action"},enumerable:!1,configurable:!0}),e.prototype.perform=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){return this.context.subAccounts.filter(function(t){return t.selected}).map(function(t){return t.wallet}).forEach(function(e){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return this.context.accountProvider.addWallet(e).catch(Object(P.b)(P.a.WALLET_PROVIDER)),[2]})})}),[2]})})},e}(Q.Action),M=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},set:function(t){},enumerable:!1,configurable:!0}),e}(n("zLwR").RepeatableAction),N=n("rtTb"),R=n("iLEx"),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.d)(e,t),e.prototype.perform=function(){var t=this;return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t,n,i=this;return Object(d.e)(this,function(o){switch(o.label){case 0:return[4,this.context.protocolService.getProtocol(b.MainProtocolSymbols.XTZ)];case 1:return[4,o.sent().getAddressFromPublicKey(this.context.wallet.publicKey)];case 2:return t=o.sent(),n=new R.a,this.context.alertCtrl.create({header:this.context.translateService.instant("account-transaction-list.migrate-alert.header"),message:'Do you want to transfer <span class="style__strong color__primary">'+this.context.wallet.currentBalance.shiftedBy(-1*this.context.wallet.protocol.decimals)+' XTZ</span> </strong> from <span class="style__strong color__primary"> '+n.transform(this.context.wallet.receivingPublicAddress)+' </span> to <span class="style__strong color__primary"> '+n.transform(t.getValue())+"</span>?",buttons:[{text:this.context.translateService.instant("account-transaction-list.migrate-alert.cancel"),role:"cancel",handler:function(){e()}},{text:this.context.translateService.instant("account-transaction-list.migrate-alert.confirm"),handler:function(){var n={wallet:i.context.wallet,address:t.getValue(),forceMigration:!0};i.context.dataService.setData(_.b.DETAIL,n),i.context.router.navigateByUrl("/transaction-prepare/"+_.b.DETAIL+"/"+n.wallet.publicKey+"/"+n.wallet.protocol.identifier+"/"+n.wallet.addressIndex+"/"+n.address+"/0/"+(n.forceMigration?"forced":"not_forced")).catch(Object(P.b)(P.a.NAVIGATION)),e()}}]}).then(function(t){t.present().catch(Object(P.b)(P.a.NAVIGATION))}).catch(Object(P.b)(P.a.IONIC_ALERT)),[2]}})})})},e}(Q.Action),K=n("oCjk"),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info={name:"account-transaction-list.fund_label",icon:"logo-usd"},e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return"fund-action"},enumerable:!1,configurable:!0}),e.prototype.perform=function(){return Object(d.b)(this,void 0,void 0,function(){var t,e,n=this;return Object(d.e)(this,function(i){return t=this.context.accountProvider.getWalletList(),e=Object(d.i)(Object(K.c)(t.filter(function(t){return t.publicKey!==n.context.wallet.publicKey}),function(t){return n.isCompatible(t)}),2),this.context.dataService.setData(_.b.WALLET,{actionType:"fund-account",targetIdentifier:this.context.wallet.protocol.identifier,address:this.context.wallet.receivingPublicAddress,compatibleWallets:e[0],incompatibleWallets:e[1]}),this.context.router.navigateByUrl("/select-wallet/"+_.b.WALLET).catch(Object(P.b)(P.a.NAVIGATION)),[2]})})},e.prototype.isCompatible=function(t){var e=new Set(this.context.wallet.protocol.identifier);return this.context.wallet.protocol.identifier===b.MainProtocolSymbols.XTZ_SHIELDED&&e.add(b.MainProtocolSymbols.XTZ),e.has(t.protocol.identifier)},e}(Q.Action),F=function(){function t(t){this.callerContext=t}return t.prototype.getActions=function(){return Object(d.b)(this,void 0,void 0,function(){var t,e,n=this;return Object(d.e)(this,function(i){return(t=new Map).set(b.MainProtocolSymbols.XTZ,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getTezosActions()]})})}),t.set(b.SubProtocolSymbols.XTZ_KT,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getTezosKTActions()]})})}),t.set(b.MainProtocolSymbols.XTZ_SHIELDED,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getTezosShieldedTezActions()]})})}),t.set(b.MainProtocolSymbols.ETH,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getEthereumActions()]})})}),t.set(b.MainProtocolSymbols.COSMOS,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getCosmosActions()]})})}),t.set(b.MainProtocolSymbols.POLKADOT,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getPolkadotActions()]})})}),t.set(b.MainProtocolSymbols.KUSAMA,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getKusamaActions()]})})}),[2,(e=t.get(this.callerContext.protocolIdentifier))?e():[]]})})},t.prototype.getTezosActions=function(){var t=this;return[this.createDelegateButtonAction(),new M({name:"account-transaction-list.add-tokens_label",icon:"add",identifier:"add-tokens"},function(){var e=new L.SimpleAction(function(){return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(n){return this.callerContext.dataService.setData(_.b.DETAIL,t={subProtocolType:D.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+_.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(P.b)(P.a.NAVIGATION)),[2]})})})}),n=new j.LinkedAction(e,E);return n.onComplete=function(){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]})})},n})]},t.prototype.getImportAccountsAction=function(){var t=this;return new M({name:"account-transaction-list.import-accounts_label",icon:"add-outline",identifier:"import-accounts"},function(){var e=new C.ImportAccountAction({publicKey:t.callerContext.wallet.publicKey});return e.onComplete=function(e){return Object(d.b)(t,void 0,void 0,function(){var t,n,i,o,c,a;return Object(d.e)(this,function(r){switch(r.label){case 0:return 0!==e.length?[3,1]:(this.callerContext.showToast("No accounts to import."),[3,9]);case 1:r.trys.push([1,6,7,8]),t=Object(d.k)(e.entries()),n=t.next(),r.label=2;case 2:return n.done?[3,5]:(i=Object(d.i)(n.value,1),[4,this.addKtAddress(this.callerContext.wallet,i[0],e)]);case 3:r.sent(),r.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return o=r.sent(),c={error:o},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(c)throw c.error}return[7];case 8:this.callerContext.router.navigateByUrl("/").catch(Object(P.b)(P.a.NAVIGATION)),this.callerContext.showToast("Accounts imported"),r.label=9;case 9:return[2]}})})},e})},t.prototype.getTezosKTActions=function(){var t=this;return[new M({name:"account-transaction-list.migrate_label",icon:"return-right",identifier:"migrate-action"},function(){return new B({wallet:t.callerContext.wallet,alertCtrl:t.callerContext.alertCtrl,translateService:t.callerContext.translateService,protocolService:t.callerContext.protocolService,dataService:t.callerContext.dataService,router:t.callerContext.router})})]},t.prototype.getTezosShieldedTezActions=function(){var t=this;return[new M({name:"account-transaction-list.fund_label",icon:"logo-usd",identifier:"fund-action"},function(){return new z({wallet:t.callerContext.wallet,accountProvider:t.callerContext.accountProvider,dataService:t.callerContext.dataService,router:t.callerContext.router})})]},t.prototype.getCosmosActions=function(){return Object(d.b)(this,void 0,void 0,function(){var t,e;return Object(d.e)(this,function(n){switch(n.label){case 0:return t=this.createDelegateButtonAction(),[4,this.createDelegatorButtonActions({type:S.CosmosDelegationActionType.WITHDRAW_ALL_REWARDS,name:"account-transaction-list.claim_rewards_label",icon:"logo-usd",identifier:"claim-rewards"})];case 1:return e=n.sent(),[2,Object(d.j)([t],e)]}})})},t.prototype.getEthereumActions=function(){var t=this;return[new M({name:"account-transaction-list.add-tokens_label",icon:"add-outline",identifier:"add-tokens"},function(){var e=new L.SimpleAction(function(){return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(n){return this.callerContext.dataService.setData(_.b.DETAIL,t={subProtocolType:D.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+_.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(P.b)(P.a.NAVIGATION)),[2]})})})}),n=new j.LinkedAction(e,E);return n.onComplete=function(){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]})})},n})]},t.prototype.getPolkadotActions=function(){return[this.createDelegateButtonAction()]},t.prototype.getKusamaActions=function(){return[this.createDelegateButtonAction()]},t.prototype.addKtAddress=function(t,e,n){return Object(d.b)(this,void 0,void 0,function(){var i,o;return Object(d.e)(this,function(c){switch(c.label){case 0:return(i=this.callerContext.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(t.publicKey,b.SubProtocolSymbols.XTZ_KT,e))?[2,i]:[4,this.callerContext.protocolService.getProtocol(b.SubProtocolSymbols.XTZ_KT)];case 1:return o=c.sent(),(i=new b.AirGapMarketWallet(o,t.publicKey,t.isExtendedPublicKey,t.derivationPath,t.priceService,e)).addresses=n,[4,i.synchronize().catch(Object(P.b)(P.a.COINLIB))];case 2:return c.sent(),[4,this.callerContext.accountProvider.addWallet(i).catch(Object(P.b)(P.a.WALLET_PROVIDER))];case 3:return c.sent(),[2,i]}})})},t.prototype.createDelegateButtonAction=function(){var t=this;return new M({name:"account-transaction-list.delegate_label",icon:"logo-usd",identifier:"delegate-action"},function(){return new L.SimpleAction(function(){return new Promise(function(e){t.callerContext.dataService.setData(_.b.DETAIL,{wallet:t.callerContext.wallet}),t.callerContext.router.navigateByUrl("/delegation-detail/"+_.b.DETAIL+"/"+t.callerContext.wallet.publicKey+"/"+t.callerContext.wallet.protocol.identifier+"/"+t.callerContext.wallet.addressIndex).catch(Object(P.b)(P.a.NAVIGATION)),e()})})})},t.prototype.createDelegatorButtonActions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(d.b)(this,void 0,void 0,function(){var e,n,i,o=this;return Object(d.e)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.callerContext.operationsProvider.getDelegatorDetails(this.callerContext.wallet)];case 1:return(e=c.sent()).availableActions?(n=e.availableActions.map(function(t){return t.type}),[2,t.filter(function(t){return n.includes(t.type)}).map(function(t){return new M(t,function(){return new N.a({wallet:o.callerContext.wallet,type:t.type,data:t.data,toastController:o.callerContext.toastController,loadingController:o.callerContext.loadingController,operationsProvider:o.callerContext.operationsProvider,dataService:o.callerContext.dataService,router:o.callerContext.router})})})]):[3,3];case 2:return i=c.sent(),console.warn(i),[3,3];case 3:return[2,[]]}})})},t}(),V=n("GsAe"),U=n("AFs5"),Y=n("dW0/"),G=n("tk/3");function Z(t,e){if(1&t&&(x.Qb(0,"ion-button",32),x.Yb("click",function(){return e.$implicit.start()}),x.Mb(1,"ion-icon",33),x.wc(2),x.bc(3,"translate"),x.Pb()),2&t){var n=e.$implicit;x.Ab(1),x.gc("name",n.context.icon),x.Ab(1),x.yc(" ",x.cc(3,2,n.context.name)," ")}}function W(t,e){if(1&t){var n=x.Rb();x.Qb(0,"tezos-delegation-card",34),x.Yb("onDelegatedClick",function(){return x.oc(n),x.ac().openDelegationDetails()})("onUndelegatedClick",function(){return x.oc(n),x.ac().openDelegationDetails()}),x.Pb()}if(2&t){var i=x.ac();x.gc("wallet",i.wallet)("isDelegated",i.isKtDelegated)("delegateAmount",i.wallet.currentBalance)}}function X(t,e){if(1&t){var n=x.Rb();x.Qb(0,"card-actionable",35),x.Yb("click",function(){return x.oc(n),x.ac().openPreparePage()}),x.bc(1,"translate"),x.bc(2,"translate"),x.Pb()}2&t&&x.gc("imageLeft",!1)("imageName","babylon-migration.svg")("text",x.cc(1,4,"account-transaction-list.migrate-babylon_card.text"))("heading",x.cc(2,6,"account-transaction-list.migrate-babylon_card.heading"))}function H(t,e){if(1&t&&x.Mb(0,"widget-account-extended-details",36),2&t){var n=x.ac();x.gc("widget",n.accountExtendedDetails)}}function q(t,e){1&t&&x.Mb(0,"ion-spinner",37)}function $(t,e){if(1&t){var n=x.Rb();x.Qb(0,"ion-row"),x.Qb(1,"ion-col",38),x.Qb(2,"ion-text",39),x.Qb(3,"p"),x.wc(4),x.bc(5,"translate"),x.Pb(),x.Pb(),x.Qb(6,"ion-button",40),x.Yb("click",function(){return x.oc(n),x.ac().openBlockexplorer()}),x.Mb(7,"ion-icon",41),x.wc(8),x.bc(9,"translate"),x.Pb(),x.Pb(),x.Pb()}2&t&&(x.Ab(4),x.xc(x.cc(5,2,"account-transaction-list.tx_not_loading")),x.Ab(4),x.yc(" ",x.cc(9,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}var J=function(){function t(t,e,n,i,o,c,a,r,s,l,u,h,p,m,v,w,y,x){var A=this;this.alertCtrl=t,this.navController=e,this.router=n,this.translateService=i,this.operationsProvider=o,this.popoverCtrl=c,this.toastController=a,this.loadingController=r,this.accountProvider=s,this.http=l,this.dataService=u,this.protocolService=h,this.route=p,this.storageProvider=m,this.pushBackendProvider=v,this.exchangeProvider=w,this.extensionsService=y,this.browserService=x,this.mainProtocolSymbols=b.MainProtocolSymbols,this.subProtocolSymbols=b.SubProtocolSymbols,this.timer$=Object(g.a)(0,3e3),this.subscription=new f.a,this.isRefreshing=!1,this.initialTransactionsLoaded=!1,this.infiniteEnabled=!1,this.showLinkToBlockExplorer=!1,this.txOffset=0,this.transactions=[],this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.pendingTransactions=[],this.formattedExchangeTransactions=[],this.isKtDelegated=!1,this.lottieConfig={path:"./assets/animations/loading.json"},this.TRANSACTION_LIMIT=10,this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.wallet=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),this.updateExtendedDetails(),this.walletChanged=s.walletChangedObservable.subscribe(function(){A.loadInitialTransactions(!0),A.updateExtendedDetails()}),this.subscription=this.timer$.subscribe(function(){return Object(d.b)(A,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.formattedExchangeTransactions.length>0?(t=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])]):[3,2];case 1:t.formattedExchangeTransactions=e.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,e.label=2;case 2:return[2]}})})}),this.protocolIdentifier=this.wallet.protocol.identifier,this.protocolIdentifier===b.SubProtocolSymbols.XTZ_KT&&this.isDelegated().catch(Object(P.b)(P.a.COINLIB)),this.protocolIdentifier===b.MainProtocolSymbols.XTZ&&(this.getKtAddresses().catch(Object(P.b)(P.a.COINLIB)),this.isDelegated().catch(Object(P.b)(P.a.COINLIB))),this.actionGroup=new F(this),this.actionGroup.getActions().then(function(t){A.actions=t})}return t.prototype.showNoTransactionScreen=function(){return 0===this.transactions.length},t.prototype.ionViewWillEnter=function(){this.doRefresh()},t.prototype.openPreparePage=function(){this.protocolIdentifier!==b.SubProtocolSymbols.XTZ_KT?this.router.navigateByUrl("/transaction-prepare/"+_.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex+"/"+(""!==(this.protocolIdentifier===b.SubProtocolSymbols.XTZ_BTC?{wallet:this.wallet,address:"",disableFees:!0}:{wallet:this.wallet,address:""}).address)+"/0/not_forced").catch(Object(P.b)(P.a.NAVIGATION)):new B({wallet:this.wallet,alertCtrl:this.alertCtrl,translateService:this.translateService,protocolService:this.protocolService,dataService:this.dataService,router:this.router}).start()},t.prototype.openReceivePage=function(){this.router.navigateByUrl("/account-address/"+_.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex).catch(Object(P.b)(P.a.NAVIGATION))},t.prototype.openTransactionDetailPage=function(t){this.dataService.setData(_.b.DETAIL,t),this.router.navigateByUrl("/transaction-detail/"+_.b.DETAIL+"/"+t.hash).catch(Object(P.b)(P.a.NAVIGATION))},t.prototype.openBlockexplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),this.browserService.openUrl(t),[2]}})})},t.prototype.doRefresh=function(t){void 0===t&&(t=null),Object(p.b)(this.wallet.protocol)&&this.operationsProvider.refreshAllDelegationStatuses([this.wallet]),this.isRefreshing=!0,t&&t.target.complete(),this.loadInitialTransactions().catch(Object(P.b)())},t.prototype.doInfinite=function(t){return Object(d.b)(this,void 0,void 0,function(){var e;return Object(d.e)(this,function(n){switch(n.label){case 0:return this.infiniteEnabled?[4,this.getTransactions(this.transactionResult?this.transactionResult.cursor:void 0,this.TRANSACTION_LIMIT)]:[2,t.target.complete()];case 1:return e=n.sent(),this.transactions=this.mergeTransactions(this.transactions,e),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 2:return n.sent(),e.length<this.TRANSACTION_LIMIT&&(this.infiniteEnabled=!1),t.target.complete(),[2]}})})},t.prototype.loadInitialTransactions=function(t){return void 0===t&&(t=!1),Object(d.b)(this,void 0,void 0,function(){var e,n,i,o,c,a,r,s=this;return Object(d.e)(this,function(l){switch(l.label){case 0:return 0!==this.transactions.length?[3,2]:(e=this,[4,this.storageProvider.getCache(this.accountProvider.getAccountIdentifier(this.wallet))]);case 1:e.transactions=l.sent()||[],l.label=2;case 2:return n=this.getTransactions(),[4,Object(k.b)(1e4,n).catch(function(t){return console.error(t),s.showLinkToBlockExplorer=!0,[]})];case 3:i=l.sent(),this.transactions=this.mergeTransactions(t?[]:this.transactions,i),this.isRefreshing=!1,this.initialTransactionsLoaded=!0,o=this.wallet.receivingPublicAddress,l.label=4;case 4:return l.trys.push([4,6,,7]),c=this,[4,this.pushBackendProvider.getPendingTxs(o,this.protocolIdentifier)];case 5:return c.pendingTransactions=l.sent(),[3,7];case 6:return l.sent(),[3,7];case 7:return a=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])];case 8:return a.formattedExchangeTransactions=l.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,r=this.transactions.map(function(t){return t.hash}),this.pendingTransactions=this.pendingTransactions.filter(function(t){return-1===r.indexOf(t.hash)}),this.pendingTransactions.length>0?(this.pendingTransactions=this.pendingTransactions.map(function(t){return t.fee=new h.BigNumber(t.fee).toString(10),t.amount=new h.BigNumber(t.amount).toString(10),t}),this.hasPendingTransactions=!0):this.hasPendingTransactions=!1,t||this.accountProvider.triggerWalletChanged(),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 9:return l.sent(),this.txOffset=this.transactions.length,this.infiniteEnabled=!0,[2]}})})},t.prototype.getTransactions=function(t,e){return void 0===e&&(e=10),Object(d.b)(this,void 0,void 0,function(){var n,i;return Object(d.e)(this,function(o){switch(o.label){case 0:return[4,Promise.all([this.transactionResult?this.wallet.fetchTransactions(e,t):this.wallet.fetchTransactions(e),this.wallet.synchronize().catch(function(t){console.error(t)})])];case 1:return n=d.i.apply(void 0,[o.sent(),1]),this.transactionResult=i=n[0],[2,i.transactions]}})})},t.prototype.mergeTransactions=function(t,e){var n=this;if(!t)return e;var i=new Map(t.map(function(t){return[n.mergeKeyForTransaction(t),t]})),o=i.size;return e.forEach(function(t){var e=n.mergeKeyForTransaction(t);i.set(e,t)}),o===i.size?t:Array.from(i.values()).sort(function(t,e){return void 0!==t.timestamp&&void 0!==e.timestamp?e.timestamp-t.timestamp:new h.BigNumber(e.blockHeight).minus(new h.BigNumber(t.blockHeight)).toNumber()})},t.prototype.mergeKeyForTransaction=function(t){return""+(t.hash?t.hash:"")+t.from.reduce(function(t,e){return t+e},"")+t.to.reduce(function(t,e){return t+e},"")+t.amount+t.fee+(t.timestamp?t.timestamp:"")},t.prototype.presentEditPopover=function(t){return Object(d.b)(this,void 0,void 0,function(){var e=this;return Object(d.e)(this,function(n){switch(n.label){case 0:return[4,this.popoverCtrl.create({component:I,componentProps:{wallet:this.wallet,importAccountAction:this.wallet.protocol.identifier===b.MainProtocolSymbols.XTZ?this.actionGroup.getImportAccountsAction():void 0,onDelete:function(){e.navController.pop()}},event:t,translucent:!0})];case 1:return[2,n.sent().present().catch(Object(P.b)(P.a.NAVIGATION))]}})})},t.prototype.isDelegated=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.operationsProvider.checkDelegated(this.wallet.protocol,this.wallet.receivingPublicAddress)];case 1:return t=e.sent(),this.isKtDelegated=t,[2]}})})},t.prototype.getKtAddresses=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,(new b.TezosKtProtocol).getAddressesFromPublicKey(this.wallet.publicKey)];case 1:return[2,t.sent().map(function(t){return t.getValue()})]}})})},t.prototype.openDelegationDetails=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return(t=this.actions.find(function(t){return"delegate-action"===t.identifier}))?[4,t.start()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.showToast=function(t){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.toastController.create({duration:3e3,message:t,buttons:[{text:"Ok",role:"cancel"}],position:"bottom"})];case 1:return e.sent().present().catch(Object(P.b)(P.a.NAVIGATION)),[2]}})})},t.prototype.updateExtendedDetails=function(){var t=this;Object(p.b)(this.wallet.protocol)&&void 0!==this.wallet.receivingPublicAddress&&this.extensionsService.loadDelegationExtensions().then(function(){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=this,[4,this.operationsProvider.getAccountExtendedDetails(this.wallet)];case 1:return t.accountExtendedDetails=e.sent(),[2]}})})})},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.walletChanged.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(x.Lb(a.a),x.Lb(a.mb),x.Lb(c.g),x.Lb(r.d),x.Lb(y.a),x.Lb(a.qb),x.Lb(a.vb),x.Lb(a.kb),x.Lb(w.a),x.Lb(G.a),x.Lb(_.a),x.Lb(A.y),x.Lb(c.a),x.Lb(U.b),x.Lb(V.a),x.Lb(Y.a),x.Lb(v.a),x.Lb(m.a))},t.\u0275cmp=x.Fb({type:t,selectors:[["page-account-transaction-list"]],decls:49,vars:39,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/portfolio"],["slot","end"],["id","edit-popover","color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[2,"display","block"],[3,"wallet","maxDigits"],[1,"ion-padding-top","ion-padding-horizontal","action--container"],["color","secondary","shape","round","size","small","fill","outline",3,"click",4,"ngFor","ngForOf"],["no-bounce","","has-bouncing","false","forceOverscroll","false"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],[3,"widget",4,"ngIf"],[3,"transactionType","hasPendingTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"transactionType","hasExchangeTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[1,"ion-align-items-center","ion-padding-top"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],["size","1",1,"justify--content__end","ion-no-padding"],["color","primary","name","dots",4,"ngIf"],["size","1"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],[3,"transactionType","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"ionInfinite"],["vertical","bottom","slot","fixed"],["id","receive","expand","full","size","default","color","primary","shape","round",3,"click"],["slot","start","src","./assets/custom-ion-icons/md-call_received.svg"],["id","send","expand","full","size","default","color","primary","shape","round",3,"disabled","click"],["slot","start","name","send-outline"],["color","secondary","shape","round","size","small","fill","outline",3,"click"],["slot","start",3,"name"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick"],["tappable","",3,"imageLeft","imageName","text","heading","click"],[3,"widget"],["color","primary","name","dots"],[1,"ion-padding"],["color","secondary",1,"font--weight__bold"],["fill","outline","color","secondary","shape","round",1,"ion-margin-top",3,"click"],["name","open","slot","start"]],template:function(t,e){1&t&&(x.Qb(0,"ion-header",0),x.Qb(1,"ion-grid",1),x.Qb(2,"ion-toolbar"),x.Qb(3,"ion-buttons",2),x.Mb(4,"ion-back-button",3),x.Pb(),x.Qb(5,"ion-title"),x.wc(6),x.bc(7,"translate"),x.Pb(),x.Qb(8,"ion-buttons",4),x.Qb(9,"ion-button",5),x.Yb("click",function(t){return e.presentEditPopover(t)}),x.Mb(10,"ion-icon",6),x.Pb(),x.Pb(),x.Pb(),x.Qb(11,"ion-row",7),x.Mb(12,"portfolio-item",8),x.Pb(),x.Qb(13,"ion-row",9),x.uc(14,Z,4,4,"ion-button",10),x.Pb(),x.Pb(),x.Pb(),x.Qb(15,"ion-content",11),x.Qb(16,"ion-grid",1),x.uc(17,W,1,3,"tezos-delegation-card",12),x.uc(18,X,3,8,"card-actionable",13),x.uc(19,H,1,1,"widget-account-extended-details",14),x.Mb(20,"transaction-list",15),x.Mb(21,"transaction-list",16),x.Qb(22,"ion-row",17),x.Qb(23,"ion-col",18),x.Qb(24,"ion-text",19),x.Qb(25,"p"),x.wc(26),x.bc(27,"translate"),x.Pb(),x.Pb(),x.Pb(),x.Qb(28,"ion-col",20),x.uc(29,q,1,0,"ion-spinner",21),x.Pb(),x.Mb(30,"ion-col",22),x.Pb(),x.uc(31,$,10,6,"ion-row",23),x.Qb(32,"ion-refresher",24),x.Yb("ionRefresh",function(t){return e.doRefresh(t)}),x.Mb(33,"ion-refresher-content"),x.Pb(),x.Mb(34,"transaction-list",25),x.Qb(35,"ion-infinite-scroll",26),x.Yb("ionInfinite",function(t){return e.doInfinite(t)}),x.Mb(36,"ion-infinite-scroll-content"),x.Pb(),x.Pb(),x.Qb(37,"ion-fab",27),x.Qb(38,"ion-row"),x.Qb(39,"ion-col"),x.Qb(40,"ion-button",28),x.Yb("click",function(){return e.openReceivePage()}),x.Mb(41,"ion-icon",29),x.wc(42),x.bc(43,"translate"),x.Pb(),x.Pb(),x.Qb(44,"ion-col"),x.Qb(45,"ion-button",30),x.Yb("click",function(){return e.openPreparePage()}),x.Mb(46,"ion-icon",31),x.wc(47),x.bc(48,"translate"),x.Pb(),x.Pb(),x.Pb(),x.Pb(),x.Pb()),2&t&&(x.Ab(6),x.zc("",null==e.wallet?null:e.wallet.protocol.symbol," ",x.cc(7,31,"account-transaction-list.title"),""),x.Ab(6),x.gc("wallet",e.wallet)("maxDigits",0),x.Ab(2),x.gc("ngForOf",e.actions),x.Ab(3),x.gc("ngIf",e.wallet.protocol.identifier===e.mainProtocolSymbols.XTZ&&e.wallet.currentBalance),x.Ab(1),x.gc("ngIf",e.wallet.protocol.identifier===e.subProtocolSymbols.XTZ_KT),x.Ab(1),x.gc("ngIf",void 0!==e.accountExtendedDetails),x.Ab(1),x.gc("transactionType","pendingTransaction")("hasPendingTransactions",e.hasPendingTransactions)("transactions",e.pendingTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),x.Ab(1),x.gc("transactionType","exchangeTransaction")("hasExchangeTransactions",e.hasExchangeTransactions)("transactions",e.formattedExchangeTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),x.Ab(5),x.xc(x.cc(27,33,"account-transaction-list.transactions_label")),x.Ab(3),x.gc("ngIf",e.isRefreshing&&!e.showLinkToBlockExplorer),x.Ab(2),x.gc("ngIf",e.showLinkToBlockExplorer),x.Ab(3),x.gc("transactionType","normalTransaction")("transactions",e.transactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),x.Ab(8),x.yc(" ",x.cc(43,35,"account-transaction-list.receive_label")," "),x.Ab(3),x.gc("disabled",0===(null==e.wallet.currentBalance?null:e.wallet.currentBalance.toNumber())),x.Ab(2),x.yc(" ",x.cc(48,37,"account-transaction-list.send_label")," "))},styles:[".loading-header[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;text-align:center}.loading-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px;stroke:#fff!important}.loading-content[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;margin-top:20vh;text-align:center}.loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px}ion-fab[_ngcontent-%COMP%]{width:100%}svg[_ngcontent-%COMP%]{stroke:none}.action--container[_ngcontent-%COMP%]{background:#fff}"]}),t}(),tt=n("F07p");function et(t,e){if(1&t&&(x.Qb(0,"ion-col",8),x.Mb(1,"img",9),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.ic("src","./assets/img/",n.imageName,"",x.qc)}}function nt(t,e){if(1&t&&(x.Qb(0,"ion-col",8),x.Mb(1,"img",9),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.ic("src","./assets/img/",n.imageName,"",x.qc)}}var it=function(){function t(){this.imageLeft=!0}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=x.Fb({type:t,selectors:[["card-actionable"]],inputs:{imageLeft:"imageLeft",imageName:"imageName",heading:"heading",text:"text"},decls:9,vars:5,consts:[[3,"ngClass"],[1,"ion-align-items-center","ion-padding-horizontal"],["size","4",4,"ngIf"],["size","8"],["ion-text","","color","white",1,"ion-no-padding",3,"innerHTML"],["name","arrow-forward-outline"],["color","white"],[1,"ion-padding-top",3,"innerHTML"],["size","4"],[3,"src"]],template:function(t,e){1&t&&(x.Qb(0,"ion-card",0),x.Qb(1,"ion-row",1),x.uc(2,et,2,1,"ion-col",2),x.Qb(3,"ion-col",3),x.Qb(4,"ion-card-title",4),x.Mb(5,"ion-icon",5),x.Pb(),x.Qb(6,"ion-text",6),x.Mb(7,"p",7),x.Pb(),x.Pb(),x.uc(8,nt,2,1,"ion-col",2),x.Pb(),x.Pb()),2&t&&(x.gc("ngClass",e.imageLeft?"background--color__gradient--reverse":"background--color__gradient"),x.Ab(2),x.gc("ngIf",e.imageLeft),x.Ab(2),x.gc("innerHTML",e.heading,x.pc),x.Ab(3),x.gc("innerHTML",e.text,x.pc),x.Ab(1),x.gc("ngIf",!e.imageLeft))},directives:[a.k,i.l,a.R,i.n,a.p,a.n,a.w,a.db],styles:[".background--color__gradient--reverse[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-primary),55%,var(--ion-color-secondaryLight))}.background--color__gradient[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-secondaryLight),45%,var(--ion-color-primary))}"]}),t}(),ot=function(t){return{protocol:t,maxDigits:3}},ct=function(t){return{amount:t}};function at(t,e){if(1&t){var n=x.Rb();x.Qb(0,"card-actionable",1),x.Yb("click",function(){return x.oc(n),x.ac().undelegatedClick()}),x.bc(1,"translate"),x.bc(2,"async"),x.bc(3,"amountConverter"),x.bc(4,"translate"),x.bc(5,"async"),x.bc(6,"amountConverter"),x.Pb()}if(2&t){var i=x.ac();x.gc("imageLeft",!1)("imageName","tezos-coins.svg")("text",x.dc(1,4,"account-transaction-list.not-delegated_card.text",x.kc(22,ct,x.cc(2,7,x.dc(3,9,i.delegateAmount,x.kc(20,ot,i.wallet.protocol))))))("heading",x.dc(4,12,"account-transaction-list.not-delegated_card.heading",x.kc(26,ct,x.cc(5,15,x.dc(6,17,i.delegateAmount,x.kc(24,ot,i.wallet.protocol))))))}}function rt(t,e){if(1&t){var n=x.Rb();x.Qb(0,"card-actionable",1),x.Yb("click",function(){return x.oc(n),x.ac().delegatedClick()}),x.bc(1,"translate"),x.bc(2,"async"),x.bc(3,"amountConverter"),x.bc(4,"translate"),x.bc(5,"async"),x.bc(6,"amountConverter"),x.Pb()}if(2&t){var i=x.ac();x.gc("imageLeft",!0)("imageName","tezos-baking.svg")("text",x.dc(1,4,"account-transaction-list.has-delegated_card.text",x.kc(22,ct,x.cc(2,7,x.dc(3,9,i.delegateAmount,x.kc(20,ot,i.wallet.protocol))))))("heading",x.dc(4,12,"account-transaction-list.has-delegated_card.heading",x.kc(26,ct,x.cc(5,15,x.dc(6,17,i.delegateAmount,x.kc(24,ot,i.wallet.protocol))))))}}var st=function(){function t(){this.isDelegated=!1,this.delegateAmount=0,this.onDelegatedClick=new x.o,this.onUndelegatedClick=new x.o}return t.prototype.delegatedClick=function(){this.onDelegatedClick.emit()},t.prototype.undelegatedClick=function(){this.onUndelegatedClick.emit()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=x.Fb({type:t,selectors:[["tezos-delegation-card"]],inputs:{wallet:"wallet",isDelegated:"isDelegated",delegateAmount:"delegateAmount"},outputs:{onDelegatedClick:"onDelegatedClick",onUndelegatedClick:"onUndelegatedClick"},decls:3,vars:2,consts:[["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click"]],template:function(t,e){1&t&&(x.Qb(0,"ion-row"),x.uc(1,at,7,28,"card-actionable",0),x.uc(2,rt,7,28,"card-actionable",0),x.Pb()),2&t&&(x.Ab(1),x.gc("ngIf",!e.isDelegated),x.Ab(1),x.gc("ngIf",e.isDelegated))},directives:[a.R,i.n,it],pipes:[r.c,i.b,A.g],encapsulation:2}),t}();function lt(t,e){if(1&t&&(x.Ob(0),x.Qb(1,"ion-row",1),x.Qb(2,"ion-col"),x.Qb(3,"ion-text",2),x.Qb(4,"h3",3),x.wc(5),x.bc(6,"translate"),x.Pb(),x.Pb(),x.Pb(),x.Qb(7,"ion-col"),x.Qb(8,"p",4),x.Qb(9,"strong"),x.wc(10),x.Pb(),x.Pb(),x.Pb(),x.Pb(),x.Nb()),2&t){var n=e.$implicit;x.Ab(5),x.yc(" ",x.cc(6,2,n.label)," "),x.Ab(5),x.yc(" ",n.text," ")}}n("kq8F");var ut=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=x.Fb({type:t,selectors:[["widget-account-extended-details"]],inputs:{widget:"widget"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"ion-padding-horizontal","ion-padding-top"],["color","blackLight"],[1,"typography--mono","ion-no-margin"],[1,"ion-text-end","ion-no-margin"]],template:function(t,e){1&t&&x.uc(0,lt,11,4,"ng-container",0),2&t&&x.gc("ngForOf",e.widget.items)},directives:[i.m,a.R,a.p,a.db],pipes:[r.c],styles:[""]}),t}();function dt(t,e){if(1&t&&x.Mb(0,"airgap-identicon",11),2&t){var n=x.ac(2);x.gc("address",n.tx.from[0])}}function bt(t,e){if(1&t&&x.Mb(0,"airgap-identicon",11),2&t){var n=x.ac(2);x.gc("address",n.tx.to[0])}}function ht(t,e){if(1&t&&(x.Qb(0,"ion-avatar",9),x.uc(1,dt,1,1,"airgap-identicon",10),x.uc(2,bt,1,1,"airgap-identicon",10),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.gc("ngIf",n.tx.isInbound),x.Ab(1),x.gc("ngIf",!n.tx.isInbound)}}function gt(t,e){if(1&t&&x.Mb(0,"airgap-identicon",11),2&t){var n=x.ac(2);x.gc("address",n.tx.to[0])}}function ft(t,e){if(1&t&&x.Mb(0,"airgap-identicon",11),2&t){var n=x.ac(2);x.gc("address",n.tx.from[0])}}function pt(t,e){if(1&t&&(x.Qb(0,"ion-avatar",9),x.uc(1,gt,1,1,"airgap-identicon",10),x.uc(2,ft,1,1,"airgap-identicon",10),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.gc("ngIf",n.tx.isInbound),x.Ab(1),x.gc("ngIf",!n.tx.isInbound)}}function mt(t,e){1&t&&x.Mb(0,"ion-icon",12)}function vt(t,e){1&t&&x.Mb(0,"ion-icon",13)}function wt(t,e){if(1&t&&(x.Qb(0,"ion-badge",14),x.wc(1),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.yc(" ",n.tx.status," ")}}var yt=function(t){return{ifMatches:t}};function Pt(t,e){if(1&t&&(x.Ob(0),x.wc(1),x.bc(2,"shortenString"),x.Nb()),2&t){var n=x.ac(3);x.Ab(1),x.yc(" ",x.dc(2,1,n.tx.from[0],x.kc(4,yt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function xt(t,e){if(1&t&&(x.Ob(0),x.wc(1),x.bc(2,"shortenString"),x.Nb()),2&t){var n=x.ac(3);x.Ab(1),x.yc(" ",x.dc(2,1,n.tx.to[0],x.kc(4,yt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function At(t,e){if(1&t&&(x.Qb(0,"h3",16),x.uc(1,Pt,3,6,"ng-container",6),x.uc(2,xt,3,6,"ng-container",6),x.Pb()),2&t){var n=x.ac(2);x.Ab(1),x.gc("ngIf",n.tx.isInbound),x.Ab(1),x.gc("ngIf",!n.tx.isInbound)}}function Tt(t,e){if(1&t&&(x.Ob(0),x.wc(1),x.bc(2,"shortenString"),x.Nb()),2&t){var n=x.ac(3);x.Ab(1),x.yc(" ",x.dc(2,1,n.tx.to[0],x.kc(4,yt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function Ot(t,e){if(1&t&&(x.Ob(0),x.wc(1),x.bc(2,"shortenString"),x.Nb()),2&t){var n=x.ac(3);x.Ab(1),x.yc(" ",x.dc(2,1,n.tx.from[0],x.kc(4,yt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function It(t,e){if(1&t&&(x.Qb(0,"h3",16),x.uc(1,Tt,3,6,"ng-container",6),x.uc(2,Ot,3,6,"ng-container",6),x.Pb()),2&t){var n=x.ac(2);x.Ab(1),x.gc("ngIf",n.tx.isInbound),x.Ab(1),x.gc("ngIf",!n.tx.isInbound)}}function kt(t,e){if(1&t&&(x.Ob(0),x.uc(1,At,3,2,"h3",15),x.uc(2,It,3,2,"h3",15),x.Nb()),2&t){var n=x.ac();x.Ab(1),x.gc("ngIf","exchangeTransaction"!==n.transactionType),x.Ab(1),x.gc("ngIf","exchangeTransaction"===n.transactionType)}}function Ct(t,e){if(1&t&&(x.Qb(0,"p",17),x.wc(1),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.yc(" ",n.tx.extra," ")}}var jt=function(){return{sameDay:"[Today]",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"HH:mm"}};function Lt(t,e){if(1&t&&(x.Qb(0,"p",23),x.wc(1),x.bc(2,"amCalendar"),x.bc(3,"amFromUnix"),x.Pb()),2&t){var n=x.ac(2);x.Ab(1),x.yc(" ",x.dc(2,1,x.cc(3,4,n.tx.timestamp),x.jc(6,jt))," ")}}var St=function(){return{sameDay:"[at] HH:mm",lastDay:"[at] HH:mm",lastWeek:"[at] HH:mm",sameElse:"L"}};function Dt(t,e){if(1&t&&(x.Qb(0,"p",23),x.wc(1),x.bc(2,"amCalendar"),x.bc(3,"amFromUnix"),x.Pb()),2&t){var n=x.ac(2);x.Ab(1),x.yc(" ",x.dc(2,1,x.cc(3,4,n.tx.timestamp),x.jc(6,St))," ")}}function _t(t,e){if(1&t&&(x.Qb(0,"ion-row",18),x.Qb(1,"ion-col",19),x.Qb(2,"ion-row",20),x.Qb(3,"ion-text",21),x.uc(4,Lt,4,7,"p",22),x.Pb(),x.Pb(),x.Qb(5,"ion-row",20),x.Qb(6,"ion-text",21),x.uc(7,Dt,4,7,"p",22),x.Pb(),x.Pb(),x.Pb(),x.Pb()),2&t){var n=x.ac();x.Ab(4),x.gc("ngIf",n.tx.timestamp),x.Ab(3),x.gc("ngIf",n.tx.timestamp)}}var Qt=function(t){return{protocol:t}},Et=function(){function t(t){this.protocolService=t}return t.prototype.ngOnInit=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this,[4,this.protocolService.getProtocol(this.tx.protocolIdentifier)];case 1:return t.protocol=e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(x.Lb(A.y))},t.\u0275cmp=x.Fb({type:t,selectors:[["transaction-item"]],inputs:{tx:"tx",transactionType:"transactionType"},decls:16,vars:16,consts:[["slot","start",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_received.svg",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_made.svg",4,"ngIf"],["color","black",1,"font--weight__bold"],["color","blackLight",1,"address-container"],["class","ion-text-capitalize","color","primary",4,"ngIf"],[4,"ngIf"],["slot","end",4,"ngIf"],["class","items--right","slot","end",4,"ngIf"],["slot","start"],[3,"address",4,"ngIf"],[3,"address"],["src","./assets/custom-ion-icons/md-call_received.svg"],["src","./assets/custom-ion-icons/md-call_made.svg"],["color","primary",1,"ion-text-capitalize"],["class","typography--mono",4,"ngIf"],[1,"typography--mono"],["slot","end"],["slot","end",1,"items--right"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["color","blackLight"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"]],template:function(t,e){1&t&&(x.Qb(0,"ion-item"),x.uc(1,ht,3,2,"ion-avatar",0),x.uc(2,pt,3,2,"ion-avatar",0),x.Qb(3,"ion-label"),x.Qb(4,"h2"),x.uc(5,mt,1,0,"ion-icon",1),x.uc(6,vt,1,0,"ion-icon",2),x.Qb(7,"span",3),x.wc(8),x.bc(9,"async"),x.bc(10,"amountConverter"),x.Pb(),x.Pb(),x.Qb(11,"ion-text",4),x.uc(12,wt,2,1,"ion-badge",5),x.uc(13,kt,3,2,"ng-container",6),x.Pb(),x.Pb(),x.uc(14,Ct,2,1,"p",7),x.uc(15,_t,8,2,"ion-row",8),x.Pb()),2&t&&(x.Ab(1),x.gc("ngIf","exchangeTransaction"!==e.transactionType),x.Ab(1),x.gc("ngIf","exchangeTransaction"===e.transactionType),x.Ab(3),x.gc("ngIf",e.tx.isInbound),x.Ab(1),x.gc("ngIf",!e.tx.isInbound),x.Ab(2),x.yc(" ",x.cc(9,9,x.dc(10,11,e.tx.amount,x.kc(14,Qt,e.tx.protocolIdentifier)))," "),x.Ab(4),x.gc("ngIf",e.tx.status&&"applied"!==e.tx.status),x.Ab(1),x.gc("ngIf",!e.tx.status||"applied"===e.tx.status),x.Ab(1),x.gc("ngIf","exchangeTransaction"===e.transactionType),x.Ab(1),x.gc("ngIf","normalTransaction"===e.transactionType))},directives:[a.A,i.n,a.E,a.db,a.e,A.s,a.w,a.h,a.R,a.p],pipes:[i.b,A.g,R.a,s.a,s.b],styles:[".address-container[_ngcontent-%COMP%]{display:flex}.address-container[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin-right:8px}"]}),t}();function Mt(t,e){if(1&t){var n=x.Rb();x.Qb(0,"ion-row"),x.Qb(1,"ion-col",3),x.Qb(2,"ion-text",4),x.Qb(3,"p",5),x.wc(4),x.bc(5,"translate"),x.Pb(),x.Pb(),x.Pb(),x.Qb(6,"ion-col",6),x.Qb(7,"ion-button",7),x.Yb("click",function(){return x.oc(n),x.ac().openBlockexplorer()}),x.Mb(8,"ion-icon",8),x.wc(9),x.bc(10,"translate"),x.Pb(),x.Pb(),x.Pb()}2&t&&(x.Ab(4),x.xc(x.cc(5,2,"account-transaction-list.pending-transactions.label")),x.Ab(5),x.yc(" ",x.cc(10,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}function Nt(t,e){1&t&&(x.Qb(0,"ion-row",9),x.Qb(1,"ion-text",4),x.Qb(2,"p"),x.wc(3),x.bc(4,"translate"),x.Pb(),x.Pb(),x.Pb()),2&t&&(x.Ab(3),x.xc(x.cc(4,1,"account-transaction-list.pending-exchange-transactions.label")))}function Rt(t,e){if(1&t){var n=x.Rb();x.Ob(0),x.Qb(1,"transaction-item",13),x.Yb("click",function(){x.oc(n);var t=e.$implicit;return x.ac(2).openTransactionDetailPage(t)}),x.Pb(),x.Nb()}if(2&t){var i=e.$implicit,o=x.ac(2);x.Ab(1),x.gc("tx",i)("transactionType",o.transactionType)}}function Bt(t,e){1&t&&(x.Qb(0,"ion-row",14),x.Mb(1,"ion-spinner",15),x.Pb())}function Kt(t,e){if(1&t&&(x.Qb(0,"ion-list",10),x.uc(1,Rt,2,2,"ng-container",11),x.uc(2,Bt,2,0,"ion-row",12),x.Pb()),2&t){var n=x.ac();x.Ab(1),x.gc("ngForOf",n.transactions),x.Ab(1),x.gc("ngIf",n.isRefreshing&&!n.initialTransactionsLoaded)}}function zt(t,e){1&t&&(x.Qb(0,"div",17),x.Mb(1,"img",18),x.Qb(2,"p"),x.wc(3),x.bc(4,"translate"),x.Pb(),x.Pb()),2&t&&(x.Ab(3),x.xc(x.cc(4,1,"account-transaction-list.no-transactions_text")))}function Ft(t,e){if(1&t&&(x.Ob(0),x.uc(1,zt,5,3,"div",16),x.Nb()),2&t){var n=x.ac();x.Ab(1),x.gc("ngIf",!n.isRefreshing&&0===n.transactions.length)}}var Vt=function(){function t(t,e,n){this.dataService=t,this.router=e,this.browserService=n,this.transactions=[],this.isRefreshing=!1,this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.initialTransactionsLoaded=!1}return t.prototype.openBlockexplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),this.browserService.openUrl(t),[2]}})})},t.prototype.openTransactionDetailPage=function(t){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return this.dataService.setData(_.b.DETAIL,t),[4,this.dataService.set(t.hash,t)];case 1:return e.sent(),this.router.navigateByUrl("/transaction-detail/"+_.b.DETAIL+"/"+t.hash).catch(Object(P.b)(P.a.NAVIGATION)),[2]}})})},t.\u0275fac=function(e){return new(e||t)(x.Lb(_.a),x.Lb(c.g),x.Lb(m.a))},t.\u0275cmp=x.Fb({type:t,selectors:[["transaction-list"]],inputs:{transactions:"transactions",isRefreshing:"isRefreshing",transactionType:"transactionType",hasPendingTransactions:"hasPendingTransactions",hasExchangeTransactions:"hasExchangeTransactions",initialTransactionsLoaded:"initialTransactionsLoaded",wallet:"wallet"},decls:4,vars:4,consts:[[4,"ngIf"],["class","ion-padding-horizontal",4,"ngIf"],["lines","none","class","ion-padding-bottom",4,"ngIf"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],[1,"ion-no-margin"],["size","12",1,"ion-no-padding"],["fill","outline","color","secondary","shape","round","slot","start","size","small",3,"click"],["slot","start","name","open"],[1,"ion-padding-horizontal"],["lines","none",1,"ion-padding-bottom"],[4,"ngFor","ngForOf"],["class","loading-content ion-justify-content-center",4,"ngIf"],[3,"tx","transactionType","click"],[1,"loading-content","ion-justify-content-center"],["color","black"],["class","empty-list ion-padding-horizontal",4,"ngIf"],[1,"empty-list","ion-padding-horizontal"],["src","./assets/img/empty-state-no-transaction.svg",1,"ion-padding-vertical"]],template:function(t,e){1&t&&(x.uc(0,Mt,11,6,"ion-row",0),x.uc(1,Nt,5,3,"ion-row",1),x.uc(2,Kt,3,2,"ion-list",2),x.uc(3,Ft,2,1,"ng-container",0)),2&t&&(x.gc("ngIf","pendingTransaction"===e.transactionType&&e.hasPendingTransactions),x.Ab(1),x.gc("ngIf","exchangeTransaction"===e.transactionType&&e.hasExchangeTransactions),x.Ab(1),x.gc("ngIf",void 0!==e.transactions&&e.transactions.length>0),x.Ab(1),x.gc("ngIf","normalTransaction"===e.transactionType))},directives:[i.n,a.R,a.p,a.db,a.i,a.w,a.F,i.m,Et,a.Y],pipes:[r.c],styles:[".empty-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;font-weight:100;font-size:1.4rem;height:50%}"]}),t}(),Ut=function(){function t(){}return t.\u0275mod=x.Jb({type:t}),t.\u0275inj=x.Ib({factory:function(e){return new(e||t)},imports:[[a.ib,i.c,o.e,l.a,r.b,u.a,s.c,c.j.forChild([{path:"",component:J}])]]}),t}();x.rc(J,[a.v,a.u,a.hb,a.j,a.f,a.g,a.fb,a.i,a.w,a.R,tt.a,i.m,a.q,i.n,st,it,ut,Vt,a.p,a.db,a.Y,a.O,a.P,a.x,a.y,a.r],[r.c])}}]);