(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{VPfA:function(t,n,i){"use strict";i.r(n),i.d(n,"AccountImportLedgerOnboardingPageModule",function(){return j});var o=i("ofXK"),e=i("3Pt+"),c=i("tyNb"),r=i("TEn/"),s=i("sYmb"),a=i("j1ZV"),b=i("mrSG"),l=i("RKiA"),d=i("0pct"),u=i("1y+R"),p=i("z26V"),g=i("hPkG"),h=i("fXoL"),f=i("138U"),m=function(t){return{protocolName:t}};function v(t,n){if(1&t&&(h.Qb(0,"ion-title"),h.Mb(1,"span",13),h.bc(2,"translate"),h.Pb()),2&t){var i=h.ac();h.Ab(1),h.gc("innerHTML",h.dc(2,1,"account-import-ledger-onboarding.title",h.kc(4,m,i.protocol.name)),h.pc)}}function P(t,n){if(1&t&&(h.Mb(0,"p",14),h.bc(1,"translate")),2&t){var i=h.ac();h.gc("innerHTML",h.dc(1,1,"account-import-ledger-onboarding.text",h.kc(4,m,i.protocol.name)),h.pc)}}function w(t,n){1&t&&(h.Ob(0),h.Mb(1,"ion-spinner",2),h.Qb(2,"ion-label"),h.Qb(3,"h3"),h.wc(4),h.bc(5,"translate"),h.Pb(),h.Pb(),h.Nb()),2&t&&(h.Ab(4),h.xc(h.cc(5,1,"account-import-ledger-onboarding.status-card.connecting")))}function A(t,n){if(1&t&&(h.Ob(0),h.Mb(1,"ion-icon",15),h.Qb(2,"ion-label",16),h.Qb(3,"h3"),h.wc(4),h.bc(5,"translate"),h.Pb(),h.Qb(6,"p"),h.wc(7),h.bc(8,"translate"),h.Pb(),h.Pb(),h.Nb()),2&t){var i=h.ac();h.Ab(4),h.yc(" ",h.cc(5,2,"account-import-ledger-onboarding.status-card.error.header")," "),h.Ab(3),h.xc(h.dc(8,4,"account-import-ledger-onboarding.status-card.error.message",h.kc(7,m,i.protocol.name)))}}function O(t,n){1&t&&(h.Ob(0),h.Mb(1,"ion-icon",17),h.Qb(2,"ion-label",16),h.Qb(3,"h3"),h.wc(4),h.bc(5,"translate"),h.Pb(),h.Pb(),h.Nb()),2&t&&(h.Ab(4),h.xc(h.cc(5,1,"account-import-ledger-onboarding.status-card.success")))}function y(t,n){if(1&t){var i=h.Rb();h.Ob(0),h.Qb(1,"ion-button",18),h.Yb("click",function(){return h.oc(i),h.ac().retry()}),h.wc(2),h.bc(3,"translate"),h.Pb(),h.Nb()}2&t&&(h.Ab(2),h.yc(" ",h.cc(3,1,"account-import-ledger-onboarding.status-card.retry_button")," "))}function L(t,n){if(1&t&&(h.Qb(0,"ion-slide",20),h.Qb(1,"div",21),h.Mb(2,"img",22),h.Qb(3,"ion-text"),h.Mb(4,"p",23),h.bc(5,"translate"),h.Pb(),h.Pb(),h.Pb()),2&t){var i=n.$implicit,o=h.ac(2);h.Ab(2),h.gc("src","./assets/img/"+i[0],h.qc),h.Ab(2),h.gc("innerHTML",h.dc(5,2,i[1],h.kc(5,m,o.protocol.name)),h.pc)}}function S(t,n){if(1&t&&(h.Ob(0),h.uc(1,L,6,7,"ion-slide",19),h.Nb()),2&t){var i=h.ac();h.Ab(1),h.gc("ngForOf",i.slideAssets)}}function Q(t,n){if(1&t){var i=h.Rb();h.Qb(0,"ion-button",18),h.Yb("click",function(){return h.oc(i),h.ac().showPrevSlide()}),h.Mb(1,"ion-icon",24),h.wc(2),h.bc(3,"translate"),h.Pb()}2&t&&(h.Ab(2),h.yc(" ",h.cc(3,1,"account-import-ledger-onboarding.back_button")," "))}function x(t,n){if(1&t){var i=h.Rb();h.Qb(0,"ion-button",18),h.Yb("click",function(){return h.oc(i),h.ac().finish()}),h.wc(1),h.bc(2,"translate"),h.Pb()}2&t&&(h.Ab(1),h.yc(" ",h.cc(2,1,"account-import-ledger-onboarding.done_button")," "))}function M(t,n){if(1&t){var i=h.Rb();h.Qb(0,"ion-button",18),h.Yb("click",function(){return h.oc(i),h.ac().showNextSlide()}),h.wc(1),h.bc(2,"translate"),h.Mb(3,"ion-icon",25),h.Pb()}2&t&&(h.Ab(1),h.yc(" ",h.cc(2,1,"account-import-ledger-onboarding.next_button")," "))}var I=function(){function t(t,n,i,o,e){var c=this;this.route=t,this.router=n,this.protocolService=i,this.dataService=o,this.ledgerService=e,this.slideAssets=[],this.slideOpts={initialSlide:0,speed:400,pagination:{el:".swiper-pagination",type:"custom",renderCustom:function(t,n,i){return c.customProgressBar(n,i)}}},this.canSlidePrev=!1,this.canSlideNext=!0,this.canFinish=!1,this.isLoading=!0,this.isSuccess=void 0,this.isConnected=!1;var r=this.route.snapshot.params.protocolID;this.protocol=Object(l.getProtocolByIdentifier)(r),this.init()}return t.prototype.showPrevSlide=function(){return Object(b.b)(this,void 0,void 0,function(){return Object(b.e)(this,function(t){switch(t.label){case 0:return[4,this.slides.slidePrev()];case 1:return t.sent(),[2]}})})},t.prototype.showNextSlide=function(){return Object(b.b)(this,void 0,void 0,function(){return Object(b.e)(this,function(t){switch(t.label){case 0:return[4,this.slides.slideNext()];case 1:return t.sent(),[2]}})})},t.prototype.ionSlideDidChange=function(){var t=this;this.slides.getActiveIndex().then(function(n){var i=n===t.slideAssets.length-1;t.canSlidePrev=n>0,t.canSlideNext=!i,t.canFinish=i,t.importFromLedger()}).catch(Object(g.b)(g.a.OTHER))},t.prototype.retry=function(){this.isLoading=!0,this.isSuccess=void 0,this.importFromLedger()},t.prototype.finish=function(){this.router.navigateByUrl("/tabs/portfolio",{replaceUrl:!0}).catch(Object(g.b)(g.a.NAVIGATION))},t.prototype.customProgressBar=function(t,n){var i="<div class='swiper-pagination-progressbar' style='height: 4px; top: 6px; width: calc(100% - 32px);left: 16px;'>";return(i+="<span class='swiper-pagination-progressbar-fill' style='transform: translate3d(0px, 0px, 0px) scaleX("+t/n+") scaleY(1); transition-duration: 300ms;'></span>")+"</span></div>"},t.prototype.init=function(){return Object(b.b)(this,void 0,void 0,function(){var t;return Object(b.e)(this,function(n){switch(n.label){case 0:return t=this,[4,this.protocolService.getProtocol(this.route.snapshot.params.protocolID)];case 1:return t.protocol=n.sent(),this.slideAssets=[["ledger_app_connected.svg","account-import-ledger-onboarding.slides.slide-1"],["ledger_app_"+this.protocol.identifier+".svg","account-import-ledger-onboarding.slides.slide-2"],["ledger_app_confirm.svg","account-import-ledger-onboarding.slides.slide-3"]],this.importFromLedger(),[2]}})})},t.prototype.importFromLedger=function(){return Object(b.b)(this,void 0,void 0,function(){var t=this;return Object(b.e)(this,function(n){return this.isSuccess||!this.protocol?[2]:(this.importPromise||(this.importPromise=Object(d.a)(this.connectWithLedger(),{maxRetries:4,interval:300}).then(function(){return Object(d.a)(t.ledgerService.importWallet(t.protocol.identifier).then(function(n){t.isLoading=!1,t.isSuccess=!0,t.dataService.setData(u.b.WALLET,n),t.router.navigateByUrl("/account-import/"+u.b.WALLET).catch(Object(g.b)(g.a.NAVIGATION))}),{maxRetries:1,interval:300})}).catch(function(n){console.warn(n),t.canFinish&&(t.isLoading=!1,t.isSuccess=!1)}).finally(function(){t.importPromise=void 0})),[2,this.importPromise])})})},t.prototype.connectWithLedger=function(){return Object(b.b)(this,void 0,void 0,function(){var t=this;return Object(b.e)(this,function(n){return this.isConnected||!this.protocol?[2]:(this.isLoading=!0,[2,this.ledgerService.openConnection(this.protocol.identifier).then(function(){t.isConnected=!0})])})})},t.\u0275fac=function(n){return new(n||t)(h.Lb(c.a),h.Lb(c.g),h.Lb(f.y),h.Lb(u.a),h.Lb(p.a))},t.\u0275cmp=h.Fb({type:t,selectors:[["page-account-import-ledger-onboarding"]],viewQuery:function(t,n){var i;1&t&&h.Cc(r.X,3),2&t&&h.mc(i=h.Zb())&&(n.slides=i.first)},decls:26,vars:11,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[4,"ngIf"],["class","ion-padding-horizontal",3,"innerHTML",4,"ngIf"],[1,"ion-margin"],["lines","none",1,"ion-no-padding"],["pager","true",3,"options","ionSlideDidChange"],["slides",""],[1,"ion-no-padding"],["slot","end"],["fill","clear","color","primary",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"ion-padding-horizontal",3,"innerHTML"],["name","alert-circle-outline","slot","start","size","large","color","warning"],[1,"ion-text-wrap"],["name","checkmark-circle-outline","slot","start","size","large","color","success"],["fill","clear","color","primary",3,"click"],["class","ion-padding-horizontal",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal"],[1,"slide-zoom"],[3,"src"],[1,"ion-text-left",3,"innerHTML"],["name","arrow-back"],["name","arrow-forward"]],template:function(t,n){1&t&&(h.Qb(0,"ion-header",0),h.Qb(1,"ion-grid",1),h.Qb(2,"ion-toolbar"),h.Qb(3,"ion-buttons",2),h.Mb(4,"ion-back-button",3),h.Pb(),h.uc(5,v,3,6,"ion-title",4),h.Pb(),h.Pb(),h.Pb(),h.Qb(6,"ion-content"),h.Qb(7,"ion-grid",1),h.uc(8,P,2,6,"p",5),h.Qb(9,"ion-card",6),h.Qb(10,"ion-card-content"),h.Qb(11,"ion-item",7),h.uc(12,w,6,3,"ng-container",4),h.uc(13,A,9,9,"ng-container",4),h.uc(14,O,6,3,"ng-container",4),h.Pb(),h.uc(15,y,4,3,"ng-container",4),h.Pb(),h.Pb(),h.Qb(16,"ion-slides",8,9),h.Yb("ionSlideDidChange",function(){return n.ionSlideDidChange()}),h.uc(18,S,2,1,"ng-container",4),h.Pb(),h.Pb(),h.Pb(),h.Qb(19,"ion-footer",0),h.Qb(20,"ion-grid",1),h.Qb(21,"ion-toolbar",10),h.Qb(22,"ion-buttons",11),h.uc(23,Q,4,3,"ion-button",12),h.uc(24,x,3,3,"ion-button",12),h.uc(25,M,4,3,"ion-button",12),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&t&&(h.Ab(5),h.gc("ngIf",n.protocol),h.Ab(3),h.gc("ngIf",n.protocol),h.Ab(4),h.gc("ngIf",n.isLoading),h.Ab(1),h.gc("ngIf",n.protocol&&!n.isLoading&&void 0!==n.isSuccess&&!n.isSuccess),h.Ab(1),h.gc("ngIf",!n.isLoading&&n.isSuccess),h.Ab(1),h.gc("ngIf",!n.isLoading&&void 0!==n.isSuccess&&!n.isSuccess),h.Ab(1),h.gc("options",n.slideOpts),h.Ab(2),h.gc("ngIf",n.protocol),h.Ab(5),h.gc("ngIf",n.canSlidePrev),h.Ab(1),h.gc("ngIf",n.canFinish),h.Ab(1),h.gc("ngIf",n.canSlideNext))},directives:[r.v,r.u,r.hb,r.j,r.f,r.g,o.n,r.q,r.k,r.l,r.A,r.X,r.t,r.fb,r.Y,r.E,r.w,r.i,o.m,r.W,r.db],pipes:[s.c],styles:["ion-slides[_ngcontent-%COMP%]{height:calc(100% - 72px)}@media (min-width:768px){ion-slides[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vw}}.swiper-slide[_ngcontent-%COMP%]{font-size:1rem}.slide-zoom[_ngcontent-%COMP%]{height:100%;padding:64px 0 0}"]}),t}(),j=function(){function t(){}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(n){return new(n||t)},imports:[[r.ib,o.c,e.e,a.a,s.b,c.j.forChild([{path:"",component:I}])]]}),t}()}}]);