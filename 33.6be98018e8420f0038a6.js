(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{SY1b:function(e,t,n){"use strict";n.r(t),n.d(t,"DelegationDetailPageModule",(function(){return ye}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),l=n("138U"),r=n("tyNb"),s=n("sYmb"),c=n("QUrN"),b=n("j1ZV"),d=n("iTUp"),g=n("mrSG"),u=n("2Vo4"),p=n("fXoL"),h=function(e){return{delegateeLabel:e}};function f(e,t){if(1&e){var n=p.Ob();p.Nb(0,"ion-item",3),p.Vb("click",(function(){return p.lc(n),p.Xb().changeDelegateeToAirGap()})),p.Jb(1,"ion-icon",4),p.uc(2),p.Yb(3,"translate"),p.Yb(4,"translate"),p.Mb()}if(2&e){var i=p.Xb();p.yb(2),p.wc(" ",p.ac(3,1,"delegate-action-popover.change-to-airgap-delegatee_label",p.hc(6,h,p.Zb(4,4,i.delegateeLabel)))," ")}}function y(e,t){if(1&e){var n=p.Ob();p.Nb(0,"ion-item",3),p.Vb("click",(function(){p.lc(n);var e=t.$implicit;return p.Xb().callSecondaryAction(e.type)})),p.Jb(1,"ion-icon",5),p.uc(2),p.Yb(3,"translate"),p.Mb()}if(2&e){var i=t.$implicit;p.yb(1),p.dc("name",i.iconName||"send-outline"),p.yb(1),p.wc(" ",p.Zb(3,2,i.confirmLabel||i.label)," ")}}var v=function(){return[]},m=function(){function e(e,t){this.popoverController=e,this.navParams=t;var n=this.navParams.get("hideAirGap"),i=this.navParams.get("delegateeLabel"),o=this.navParams.get("secondaryDelegatorActions");this.hideAirGap=void 0===n||n,this.delegateeLabel=void 0!==i?i:"delegation-detail.default-delegatee-label",this.secondaryDelegatorActions=void 0!==o?o:[]}return e.prototype.changeDelegateeToAirGap=function(){this.popoverController.dismiss({changeToAirGap:!0})},e.prototype.callSecondaryAction=function(e){this.popoverController.dismiss({secondaryActionType:e})},e.\u0275fac=function(t){return new(t||e)(p.Ib(a.Jb),p.Ib(a.Gb))},e.\u0275cmp=p.Cb({type:e,selectors:[["app-delegate-action-popover"]],decls:7,vars:6,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click",4,"ngIf"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["name","swap-vertical-outline","color","dark","slot","end"],["color","dark","slot","end",3,"name"]],template:function(e,t){1&e&&(p.Nb(0,"ion-list",0),p.Nb(1,"ion-list-header"),p.Nb(2,"ion-label"),p.uc(3),p.Yb(4,"translate"),p.Mb(),p.Mb(),p.sc(5,f,5,8,"ion-item",1),p.sc(6,y,4,4,"ion-item",2),p.Mb()),2&e&&(p.yb(3),p.vc(p.Zb(4,3,"delegate-action-popover.delegation-settings_label")),p.yb(2),p.dc("ngIf",!t.hideAirGap),p.yb(1),p.dc("ngForOf",t.secondaryDelegatorActions||p.gc(5,v)))},directives:[a.N,a.O,a.M,i.t,i.s,a.G,a.B],pipes:[s.d],styles:[""]}),e}(),w=n("VE8E"),D=n("ZBbp"),M=n("tZEG"),N=n("1y+R"),A=n("Xl7a"),I=n("nxqh"),O=n("hPkG"),k=n("oCjk"),x=n("57MG"),C=n("0CrI"),$=n("cwVp"),Y=n("vqqn"),L=n("sXsg"),F=n("wcx9");function j(e,t){if(1&e){var n=p.Ob();p.Nb(0,"ion-button",30),p.Vb("click",(function(e){return p.lc(n),p.Xb().presentEditPopover(e)})),p.Jb(1,"ion-icon",31),p.Mb()}}function Z(e,t){if(1&e&&p.Jb(0,"widget-account",32),2&e){var n=p.Xb();p.dc("widget",n.delegateeAccountWidget)}}function X(e,t){1&e&&(p.Nb(0,"div"),p.Nb(1,"ion-item",33),p.Nb(2,"ion-avatar",2),p.Jb(3,"ion-skeleton-text",34),p.Mb(),p.Nb(4,"ion-label"),p.Nb(5,"h2"),p.Jb(6,"ion-skeleton-text",35),p.Mb(),p.Nb(7,"p"),p.Jb(8,"ion-skeleton-text",36),p.Mb(),p.Mb(),p.Mb(),p.Mb())}var G=function(e){return{delegateeLabel:e}};function J(e,t){if(1&e){var n=p.Ob();p.Nb(0,"ion-row",37),p.Nb(1,"ion-col",12),p.Nb(2,"ion-button",38),p.Vb("click",(function(){return p.lc(n),p.Xb().showDelegateesList()})),p.Jb(3,"ion-icon",39),p.uc(4),p.Yb(5,"translate"),p.Yb(6,"translate"),p.Mb(),p.Mb(),p.Mb()}if(2&e){var i=p.Xb();p.yb(4),p.wc(" ",p.ac(5,1,"delegation-detail.change-delegatee_label",p.hc(6,G,p.Zb(6,4,i.delegateeLabel)))," ")}}function P(e,t){if(1&e&&(p.Nb(0,"span"),p.uc(1),p.Yb(2,"number"),p.Yb(3,"async"),p.Mb()),2&e){var n=p.Xb(2);p.yb(1),p.wc(" ",p.ac(2,1,100*p.Zb(3,4,n.delegateeDetails$).usageDetails.usage.toNumber(),"1.2-2"),"% ")}}function S(e,t){if(1&e&&(p.Nb(0,"small"),p.sc(1,P,4,6,"span",23),p.Yb(2,"async"),p.Mb()),2&e){var n=p.Xb();p.yb(1),p.dc("ngIf",p.Zb(2,1,n.delegateeDetails$).usageDetails)}}function E(e,t){1&e&&(p.Nb(0,"div"),p.Nb(1,"p",40),p.Jb(2,"ion-skeleton-text",41),p.Mb(),p.Mb())}var T=function(e){return{protocol:e,maxDigits:3}};function _(e,t){if(1&e&&(p.Nb(0,"span"),p.uc(1),p.Yb(2,"async"),p.Yb(3,"amountConverter"),p.Yb(4,"async"),p.Yb(5,"async"),p.Yb(6,"amountConverter"),p.Yb(7,"async"),p.Mb()),2&e){var n=p.Xb(2);p.yb(1),p.xc(" ",p.Zb(2,2,p.ac(3,4,p.Zb(4,7,n.delegateeDetails$).usageDetails.current.toFixed(),p.hc(16,T,n.wallet.protocol)))," / ",p.Zb(5,9,p.ac(6,11,p.Zb(7,14,n.delegateeDetails$).usageDetails.total.toFixed(),p.hc(18,T,n.wallet.protocol)))," ")}}function V(e,t){if(1&e&&(p.Nb(0,"small"),p.sc(1,_,8,20,"span",23),p.Yb(2,"async"),p.Mb()),2&e){var n=p.Xb();p.yb(1),p.dc("ngIf",p.Zb(2,1,n.delegateeDetails$).usageDetails)}}function B(e,t){1&e&&(p.Nb(0,"div",42),p.Jb(1,"ion-skeleton-text",41),p.Mb())}function z(e,t){if(1&e&&(p.Lb(0),p.Nb(1,"ion-item",44),p.Jb(2,"widget-selector",32),p.Mb(),p.Kb()),2&e){var n=t.$implicit;p.yb(2),p.dc("widget",n)}}function K(e,t){if(1&e&&(p.Nb(0,"ion-card"),p.sc(1,z,3,1,"ng-container",43),p.Yb(2,"async"),p.Mb()),2&e){var n=p.Xb(2);p.yb(1),p.dc("ngForOf",n.filterVisible(p.Zb(2,1,n.delegateeDetails$).displayDetails))}}function R(e,t){if(1&e&&(p.Lb(0),p.sc(1,K,3,3,"ion-card",23),p.Yb(2,"async"),p.Kb()),2&e){var n=p.Xb();p.yb(1),p.dc("ngIf",p.Zb(2,1,n.delegateeDetails$).displayDetails)}}function U(e,t){1&e&&(p.Nb(0,"ion-card"),p.Nb(1,"ion-item",44),p.Nb(2,"ion-avatar",2),p.Jb(3,"ion-skeleton-text",34),p.Mb(),p.Nb(4,"ion-label"),p.Nb(5,"h2"),p.Jb(6,"ion-skeleton-text",45),p.Mb(),p.Nb(7,"h3"),p.Jb(8,"ion-skeleton-text",46),p.Mb(),p.Mb(),p.Mb(),p.Mb())}function W(e,t){1&e&&p.Jb(0,"widget-alert",32),2&e&&p.dc("widget",t.$implicit)}function q(e,t){if(1&e&&(p.Nb(0,"ion-row",6),p.Nb(1,"ion-col",7),p.sc(2,W,1,1,"widget-alert",47),p.Mb(),p.Mb()),2&e){var n=p.Xb();p.yb(2),p.dc("ngForOf",n.delegationAlertWidgets)}}function H(e,t){if(1&e&&(p.Nb(0,"ion-segment-button",52),p.Nb(1,"ion-label"),p.uc(2),p.Yb(3,"translate"),p.Mb(),p.Mb()),2&e){var n=t.$implicit;p.dc("value",n.type),p.yb(2),p.vc(p.Zb(3,2,n.label))}}var Q=function(){return[]};function ee(e,t){if(1&e){var n=p.Ob();p.Nb(0,"ion-segment",50),p.Vb("ngModelChange",(function(e){return p.lc(n),p.Xb(2).activeDelegatorAction=e}))("ionChange",(function(){p.lc(n);var e=p.Xb(2);return e.onActiveActionChange(e.activeDelegatorAction)})),p.sc(1,H,4,4,"ion-segment-button",51),p.Yb(2,"async"),p.Mb()}if(2&e){var i=p.Xb(2);p.dc("ngModel",i.activeDelegatorAction),p.yb(1),p.dc("ngForOf",p.Zb(2,2,i.delegatorDetails$).mainActions||p.gc(4,Q))}}function te(e,t){if(1&e&&(p.Nb(0,"ion-row",6),p.Nb(1,"ion-col",7),p.Jb(2,"p",53),p.Yb(3,"translate"),p.Mb(),p.Mb()),2&e){var n=p.Xb(2).$implicit;p.yb(2),p.dc("innerHtml",p.Zb(3,1,n.description),p.mc)}}function ne(e,t){if(1&e&&(p.Nb(0,"form",56),p.Jb(1,"widget-selector",57),p.Mb()),2&e){var n=p.Xb().$implicit,i=p.Xb(2).$implicit,o=p.Xb(2);p.dc("formGroup",o.delegationForms.get(i.type)),p.yb(1),p.dc("widget",n)("widgetForm",o.delegationForms.get(i.type))}}function ie(e,t){if(1&e&&p.Jb(0,"widget-selector",32),2&e){var n=p.Xb().$implicit;p.dc("widget",n)}}function oe(e,t){if(1&e&&(p.Nb(0,"ion-row"),p.Nb(1,"ion-col",7),p.sc(2,ne,2,3,"form",54),p.sc(3,ie,1,1,"widget-selector",55),p.Mb(),p.Mb()),2&e){var n=p.Xb(2).$implicit,i=p.Xb(2);p.yb(2),p.dc("ngIf",i.delegationForms.get(n.type)),p.yb(1),p.dc("ngIf",!i.delegationForms.get(n.type))}}function ae(e,t){if(1&e&&(p.Lb(0),p.sc(1,te,4,3,"ion-row",22),p.sc(2,oe,4,2,"ion-row",43),p.Kb()),2&e){var n=p.Xb().$implicit,i=p.Xb(2);p.yb(1),p.dc("ngIf",n.description),p.yb(1),p.dc("ngForOf",i.filterVisible(n.args))}}function le(e,t){if(1&e&&(p.Lb(0),p.sc(1,ae,3,2,"ng-container",23),p.Kb()),2&e){var n=t.$implicit,i=p.Xb(2);p.yb(1),p.dc("ngIf",i.activeDelegatorAction===n.type.toString())}}var re=function(e){return{"segment--container":e}};function se(e,t){if(1&e&&(p.Nb(0,"ion-row"),p.Nb(1,"ion-col",7),p.sc(2,ee,3,5,"ion-segment",48),p.Nb(3,"div",49),p.sc(4,le,2,1,"ng-container",43),p.Yb(5,"async"),p.Mb(),p.Mb(),p.Mb()),2&e){var n=p.Xb();p.yb(2),p.dc("ngIf",n.shouldDisplaySegmentButtons),p.yb(1),p.dc("ngClass",p.hc(5,re,n.shouldDisplaySegmentButtons)),p.yb(1),p.dc("ngForOf",p.Zb(5,3,n.delegatorDetails$).mainActions||p.gc(7,Q))}}function ce(e,t){if(1&e&&(p.Nb(0,"ion-item",44),p.Jb(1,"widget-icon-text",32),p.Mb()),2&e){var n=p.Xb(2);p.yb(1),p.dc("widget",n.delegatorBalanceWidget)}}function be(e,t){if(1&e&&(p.Lb(0),p.Nb(1,"ion-item",44),p.Jb(2,"widget-selector",32),p.Mb(),p.Kb()),2&e){var n=t.$implicit;p.yb(2),p.dc("widget",n)}}function de(e,t){if(1&e&&(p.Lb(0),p.sc(1,ce,2,1,"ion-item",58),p.sc(2,be,3,1,"ng-container",43),p.Yb(3,"async"),p.Kb()),2&e){var n=p.Xb();p.yb(1),p.dc("ngIf",n.delegatorBalanceWidget),p.yb(1),p.dc("ngForOf",n.filterVisible(p.Zb(3,2,n.delegatorDetails$).displayDetails))}}function ge(e,t){1&e&&(p.Nb(0,"ion-item",44),p.Nb(1,"ion-avatar",2),p.Jb(2,"ion-skeleton-text",34),p.Mb(),p.Nb(3,"ion-label"),p.Nb(4,"h2"),p.Jb(5,"ion-skeleton-text",45),p.Mb(),p.Nb(6,"h3"),p.Jb(7,"ion-skeleton-text",46),p.Mb(),p.Mb(),p.Mb())}function ue(e,t){if(1&e&&(p.Lb(0),p.Nb(1,"ion-row",6),p.Nb(2,"ion-text",24),p.Nb(3,"p",59),p.uc(4),p.Yb(5,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Nb(6,"ion-row"),p.Nb(7,"ion-col",7),p.Jb(8,"widget-reward-list",32),p.Yb(9,"async"),p.Mb(),p.Mb(),p.Kb()),2&e){var n=p.Xb();p.yb(4),p.wc(" ",p.Zb(5,2,"delegation-detail.your-rewards_label")," "),p.yb(4),p.dc("widget",p.Zb(9,4,n.rewardDisplay$))}}function pe(e,t){1&e&&(p.Lb(0),p.Nb(1,"ion-card"),p.Nb(2,"ion-item",44),p.Nb(3,"ion-label"),p.Nb(4,"h2"),p.Jb(5,"ion-skeleton-text",60),p.Mb(),p.Nb(6,"h3"),p.Jb(7,"ion-skeleton-text",34),p.Mb(),p.Nb(8,"h3"),p.Jb(9,"ion-skeleton-text",34),p.Mb(),p.Nb(10,"h3"),p.Jb(11,"ion-skeleton-text",34),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Kb())}function he(e,t){if(1&e&&p.sc(0,pe,12,0,"ng-container",23),2&e){var n=p.Xb();p.dc("ngIf",void 0===n.hasRewardDetails)}}var fe=function(){function e(e,t,n,i,o,a,l,r,s,c,b,d){this.router=e,this.navController=t,this.dataService=n,this.operations=i,this.extensionsService=o,this.loadingController=a,this.popoverController=l,this.toastController=r,this.route=s,this.formBuilder=c,this.amountConverter=b,this.accountProvider=d,this.delegationForms=new Map,this.activeDelegatorAction=null,this.activeDelegatorActionConfirmButton=null,this.delegateeDetails$=new u.a(null),this.delegatorDetails$=new u.a(null),this.rewardDisplay$=new u.a(null),this.canProceed=!0,this.hasRewardDetails=void 0,this.delegateeAddress$=new u.a(null),this.areMultipleDelegationsSupported=!1}return Object.defineProperty(e.prototype,"shouldDisplaySegmentButtons",{get:function(){var e=this.delegatorDetails$.value;return e.mainActions&&e.mainActions.some((function(e){return!!e.description||!!e.args}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAirGapDelegatee",{get:function(){return!!Object(w.a)(this.wallet.protocol)&&this.wallet.protocol.airGapDelegatee()&&this.delegateeAddress$.value===this.wallet.protocol.airGapDelegatee()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideAirGapOverflow",{get:function(){return Object(w.a)(this.wallet.protocol)&&!this.wallet.protocol.airGapDelegatee()||this.isAirGapDelegatee},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.wallet=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),this.extensionsService.loadDelegationExtensions().then((function(){e.initView()}))},e.prototype.filterVisible=function(e){return e?e.filter((function(e){return e.isVisible})):[]},e.prototype.presentEditPopover=function(e){return Object(g.b)(this,void 0,void 0,(function(){var t,n,i=this;return Object(g.e)(this,(function(o){switch(o.label){case 0:return[4,this.popoverController.create({component:m,componentProps:{hideAirGap:this.hideAirGapOverflow,delegateeLabel:this.delegateeLabel,secondaryDelegatorActions:(t=this.delegatorDetails$.value)?t.secondaryActions:void 0},event:e,translucent:!0})];case 1:return(n=o.sent()).onDidDismiss().then((function(e){var t=e.data;return Object(g.b)(i,void 0,void 0,(function(){return Object(g.e)(this,(function(e){return Object(k.b)(t,"changeToAirGap")&&Object(w.a)(this.wallet.protocol)?this.changeDisplayedDetails(this.wallet.protocol.airGapDelegatee()):Object(k.b)(t,"secondaryActionType")?this.callSecondaryAction(t.secondaryActionType):console.log("Unknown option selected."),[2]}))}))})).catch(Object(O.b)(O.a.IONIC_ALERT)),[2,n.present().catch(Object(O.b)(O.a.NAVIGATION))]}}))}))},e.prototype.callMainAction=function(e){var t=this.delegatorDetails$.value;t&&(t.mainActions&&0!==t.mainActions.length?this.callAction(t.mainActions,e):this.navController.back())},e.prototype.callSecondaryAction=function(e){var t=this.delegatorDetails$.value;t&&this.callAction(t.secondaryActions||[],e)},e.prototype.onActiveActionChange=function(e){var t=this.delegatorDetails$.value.mainActions?this.delegatorDetails$.value.mainActions.find((function(t){return t.type.toString()===e})):null;this.activeDelegatorAction=e,this.activeDelegatorActionConfirmButton=t&&!t.disabled?t.confirmLabel||t.label:null},e.prototype.showDelegateesList=function(){var e=this;this.dataService.setData(N.b.DETAIL,{wallet:this.wallet,delegateeLabel:this.delegateeLabel,delegateeLabelPlural:this.delegateeLabelPlural,areMultipleDelegationsSupported:this.areMultipleDelegationsSupported,currentDelegatees:this.delegatorDetails$.value.delegatees,callback:function(t){e.changeDisplayedDetails(t)}}),this.router.navigateByUrl("/delegation-list/"+N.b.DETAIL,{skipLocationChange:!0}).catch(Object(O.b)(O.a.NAVIGATION))},e.prototype.initView=function(){var e=this;this.delegateeLabel=Object(w.a)(this.wallet.protocol)?this.wallet.protocol.delegateeLabel:"delegation-detail.default-delegatee-label",this.delegateeLabelPlural=Object(w.a)(this.wallet.protocol)?this.wallet.protocol.delegateeLabelPlural:"delegation-detail.defailt-delegatee-label-plural",this.areMultipleDelegationsSupported=!!Object(w.a)(this.wallet.protocol)&&this.wallet.protocol.supportsMultipleDelegations,this.subscribeObservables(),this.operations.getCurrentDelegatees(this.wallet).then((function(t){t&&e.delegateeAddress$.next(t[0])}))},e.prototype.subscribeObservables=function(){var e=this;this.delegateeAddress$.subscribe((function(t){return Object(g.b)(e,void 0,void 0,(function(){var e=this;return Object(g.e)(this,(function(n){return t&&(this.updateDisplayedDetails(null),this.updateDisplayedRewards(null),this.operations.getDelegationDetails(this.wallet,[t]).then((function(t){t&&t.length>0&&e.updateDisplayedDetails(t)})),this.operations.getRewardDisplayDetails(this.wallet,[t]).then((function(t){e.hasRewardDetails=void 0!==t,t&&e.updateDisplayedRewards(t)}))),[2]}))}))})),this.delegateeDetails$.subscribe((function(t){e.delegateeAccountWidget=t?new D.a({name:t.name,address:t.address,logo:t.logo,shortenAddress:!0}):null})),this.delegatorDetails$.subscribe((function(t){return Object(g.b)(e,void 0,void 0,(function(){var e,n,i;return Object(g.e)(this,(function(o){switch(o.label){case 0:return this.showOverflowMenu=!(this.isAirGapDelegatee||this.hideAirGapOverflow)||t&&t.secondaryActions&&t.secondaryActions.length>0,t?(e=this,n=M.a.bind,i={iconName:"wallet-outline"},[4,this.amountConverter.transform(t.balance,{protocol:this.wallet.protocol})]):[3,2];case 1:e.delegatorBalanceWidget=new(n.apply(M.a,[void 0,(i.text=o.sent(),i.description="delegation-detail.your-balance_label",i)])),this.setupAllActions(t),this.setupFormObservers(),this.initActiveDelegatorAction(t),o.label=2;case 2:return[2]}}))}))}))},e.prototype.setupAllActions=function(e){this.setupActions(e.mainActions||[]),this.setupActions(e.secondaryActions||[])},e.prototype.setupActions=function(e){var t=this;e.forEach((function(e){t.setupFormForAction(e),e.form=t.delegationForms.get(e.type),e.args&&e.args.forEach((function(e){e.wallet=t.wallet}))}))},e.prototype.setupFormForAction=function(e){e.form&&this.delegationForms.set(e.type,e.form);var t=this.delegationForms.get(e.type),n={};e.args&&e.args.forEach((function(e){n[e.id]=t?t.value[e.id]:null})),t?Object.keys(n).map((function(e){return[e,n[e]]})).forEach((function(e){var n=Object(g.f)(e,2);return t.addControl(n[0],n[1])})):this.delegationForms.set(e.type,this.formBuilder.group(n))},e.prototype.setupFormObservers=function(){var e=this;Array.from(this.delegationForms.entries()).forEach((function(t){var n=Object(g.f)(t,2),i=n[0],o=n[1];o.valueChanges.subscribe((function(){e.activeDelegatorAction===i.toString()&&setTimeout((function(){e.canProceed=o.valid}))}))}))},e.prototype.initActiveDelegatorAction=function(e){var t=e.mainActions?e.mainActions[0]:null;this.onActiveActionChange(t?t.type.toString():null)},e.prototype.updateDisplayedDetails=function(e){this.delegationAlertWidgets=e?e[0].alerts:void 0,this.delegateeDetails$.next(e?e[0].delegatees[0]:null),this.delegatorDetails$.next(e?e[0].delegator:null)},e.prototype.updateDisplayedRewards=function(e){this.rewardDisplay$.next(e)},e.prototype.changeDisplayedDetails=function(e){this.delegateeAddress$.next(e)},e.prototype.callAction=function(e,t){var n=e.find((function(e){return e.type.toString()===t})),i=n?n.type:void 0;n.disabled?this.navController.back():i?this.prepareDelegationAction(i):console.warn("Unknown action")},e.prototype.prepareDelegationAction=function(e){return Object(g.b)(this,void 0,void 0,(function(){var t,n,i,o,a;return Object(g.e)(this,(function(l){switch(l.label){case 0:return t=this,[4,this.loadingController.create({message:"Preparing transaction..."})];case 1:return t.loader=l.sent(),[4,this.loader.present().catch(Object(O.b)(O.a.IONIC_LOADER))];case 2:l.sent(),l.label=3;case 3:return l.trys.push([3,5,,6]),n=this.delegationForms.get(e),[4,this.operations.prepareDelegatorAction(this.wallet,e,n?n.value:void 0)];case 4:return i=l.sent(),o={wallet:this.wallet,airGapTxs:i.airGapTxs,data:i.unsignedTx},this.dismissLoader(),this.dataService.setData(N.b.INTERACTION,o),this.router.navigateByUrl("/interaction-selection/"+N.b.INTERACTION,{skipLocationChange:!0}).catch(Object(O.b)(O.a.NAVIGATION)),[3,6];case 5:return a=l.sent(),this.dismissLoader(),console.warn(a),this.showToast(a.message),[3,6];case 6:return[2]}}))}))},e.prototype.dismissLoader=function(){this.loader&&this.loader.dismiss().catch(Object(O.b)(O.a.IONIC_LOADER))},e.prototype.showToast=function(e){return Object(g.b)(this,void 0,void 0,(function(){return Object(g.e)(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:e,duration:3e3,position:"bottom"})];case 1:return t.sent().present().catch(Object(O.b)(O.a.IONIC_TOAST)),[2]}}))}))},e.\u0275fac=function(t){return new(t||e)(p.Ib(r.g),p.Ib(a.Eb),p.Ib(N.a),p.Ib(I.a),p.Ib(A.a),p.Ib(a.Cb),p.Ib(a.Jb),p.Ib(a.Ob),p.Ib(r.a),p.Ib(o.e),p.Ib(l.f),p.Ib(x.a))},e.\u0275cmp=p.Cb({type:e,selectors:[["app-delegation-detail"]],decls:73,vars:56,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["slot","end"],["color","secondary",3,"click",4,"ngIf"],[1,"ion-padding-horizontal"],["size","12"],[3,"widget",4,"ngIf","ngIfElse"],["delegateeAvatarSkeleton",""],["class","ion-padding-horizontal action--container",4,"ngIf"],[1,"ion-padding-horizontal","ion-padding-bottom"],["size","12",1,"ion-no-padding"],[1,"progress--container"],[1,"progress--current"],["size","6",1,"ion-no-padding"],[4,"ngIf","ngIfElse"],["delegateeUsageSkeleton",""],["size","6",1,"ion-no-padding","ion-text-right"],["delegateeUsageDetailsSkeleton",""],[1,"ion-padding-bottom"],["delegateeExtraSkeleton",""],["class","ion-padding-horizontal",4,"ngIf"],[4,"ngIf"],["color","primary"],[1,"font--weight__bold","ion-no-margin","ion-ion-text"],["delegatorDetailsSkeleton",""],["rewardsSkeleton",""],["vertical","bottom","horizontal","end","slot","fixed"],["shape","round","color","primary",3,"disabled","click"],["color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[3,"widget"],["lines","none",1,"ion-no-padding"],["animated",""],["animated","",2,"width","40%","height","19px"],["animated","",2,"width","80%"],[1,"ion-padding-horizontal","action--container"],["color","secondary","shape","round","size","small","fill","outline",3,"click"],["slot","start","name","swap-vertical-outline"],[1,"ion-no-margin"],["animated","",2,"width","50%"],[1,"justify--content__end"],[4,"ngFor","ngForOf"],["lines","none"],["animated","",2,"width","80%","height","19px"],["animated","",2,"width","40%"],[3,"widget",4,"ngFor","ngForOf"],["scrollable","true","class","ion-padding-horizontal",3,"ngModel","ngModelChange","ionChange",4,"ngIf"],[3,"ngClass"],["scrollable","true",1,"ion-padding-horizontal",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"innerHtml"],[3,"formGroup",4,"ngIf"],[3,"widget",4,"ngIf"],[3,"formGroup"],[3,"widget","widgetForm"],["lines","none",4,"ngIf"],["ion-text","",1,"font--weight__bold","ion-no-margin"],["animated","",2,"width","100%","height","19px"]],template:function(e,t){if(1&e&&(p.Nb(0,"ion-header",0),p.Nb(1,"ion-grid",1),p.Nb(2,"ion-toolbar"),p.Nb(3,"ion-buttons",2),p.Jb(4,"ion-back-button",3),p.Mb(),p.Nb(5,"ion-title"),p.uc(6),p.Yb(7,"translate"),p.Yb(8,"translate"),p.Mb(),p.Nb(9,"ion-buttons",4),p.sc(10,j,2,0,"ion-button",5),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(11,"ion-content"),p.Nb(12,"ion-grid",1),p.Nb(13,"ion-row",6),p.Nb(14,"ion-col",7),p.sc(15,Z,1,1,"widget-account",8),p.sc(16,X,9,0,"ng-template",null,9,p.tc),p.Mb(),p.Mb(),p.sc(18,J,7,8,"ion-row",10),p.Yb(19,"async"),p.Nb(20,"ion-row",11),p.Nb(21,"ion-col",12),p.Nb(22,"p"),p.uc(23),p.Yb(24,"titlecase"),p.Yb(25,"translate"),p.Yb(26,"async"),p.Mb(),p.Mb(),p.Nb(27,"ion-col",12),p.Nb(28,"div",13),p.Jb(29,"div",14),p.Yb(30,"async"),p.Mb(),p.Mb(),p.Nb(31,"ion-col",12),p.Nb(32,"ion-row"),p.Nb(33,"ion-col",15),p.sc(34,S,3,3,"small",16),p.Yb(35,"async"),p.sc(36,E,3,0,"ng-template",null,17,p.tc),p.Mb(),p.Nb(38,"ion-col",18),p.sc(39,V,3,3,"small",16),p.Yb(40,"async"),p.sc(41,B,2,0,"ng-template",null,19,p.tc),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(43,"ion-row",20),p.Nb(44,"ion-col",7),p.sc(45,R,3,3,"ng-container",16),p.Yb(46,"async"),p.sc(47,U,9,0,"ng-template",null,21,p.tc),p.Mb(),p.Mb(),p.sc(49,q,3,1,"ion-row",22),p.sc(50,se,6,8,"ion-row",23),p.Yb(51,"async"),p.Nb(52,"ion-row",6),p.Nb(53,"ion-col",12),p.Nb(54,"ion-text",24),p.Nb(55,"p",25),p.uc(56),p.Yb(57,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(58,"ion-row",20),p.Nb(59,"ion-col",7),p.Nb(60,"ion-card"),p.sc(61,de,4,4,"ng-container",16),p.Yb(62,"async"),p.sc(63,ge,8,0,"ng-template",null,26,p.tc),p.Mb(),p.Mb(),p.Mb(),p.sc(65,ue,10,6,"ng-container",16),p.Yb(66,"async"),p.sc(67,he,1,1,"ng-template",null,27,p.tc),p.Mb(),p.Nb(69,"ion-fab",28),p.Nb(70,"ion-button",29),p.Vb("click",(function(){return t.callMainAction(t.activeDelegatorAction)})),p.uc(71),p.Yb(72,"translate"),p.Mb(),p.Mb(),p.Mb()),2&e){var n,i=p.kc(17),o=p.kc(37),a=p.kc(42),l=p.kc(48),r=p.kc(64),s=p.kc(68),c=null;p.yb(6),p.vc(p.ac(7,23,"delegation-detail.title",p.hc(54,G,p.Zb(8,26,t.delegateeLabel)))),p.yb(4),p.dc("ngIf",t.showOverflowMenu),p.yb(5),p.dc("ngIf",t.delegateeAccountWidget)("ngIfElse",i),p.yb(3),p.dc("ngIf",p.Zb(19,28,t.delegateeDetails$)),p.yb(5),p.vc(p.Zb(24,30,p.Zb(25,32,null==(n=p.Zb(26,34,t.delegateeDetails$))?null:n.status))),p.yb(6),p.rc("width",(100*(null==(c=p.Zb(30,36,t.delegateeDetails$))||null==c.usageDetails?null:c.usageDetails.usage.toNumber())).toFixed(2)+"%"),p.yb(5),p.dc("ngIf",p.Zb(35,38,t.delegateeDetails$))("ngIfElse",o),p.yb(5),p.dc("ngIf",p.Zb(40,40,t.delegateeDetails$))("ngIfElse",a),p.yb(6),p.dc("ngIf",p.Zb(46,42,t.delegateeDetails$))("ngIfElse",l),p.yb(4),p.dc("ngIf",t.delegationAlertWidgets),p.yb(1),p.dc("ngIf",p.Zb(51,44,t.delegatorDetails$)),p.yb(6),p.wc(" ",p.Zb(57,46,"delegation-detail.your-delegation_label")," "),p.yb(5),p.dc("ngIf",p.Zb(62,48,t.delegatorDetails$))("ngIfElse",r),p.yb(4),p.dc("ngIf",p.Zb(66,50,t.rewardDisplay$))("ngIfElse",s),p.yb(5),p.dc("disabled",!t.canProceed),p.yb(1),p.wc(" ",p.Zb(72,52,t.activeDelegatorActionConfirmButton||"delegation-detail.done_button")," ")}},directives:[a.A,a.z,a.yb,a.k,a.f,a.g,a.wb,i.t,a.t,a.fb,a.s,a.tb,a.l,a.v,a.j,a.B,C.a,a.G,a.e,a.lb,a.M,i.s,$.a,Y.a,i.q,a.hb,a.Mb,o.m,o.p,a.ib,o.C,o.n,o.g,L.a,F.a],pipes:[s.d,i.b,i.F,i.g,l.f],styles:[".progress--container[_ngcontent-%COMP%]{width:100%;height:4px;background-color:rgba(0,232,204,.12)}.progress--current[_ngcontent-%COMP%]{height:inherit;background-color:var(--ion-color-primary)}.border--container[_ngcontent-%COMP%]{border:1px solid var(--ion-color-secondary);border-radius:50%}.segment--container[_ngcontent-%COMP%]{min-height:185px}ion-segment[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0;display:none}ion-segment[_ngcontent-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content}.action--container[_ngcontent-%COMP%]{background:#fff}"]}),e}(),ye=function(){function e(){}return e.\u0275mod=p.Gb({type:e}),e.\u0275inj=p.Fb({factory:function(t){return new(t||e)},imports:[[i.c,o.h,o.w,a.Ab,b.a,s.c,d.a,c.l,r.k.forChild([{path:"",component:fe}]),l.d]]}),e}()}}]);