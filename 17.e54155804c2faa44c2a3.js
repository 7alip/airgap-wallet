(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{RpAR:function(t,e,n){"use strict";n.r(e),n.d(e,"TransactionPreparePageModule",(function(){return Z}));var o=n("138U"),a=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),s=n("TEn/"),c=n("sYmb"),l=n("j1ZV"),d=n("iTUp"),b=n("mrSG"),u=n("IVSH"),p=n("1T0C"),f=n("kB5k"),m=n("2Vo4"),h=n("Kj3r"),g=n("57MG"),v=n("QMTT"),M=n("1y+R"),y=n("nxqh"),N=n("hPkG"),w=function(){function t(){}return t.validate=function(t){var e=t.addressValidationPattern;return function(t){return null===String(t.value).match(e)?{addressFormat:"Address format is unknown."}:null}},t}(),_=n("fUHw"),P=n("fXoL"),x=n("pNtj"),A=n("onrW");function O(t,e){if(1&t&&(P.Nb(0,"ion-badge"),P.uc(1),P.Mb()),2&t){var n=P.Xb(2);P.yb(1),P.wc(" ",n.wallet.protocol.options.network.rpcUrl," ")}}function S(t,e){if(1&t&&(P.Lb(0,44),P.Nb(1,"ion-badge",45),P.uc(2),P.Mb(),P.sc(3,O,2,1,"ion-badge",13),P.Kb()),2&t){var n=P.Xb();P.yb(2),P.vc(n.wallet.protocol.options.network.name),P.yb(1),P.dc("ngIf",n.wallet.protocol.options.network.type===n.networkType.CUSTOM)}}var C=function(t,e){return{protocol:t,maxDigits:e}};function F(t,e){if(1&t&&(P.Nb(0,"strong"),P.uc(1),P.Yb(2,"async"),P.Yb(3,"amountConverter"),P.Mb()),2&t){var n=P.Xb();P.yb(1),P.wc(" ",P.Zb(2,1,P.ac(3,3,n.state.availableBalance,P.ic(6,C,n.wallet.protocol.identifier,n.wallet.protocol.decimals+1)))," ")}}var k=function(t){return{addressPlaceholder:t}};function B(t,e){if(1&t&&(P.Nb(0,"ion-row",46),P.Nb(1,"ion-col",16),P.Nb(2,"ion-text",47),P.Jb(3,"p",48),P.Yb(4,"translate"),P.Mb(),P.Mb(),P.Mb()),2&t){var n=P.Xb();P.yb(3),P.dc("innerHTML",P.ac(4,1,"transaction-prepare.error.address_label",P.hc(4,k,n.wallet.protocol.addressPlaceholder)),P.mc)}}function I(t,e){1&t&&P.Jb(0,"ion-spinner",49)}function z(t,e){1&t&&(P.Nb(0,"span"),P.uc(1),P.Yb(2,"translate"),P.Mb()),2&t&&(P.yb(1),P.vc(P.Zb(2,1,"transaction-prepare.fee.max_label")))}function T(t,e){1&t&&(P.Nb(0,"ion-col",50),P.Nb(1,"ion-text",47),P.Nb(2,"p",15),P.uc(3),P.Yb(4,"translate"),P.Mb(),P.Mb(),P.Mb()),2&t&&(P.yb(3),P.wc(" ",P.Zb(4,1,"transaction-prepare.error.amount_label")," "))}function j(t,e){if(1&t){var n=P.Ob();P.Nb(0,"ion-button",51),P.Vb("click",(function(){return P.lc(n),P.Xb().prepareTransaction()})),P.Jb(1,"ion-icon",52),P.uc(2),P.Yb(3,"translate"),P.Mb()}if(2&t){var o=P.Xb();P.dc("disabled",o.state.disablePrepareButton),P.yb(2),P.wc(" ",P.Zb(3,2,"transaction-prepare.create-transaction")," ")}}function L(t,e){if(1&t){var n=P.Ob();P.Nb(0,"ion-button",51),P.Vb("click",(function(){return P.lc(n),P.Xb().prepareTransaction()})),P.Jb(1,"ion-icon",52),P.uc(2),P.Yb(3,"translate"),P.Mb()}if(2&t){var o=P.Xb();P.dc("disabled",o.state.disablePrepareButton),P.yb(2),P.wc(" ",P.Zb(3,2,"transaction-prepare.create-transaction")," ")}}var D=function(t){return{title:t}},Y=function(t,e){return{protocolIdentifier:t,currentMarketPrice:e}},J=function(){function t(t,e,n,o,a,r,s,c,l,d,f){var h=this;this.loadingCtrl=t,this.formBuilder=e,this.router=n,this.route=o,this._ngZone=a,this.clipboardProvider=r,this.operationsProvider=s,this.dataService=c,this.amountConverterPipe=l,this.priceService=d,this.accountProvider=f,this.networkType=p.NetworkType,this.state$=new m.a(this._state),this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.address=this.route.snapshot.params.address,this.amount=Number(this.route.snapshot.params.amount),this.forced=this.route.snapshot.params.forceMigration;var g="false"===this.address?"":this.address||"",v=this.amount||0,M=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),y="forced"===this.forced||!1;this.transactionForm=this.formBuilder.group({address:[g,i.A.compose([i.A.required,w.validate(M.protocol)])],amount:[v,i.A.compose([i.A.required,_.a.validate(M.protocol.decimals)])],feeLevel:[0,[i.A.required]],fee:[0,i.A.compose([i.A.required,_.a.validate(M.protocol.feeDecimals)])],isAdvancedMode:[!1,[]]}),this.wallet=M,this.isSubstrate=M.protocol.identifier===u.MainProtocolSymbols.KUSAMA||M.protocol.identifier===u.MainProtocolSymbols.POLKADOT,this.initState().then((function(){return Object(b.b)(h,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return y?[4,this.forceMigration()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.onChanges(),this.updateFeeEstimate(),[2]}}))}))})).catch(Object(N.b)(N.a.OTHER))}return t.prototype.onChanges=function(){var t=this;this.state$.pipe(Object(h.a)(200)).subscribe((function(e){t.onStateUpdated(e)})),this.transactionForm.get("address").valueChanges.pipe(Object(h.a)(500)).subscribe((function(e){t.updateState({address:{value:e,dirty:!0},disableSendMaxAmount:!1,disablePrepareButton:t.transactionForm.invalid||new f.BigNumber(t._state.amount.value).lte(0)}),t.updateFeeEstimate()})),this.transactionForm.get("amount").valueChanges.pipe(Object(h.a)(500)).subscribe((function(e){var n=new f.BigNumber(e);t.updateState({sendMaxAmount:!1,amount:{value:n.isNaN()?"":n.toFixed(),dirty:!0},disablePrepareButton:t.transactionForm.invalid||n.isNaN()||n.lte(0)}),t.updateFeeEstimate()})),this.transactionForm.get("fee").valueChanges.pipe(Object(h.a)(500)).subscribe((function(e){var n=new f.BigNumber(e);t.updateState({fee:{value:n.isNaN()?"":n.toFixed(),dirty:!0},disablePrepareButton:t.transactionForm.invalid||new f.BigNumber(t._state.amount.value).lte(0)}),t._state.sendMaxAmount&&t.updateWithMaxAmount(n.toString(10))})),this.transactionForm.get("feeLevel").valueChanges.subscribe((function(e){var n=new f.BigNumber(t.getFeeFromLevel(e));t.updateState({fee:{value:n.toFixed(),dirty:!1},feeLevel:{value:e,dirty:!0},disablePrepareButton:t.transactionForm.invalid||new f.BigNumber(t._state.amount.value).lte(0)},!1),t._state.sendMaxAmount&&t.updateWithMaxAmount(n.toString(10))})),this.transactionForm.get("isAdvancedMode").valueChanges.subscribe((function(e){t.updateState({isAdvancedMode:{value:e,dirty:!0},disablePrepareButton:t.transactionForm.invalid||new f.BigNumber(t._state.amount.value).lte(0)},!1)}))},t.prototype.initState=function(){return Object(b.b)(this,void 0,void 0,(function(){var t;return Object(b.e)(this,(function(e){switch(e.label){case 0:return this._state={availableBalance:null,forceMigration:!1,feeDefaults:this.wallet.protocol.feeDefaults,feeCurrentMarketPrice:null,sendMaxAmount:!1,disableSendMaxAmount:!0,disableAdvancedMode:this.isSubstrate,disableFeeSlider:!0,disablePrepareButton:!0,estimatingMaxAmount:!1,estimatingFeeDefaults:!1,address:{value:this.transactionForm.controls.address.value,dirty:!1},amount:{value:this.transactionForm.controls.amount.value,dirty:!1},feeLevel:{value:this.transactionForm.controls.feeLevel.value,dirty:!1},fee:{value:this.transactionForm.controls.fee.value,dirty:!1},isAdvancedMode:{value:this.transactionForm.controls.isAdvancedMode.value,dirty:!1}},this.state=this._state,[4,Promise.all([this.calculateFeeCurrentMarketPrice(this.wallet),this.getAvailableBalance(this.wallet)])];case 1:return t=b.f.apply(void 0,[e.sent(),2]),this.updateState({availableBalance:t[1],feeCurrentMarketPrice:t[0]}),[2]}}))}))},t.prototype.updateState=function(t,e){void 0===e&&(e=!0),this._state=this.reduceState(this._state,t),e?this.state$.next(this._state):this.onStateUpdated(this._state)},t.prototype.reduceState=function(t,e){return{availableBalance:void 0!==e.availableBalance?e.availableBalance:t.availableBalance,forceMigration:void 0!==e.forceMigration?e.forceMigration:t.forceMigration,feeDefaults:e.feeDefaults||t.feeDefaults,feeCurrentMarketPrice:void 0!==e.feeCurrentMarketPrice?e.feeCurrentMarketPrice:t.feeCurrentMarketPrice,sendMaxAmount:void 0!==e.sendMaxAmount?e.sendMaxAmount:t.sendMaxAmount,disableSendMaxAmount:void 0!==e.disableSendMaxAmount?e.disableSendMaxAmount:t.disableSendMaxAmount,disableAdvancedMode:this.isSubstrate||(void 0!==e.disableAdvancedMode?e.disableAdvancedMode:t.disableAdvancedMode),disableFeeSlider:this.isSubstrate||(void 0!==e.disableFeeSlider?e.disableFeeSlider:t.disableFeeSlider),disablePrepareButton:void 0!==e.disablePrepareButton?e.disablePrepareButton:t.disablePrepareButton,estimatingMaxAmount:void 0!==e.estimatingMaxAmount?e.estimatingMaxAmount:t.estimatingMaxAmount,estimatingFeeDefaults:void 0!==e.estimatingFeeDefaults?e.estimatingFeeDefaults:t.estimatingFeeDefaults,address:e.address||t.address,amount:e.amount||t.amount,feeLevel:e.feeLevel||t.feeLevel,fee:e.fee||t.fee,isAdvancedMode:e.isAdvancedMode||t.isAdvancedMode}},t.prototype.onStateUpdated=function(t){this.state=t,this.updateTransactionForm({address:this.state.address,amount:this.state.amount,fee:this.state.fee,feeLevel:this.state.feeLevel,isAdvancedMode:this.state.isAdvancedMode})},t.prototype.updateTransactionForm=function(t){var e=this,n=this.transactionForm.value,o={};Object.keys(n).forEach((function(e){e in t&&!t[e].dirty&&t[e].value!==n[e]&&(o[e]=t[e].value)})),this._ngZone.run((function(){e.transactionForm.patchValue(o,{emitEvent:!1}),Object.keys(o).forEach((function(t){e.transactionForm.controls[t].markAsDirty()}))}))},t.prototype.calculateFeeCurrentMarketPrice=function(t){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(e){return t.protocol.identifier===u.SubProtocolSymbols.XTZ_BTC?[2,this.priceService.getCurrentMarketPrice(new u.TezosProtocol,"USD").then((function(t){return t.toNumber()}))]:t.protocol.identifier.startsWith(u.SubProtocolSymbols.ETH_ERC20)?[2,this.priceService.getCurrentMarketPrice(new u.EthereumProtocol,"USD").then((function(t){return t.toNumber()}))]:[2,t.currentMarketPrice.toNumber()]}))}))},t.prototype.getAvailableBalance=function(t){return Object(b.b)(this,void 0,void 0,(function(){var e;return Object(b.e)(this,(function(n){switch(n.label){case 0:return t.protocol.identifier!==u.MainProtocolSymbols.COSMOS&&t.protocol.identifier!==u.MainProtocolSymbols.KUSAMA&&t.protocol.identifier!==u.MainProtocolSymbols.POLKADOT?[3,2]:(e=f.BigNumber.bind,[4,t.protocol.getAvailableBalanceOfAddresses([t.addresses[0]])]);case 1:return[2,new(e.apply(f.BigNumber,[void 0,n.sent()]))];case 2:return[2,t.currentBalance]}}))}))},t.prototype.updateFeeEstimate=function(){return Object(b.b)(this,void 0,void 0,(function(){var t,e;return Object(b.e)(this,(function(n){switch(n.label){case 0:return this._state.isAdvancedMode.value?[3,2]:(this.updateState({estimatingFeeDefaults:!0,disableFeeSlider:!0,disablePrepareButton:!0}),[4,this.estimateFees().catch((function(){}))]);case 1:t=n.sent(),this.updateState({estimatingFeeDefaults:!1,feeDefaults:t,fee:{value:new f.BigNumber(this.getFeeFromLevel(e=t&&!this.isSubstrate?1:this._state.feeLevel.value,t)).toFixed(),dirty:!1},feeLevel:{value:e,dirty:!1},disableFeeSlider:!t,disablePrepareButton:!t||this.transactionForm.invalid||new f.BigNumber(this._state.amount.value).lte(0)}),n.label=2;case 2:return[2]}}))}))},t.prototype.estimateFees=function(){return Object(b.b)(this,void 0,void 0,(function(){var t,e,n;return Object(b.e)(this,(function(o){return t=new f.BigNumber(this._state.amount.value).shiftedBy(this.wallet.protocol.decimals),e=this.transactionForm.controls.address.valid,n=this.transactionForm.controls.amount.valid&&!t.isNaN()&&t.gt(0),[2,e&&n?this.operationsProvider.estimateFees(this.wallet,this._state.address.value,t):void 0]}))}))},t.prototype.getFeeFromLevel=function(t,e){var n=e||this._state.feeDefaults;switch(t){case 0:return n.low;case 1:return n.medium;case 2:return n.high;default:return n.medium}},t.prototype.prepareTransaction=function(){return Object(b.b)(this,void 0,void 0,(function(){var t,e,n;return Object(b.e)(this,(function(o){switch(o.label){case 0:t=new f.BigNumber(this._state.amount.value).shiftedBy(this.wallet.protocol.decimals),e=new f.BigNumber(this._state.fee.value).shiftedBy(this.wallet.protocol.feeDecimals),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.operationsProvider.prepareTransaction(this.wallet,this._state.address.value,t,e)];case 2:return n=o.sent(),this.dataService.setData(M.b.INTERACTION,{wallet:this.wallet,airGapTxs:n.airGapTxs,data:n.unsignedTx}),this.router.navigateByUrl("/interaction-selection/"+M.b.INTERACTION).catch(Object(N.b)(N.a.NAVIGATION)),[3,4];case 3:return o.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.openScanner=function(){var t=this;this.dataService.setData(M.b.SCAN,{callback:function(e){t.updateState({address:{value:e,dirty:!1}})}}),this.router.navigateByUrl("/scan-address/"+M.b.SCAN).catch(Object(N.b)(N.a.NAVIGATION))},t.prototype.toggleMaxAmount=function(){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return this.updateState({sendMaxAmount:!this._state.sendMaxAmount},!1),this._state.sendMaxAmount?[4,this.updateWithMaxAmount()]:[3,2];case 1:t.sent(),this.updateFeeEstimate(),t.label=2;case 2:return[2]}}))}))},t.prototype.forceMigration=function(){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return this.updateState({forceMigration:!0,sendMaxAmount:!0,disablePrepareButton:!1},!1),[4,this.updateWithMaxAmount()];case 1:return t.sent(),[2]}}))}))},t.prototype.updateWithMaxAmount=function(t){return Object(b.b)(this,void 0,void 0,(function(){var e,n,o;return Object(b.e)(this,(function(a){switch(a.label){case 0:return this.updateState({estimatingMaxAmount:!0}),e=t?new f.BigNumber(t).shiftedBy(this.wallet.protocol.feeDecimals):void 0,[4,this.operationsProvider.estimateMaxTransferAmount(this.wallet,this._state.address.value,e)];case 1:return n=a.sent(),o=this.amountConverterPipe.transformValueOnly(n,this.wallet.protocol,this.wallet.protocol.decimals+1),n.isNaN()||this.updateState({estimatingMaxAmount:!1,amount:{value:o,dirty:!1},disablePrepareButton:this.transactionForm.invalid||n.isNaN()||n.lte(0)}),[2]}}))}))},t.prototype.pasteClipboard=function(){var t=this;this.clipboardProvider.paste().then((function(e){t.updateState({address:{value:e,dirty:!1},disableSendMaxAmount:!1,disablePrepareButton:t.transactionForm.invalid||new f.BigNumber(t._state.amount.value).lte(0)}),t.updateFeeEstimate()}),(function(t){console.error("Error: "+t)}))},t.\u0275fac=function(e){return new(e||t)(P.Ib(s.Cb),P.Ib(i.e),P.Ib(r.g),P.Ib(r.a),P.Ib(P.z),P.Ib(o.j),P.Ib(y.a),P.Ib(M.a),P.Ib(o.f),P.Ib(v.a),P.Ib(g.a))},t.\u0275cmp=P.Cb({type:t,selectors:[["page-transaction-prepare"]],decls:79,vars:55,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/portfolio"],[1,"ion-no-padding"],["fixed","true"],[1,"ion-padding-horizontal"],["class","ion-no-padding","lines","none","slot","start",4,"ngIf"],[1,"ion-padding-bottom",3,"formGroup"],[1,"ion-padding-horizontal","ion-padding-top"],["size","10",1,"ion-no-padding"],[1,"balance__container","ion-no-padding"],[1,"font--size__large","ion-no-margin"],[4,"ngIf"],["color","blackLight"],[1,"ion-no-margin"],["size","12",1,"ion-no-padding"],[1,"content--align-vert__center","to-address__item","ion-no-padding"],["color","blackLight","position","stacked"],["formControlName","address","id","address-input",3,"placeholder"],["size","2",1,"ion-no-padding"],[1,"ion-justify-content-center","ion-align-items-center"],[3,"address"],[1,"line--vertical"],["class","error--address ion-padding-horizontal",4,"ngIf"],[1,"ion-padding-horizontal","ion-padding-bottom","address-to__buttons"],["fill","outline","size","small","color","secondary","shape","round",3,"click"],["slot","start","name","barcode-outline"],[1,"divider--line"],[1,"ion-padding-horizontal","ion-padding-top","ion-align-items-center","amount__container"],["size","9",1,"ion-no-padding","amount--container__input"],["lines","none",1,"ion-no-padding"],["color","blackLight","position","stacked",1,"ion-no-margin"],["formControlName","amount","type","number","id","amount-input","placeholder","0.0"],["color","blackLight",1,"ion-no-margin"],["size","3",1,"ion-no-padding"],["slot","end"],["shape","round","size","small","color","secondary",3,"fill","click"],["name","lines-small","color","primary",4,"ngIf"],[1,"ion-padding-horizontal","ion-padding-bottom"],["size","12",4,"ngIf"],[3,"wallet","state","form"],["vertical","bottom","horizontal","end","slot","fixed"],["id","prepare","size","default","color","primary","shape","round",3,"disabled","click",4,"ngIf"],["lines","none","slot","start",1,"ion-no-padding"],["color","danger"],[1,"error--address","ion-padding-horizontal"],["color","danger",1,"ion-no-margin"],[1,"ion-no-margin",3,"innerHTML"],["name","lines-small","color","primary"],["size","12"],["id","prepare","size","default","color","primary","shape","round",3,"disabled","click"],["slot","start","name","open"]],template:function(t,e){1&t&&(P.Nb(0,"ion-header",0),P.Nb(1,"ion-grid",1),P.Nb(2,"ion-toolbar"),P.Nb(3,"ion-buttons",2),P.Jb(4,"ion-back-button",3),P.Mb(),P.Nb(5,"ion-title"),P.uc(6),P.Yb(7,"translate"),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Nb(8,"ion-content",4),P.Nb(9,"ion-grid",5),P.Nb(10,"ion-row",6),P.Nb(11,"ion-col",4),P.Nb(12,"ion-row"),P.sc(13,S,4,2,"ng-container",7),P.Mb(),P.Mb(),P.Mb(),P.Nb(14,"form",8),P.Nb(15,"ion-row",9),P.Nb(16,"ion-col",10),P.Nb(17,"ion-row"),P.Nb(18,"ion-col",11),P.Nb(19,"ion-row"),P.Nb(20,"p",12),P.sc(21,F,4,9,"strong",13),P.Mb(),P.Mb(),P.Nb(22,"ion-row"),P.Nb(23,"ion-text",14),P.Nb(24,"p",15),P.uc(25),P.Yb(26,"number"),P.Yb(27,"async"),P.Yb(28,"cryptoToFiat"),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Nb(29,"ion-row"),P.Nb(30,"ion-col",16),P.Nb(31,"ion-item",17),P.Nb(32,"ion-label",18),P.uc(33),P.Yb(34,"translate"),P.Mb(),P.Jb(35,"ion-textarea",19),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Nb(36,"ion-col",20),P.Nb(37,"ion-row",21),P.Nb(38,"ion-avatar"),P.Jb(39,"airgap-identicon",22),P.Mb(),P.Mb(),P.Nb(40,"ion-row",21),P.Jb(41,"div",23),P.Mb(),P.Nb(42,"ion-row",21),P.Nb(43,"ion-avatar"),P.Jb(44,"airgap-identicon",22),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.sc(45,B,5,6,"ion-row",24),P.Nb(46,"ion-row",25),P.Nb(47,"ion-button",26),P.Vb("click",(function(){return e.pasteClipboard()})),P.uc(48),P.Yb(49,"translate"),P.Mb(),P.Nb(50,"ion-button",26),P.Vb("click",(function(){return e.openScanner()})),P.Jb(51,"ion-icon",27),P.uc(52),P.Yb(53,"translate"),P.Mb(),P.Mb(),P.Jb(54,"div",28),P.Nb(55,"ion-row",29),P.Nb(56,"ion-col",30),P.Nb(57,"ion-item",31),P.Nb(58,"ion-label",32),P.uc(59),P.Yb(60,"translate"),P.Mb(),P.Jb(61,"ion-input",33),P.Mb(),P.Nb(62,"ion-text",34),P.Nb(63,"p",15),P.uc(64),P.Yb(65,"number"),P.Mb(),P.Mb(),P.Mb(),P.Nb(66,"ion-col",35),P.Nb(67,"ion-toolbar"),P.Nb(68,"ion-buttons",36),P.Nb(69,"ion-button",37),P.Vb("click",(function(){return e.toggleMaxAmount()})),P.sc(70,I,1,0,"ion-spinner",38),P.sc(71,z,3,3,"span",13),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Mb(),P.Nb(72,"ion-row",39),P.sc(73,T,5,3,"ion-col",40),P.Mb(),P.Jb(74,"div",28),P.Jb(75,"fee",41),P.Mb(),P.Mb(),P.Nb(76,"ion-fab",42),P.sc(77,j,4,4,"ion-button",43),P.sc(78,L,4,4,"ion-button",43),P.Mb(),P.Mb()),2&t&&(P.yb(6),P.wc(" ",P.ac(7,28,"transaction-prepare.title",P.hc(50,D,e.wallet.protocol.symbol))," "),P.yb(7),P.dc("ngIf",e.wallet.protocol.options.network&&e.wallet.protocol.options.network.type!==e.networkType.MAINNET),P.yb(1),P.dc("formGroup",e.transactionForm),P.yb(7),P.dc("ngIf",null!==e.state.availableBalance),P.yb(4),P.wc(" $",P.ac(26,31,P.Zb(27,34,P.ac(28,36,e.state.availableBalance,P.ic(52,Y,e.wallet.protocol.identifier,e.wallet.currentMarketPrice))),"1.2-2")," "),P.yb(8),P.vc(P.Zb(34,39,"Send To")),P.yb(2),P.dc("placeholder",e.wallet.protocol.addressPlaceholder),P.zb("disabled",e.state.forceMigration),P.yb(4),P.dc("address",e.wallet.receivingPublicAddress),P.yb(5),P.dc("address",e.transactionForm.get("address").value),P.yb(1),P.dc("ngIf",e.transactionForm.controls.address.dirty&&e.transactionForm.controls.address.invalid),P.yb(2),P.zb("disabled",e.state.forceMigration),P.yb(1),P.wc(" ",P.Zb(49,41,"transaction-prepare.paste_label")," "),P.yb(2),P.zb("disabled",e.state.forceMigration),P.yb(2),P.wc(" ",P.Zb(53,43,"transaction-prepare.to-address-scan_label")," "),P.yb(7),P.wc(" ",P.Zb(60,45,"transaction-prepare.amount_label")," "),P.yb(2),P.zb("disabled",e.state.forceMigration),P.yb(3),P.wc(" $",P.ac(65,47,e.wallet.currentMarketPrice.times(e.state.amount.value).toNumber(),"1.2-2")," "),P.yb(5),P.dc("fill",e.state.sendMaxAmount?"solid":"outline"),P.zb("disabled",e.state.disableSendMaxAmount),P.yb(1),P.dc("ngIf",e.state.estimatingMaxAmount),P.yb(1),P.dc("ngIf",!e.state.estimatingMaxAmount),P.yb(2),P.dc("ngIf",!e.transactionForm.controls.amount.valid),P.yb(2),P.dc("wallet",e.wallet)("state",e.state)("form",e.transactionForm),P.yb(2),P.dc("ngIf",!e.state.forceMigration),P.yb(1),P.dc("ngIf",e.state.forceMigration))},directives:[s.A,s.z,s.yb,s.k,s.f,s.g,s.wb,s.t,s.fb,s.s,a.t,i.C,i.n,i.g,s.tb,s.G,s.M,s.ub,s.Nb,i.m,i.f,s.e,o.r,s.j,s.B,s.F,s.Hb,x.a,s.v,s.i,s.ob],pipes:[c.d,a.g,a.b,A.a,o.f],styles:[".error--address[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:8px 0 0}.item-ios.item-toggle[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .item-md.item-toggle[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .label-stacked[_ngcontent-%COMP%]{font-size:14px}.font--size__large[_ngcontent-%COMP%]{font-size:large}.divider--line[_ngcontent-%COMP%]{height:1px;width:100%}.divider--line[_ngcontent-%COMP%], .line--vertical[_ngcontent-%COMP%]{background-color:rgba(var(--ion-color-light-contrast-rgb),.12)}.line--vertical[_ngcontent-%COMP%]{height:24px;width:1px;margin:8px 0}.balance__container[_ngcontent-%COMP%]{min-height:60px;justify-content:center;display:flex;flex-direction:column}.to-address__item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{font-size:12px}.address-to__buttons[_ngcontent-%COMP%]{padding-top:4px}.amount__container[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border-bottom-color:transparent!important;box-shadow:none!important}.amount__container[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;margin:0;--padding-top:12px;--padding-bottom:12px}.amount__container[_ngcontent-%COMP%]   .amount--container__input[_ngcontent-%COMP%], .amount__container[_ngcontent-%COMP%]   .amount--container__input[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{padding-right:0}ion-avatar[_ngcontent-%COMP%]{height:48px;width:48px}.range-slider[_ngcontent-%COMP%]{--bar-background:rgba(var(--ion-color-secondary-rgb),0.12);--bar-background-active:var(--ion-color-primary)}.advanced-item[_ngcontent-%COMP%]{--border-color:var(--ion-color-primary)}"]}),t}(),Z=function(){function t(){}return t.\u0275mod=P.Gb({type:t}),t.\u0275inj=P.Fb({factory:function(e){return new(e||t)},imports:[[s.Ab,a.c,i.h,i.w,c.c,l.a,d.a,r.k.forChild([{path:"",component:J}]),o.d]]}),t}()},onrW:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("mrSG"),a=n("kB5k"),i=n("fXoL"),r=n("138U"),s=function(){function t(t){this.protocolService=t}return t.prototype.transform=function(t,e){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.e)(this,(function(o){switch(o.label){case 0:if(!e||!e.currentMarketPrice||!a.BigNumber.isBigNumber(e.currentMarketPrice)||isNaN(e.currentMarketPrice.toNumber())||!e.protocolIdentifier||!t||!a.BigNumber.isBigNumber(t)||isNaN(t.toNumber()))return[2,""];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.protocolService.getProtocol(e.protocolIdentifier)];case 2:return n=o.sent(),[3,4];case 3:return o.sent(),[2,""];case 4:return[2,e.currentMarketPrice.multipliedBy(t.shiftedBy(-1*n.decimals)).toFixed()]}}))}))},t.\u0275fac=function(e){return new(e||t)(i.Ib(r.y))},t.\u0275pipe=i.Hb({name:"cryptoToFiat",type:t,pure:!0}),t}()},pNtj:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n("IVSH");var o=n("fXoL"),a=n("3Pt+"),i=n("TEn/"),r=n("ofXK"),s=n("sYmb");function c(t,e){if(1&t&&(o.Nb(0,"ion-row",10),o.Nb(1,"ion-col",2),o.Nb(2,"ion-item",19),o.Jb(3,"ion-label",20),o.Jb(4,"ion-input",21),o.Nb(5,"span",22),o.uc(6),o.Yb(7,"translate"),o.Yb(8,"uppercase"),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t){var n=o.Xb();o.yb(4),o.zb("disabled",n.state.forceMigration||n.state.disableAdvancedMode),o.yb(2),o.xc(" ",o.Zb(7,3,"transaction-prepare.fee.label")," (",o.Zb(8,5,n.wallet.protocol.feeSymbol),") ")}}function l(t,e){1&t&&(o.Lb(0,26),o.uc(1),o.Yb(2,"translate"),o.Kb()),2&t&&(o.yb(1),o.wc(" ",o.Zb(2,1,"transaction-prepare.amount_label")," "))}function d(t,e){if(1&t&&(o.Lb(0,26),o.uc(1),o.Yb(2,"number"),o.Kb()),2&t){var n=o.Xb(2);o.yb(1),o.wc(" $",o.ac(2,1,n.form.get("fee").value*n.state.feeCurrentMarketPrice,"1.2-4")," ")}}function b(t,e){if(1&t&&(o.Nb(0,"span",27),o.uc(1),o.Yb(2,"number"),o.Yb(3,"uppercase"),o.Mb()),2&t){var n=o.Xb(2);o.yb(1),o.xc(" (",o.ac(2,2,n.state.fee.value,"1.2-6")," ",o.Zb(3,5,n.wallet.protocol.feeSymbol),") ")}}function u(t,e){if(1&t&&(o.Lb(0),o.Nb(1,"span",23),o.sc(2,l,3,3,"ng-container",24),o.sc(3,d,3,4,"ng-container",24),o.Mb(),o.sc(4,b,4,7,"span",25),o.Kb()),2&t){var n=o.Xb();o.yb(2),o.dc("ngIf",n.form.controls.fee.invalid),o.yb(1),o.dc("ngIf",n.form.controls.fee.valid),o.yb(1),o.dc("ngIf",n.state)}}function p(t,e){1&t&&o.Jb(0,"ion-skeleton-text",28)}var f=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Cb({type:t,selectors:[["fee"]],inputs:{wallet:"wallet",state:"state",form:"form"},decls:32,vars:18,consts:[[3,"formGroup"],[1,"fee--amount__label","ion-padding-horizontal"],["size","12",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["color","blackLight",1,"ion-no-margin"],["slot","end","mode","md","formControlName","isAdvancedMode"],["nowrap","",1,"ion-padding-horizontal"],["min","0","max","2","step","1","snaps","true","formControlName","feeLevel","id","feeLevel-input",1,"range-slider","ion-no-padding"],["slot","start","color","black","name","hourglass-outline"],["slot","end","color","black","name","rocket-outline"],[1,"ion-padding-horizontal"],["size","6",1,"ion-no-padding"],["size","6",1,"ion-no-padding","ion-text-right"],["class","ion-padding-horizontal",4,"ngIf"],[1,"fee-amount__help","ion-padding-horizontal"],["color","blackLight"],[1,"ion-no-margin"],[4,"ngIf"],["animated","","style","width: 30%",4,"ngIf"],[1,"ion-no-padding"],["position","stacked"],["id","fee-input","formControlName","fee","type","string",1,"ion-no-padding"],["slot","end",1,"input--placeholder"],["id","fee-amount"],["color","primary",4,"ngIf"],["id","fee-amount-advanced",4,"ngIf"],["color","primary"],["id","fee-amount-advanced"],["animated","",2,"width","30%"]],template:function(t,e){1&t&&(o.Nb(0,"form",0),o.Nb(1,"ion-row",1),o.Nb(2,"ion-col",2),o.Nb(3,"ion-item",3),o.Nb(4,"ion-text",4),o.Nb(5,"ion-label"),o.uc(6),o.Yb(7,"translate"),o.Yb(8,"uppercase"),o.Mb(),o.Mb(),o.Jb(9,"ion-toggle",5),o.Mb(),o.Mb(),o.Mb(),o.Nb(10,"ion-row",6),o.Nb(11,"ion-col",2),o.Nb(12,"ion-item",3),o.Nb(13,"ion-range",7),o.Jb(14,"ion-icon",8),o.Jb(15,"ion-icon",9),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Nb(16,"ion-row",10),o.Nb(17,"ion-col",11),o.Nb(18,"small"),o.uc(19),o.Yb(20,"translate"),o.Mb(),o.Mb(),o.Nb(21,"ion-col",12),o.Nb(22,"small"),o.uc(23),o.Yb(24,"translate"),o.Mb(),o.Mb(),o.Mb(),o.sc(25,c,9,7,"ion-row",13),o.Nb(26,"ion-row",14),o.Nb(27,"ion-col",2),o.Nb(28,"ion-text",15),o.Nb(29,"p",16),o.sc(30,u,5,3,"ng-container",17),o.sc(31,p,1,0,"ion-skeleton-text",18),o.Mb(),o.Mb(),o.Mb(),o.Mb(),o.Mb()),2&t&&(o.dc("formGroup",e.form),o.yb(6),o.xc("",o.Zb(7,10,"transaction-prepare.fee.label")," (",o.Zb(8,12,e.wallet.protocol.feeSymbol),")"),o.yb(3),o.zb("disabled",e.state.disableAdvancedMode),o.yb(4),o.zb("disabled",e.state.forceMigration||e.state.disableFeeSlider),o.yb(6),o.vc(o.Zb(20,14,"transaction-prepare.fee.slow_label")),o.yb(4),o.vc(o.Zb(24,16,"transaction-prepare.fee.fast_label")),o.yb(2),o.dc("ngIf",e.state.isAdvancedMode.value),o.yb(5),o.dc("ngIf",!e.state.estimatingFeeDefaults),o.yb(1),o.dc("ngIf",e.state.estimatingFeeDefaults))},directives:[a.C,a.n,a.g,i.fb,i.s,i.G,i.tb,i.M,i.xb,i.b,a.m,a.f,i.Y,i.Mb,i.B,r.t,i.F,i.Nb,i.lb],pipes:[s.d,r.G,r.g],styles:[".fee-amount__help[_ngcontent-%COMP%]{padding-top:12px}.fee--amount__label[_ngcontent-%COMP%]{padding-top:8px}.fee--amount__label[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{padding:0!important}.fee--amount__label[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px}.input--placeholder[_ngcontent-%COMP%]{position:relative;right:0;top:10px}"]}),t}()}}]);