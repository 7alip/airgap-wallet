(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"+hnQ":function(t,o,e){"use strict";e.r(o),e.d(o,"AccountAddPageModule",(function(){return w}));var r=e("ofXK"),n=e("3Pt+"),c=e("tyNb"),i=e("TEn/"),u=e("sYmb"),a=e("j1ZV"),s=e("mrSG"),l=e("IVSH"),b=e("1T0C"),d=e("57MG"),f=e("1y+R"),p=e("z26V"),h=e("hPkG"),m=e("X9E/"),y=e("fXoL"),g=e("138U"),S=e("Bx04");function P(t,o){1&t&&(y.Nb(0,"ion-text",12),y.Nb(1,"p",13),y.uc(2),y.Yb(3,"translate"),y.Mb(),y.Mb()),2&t&&(y.yb(2),y.wc(" ",y.Zb(3,1,"account-add.featured")," "))}function A(t,o){if(1&t){var e=y.Ob();y.Nb(0,"currency-item",14),y.Vb("click",(function(){y.lc(e);var t=o.$implicit;return y.Xb().addAccount(t)})),y.Mb()}2&t&&y.dc("protocol",o.$implicit)}function N(t,o){if(1&t){var e=y.Ob();y.Nb(0,"currency-item",14),y.Vb("click",(function(){y.lc(e);var t=o.$implicit;return y.Xb().addSubAccount(t)})),y.Mb()}2&t&&y.dc("protocol",o.$implicit)}function T(t,o){1&t&&(y.Nb(0,"ion-text",12),y.Nb(1,"p",13),y.uc(2),y.Yb(3,"translate"),y.Mb(),y.Mb()),2&t&&(y.yb(2),y.wc(" ",y.Zb(3,1,"account-add.others")," "))}function O(t,o){if(1&t){var e=y.Ob();y.Nb(0,"currency-item",14),y.Vb("click",(function(){y.lc(e);var t=o.$implicit;return y.Xb().addSubAccount(t)})),y.Mb()}2&t&&y.dc("protocol",o.$implicit)}var v=function(){function t(t,o,e,r,n,c){this.platform=t,this.accountProvider=o,this.protocolService=e,this.router=r,this.ledgerService=n,this.dataService=c,this.searchTerm="",this.supportedAccountProtocols=[],this.featuredSubAccountProtocols=[],this.otherSubAccountProtocols=[],this.filteredAccountProtocols=[],this.filteredFeaturedSubAccountProtocols=[],this.filteredOtherSubAccountProtocols=[],this.featuredSubProtocols=[l.SubProtocolSymbols.XTZ_KT,l.SubProtocolSymbols.XTZ_BTC,l.SubProtocolSymbols.XTZ_USD,l.SubProtocolSymbols.XTZ_STKR,l.SubProtocolSymbols.ETH_ERC20_XCHF]}return t.prototype.ionViewWillEnter=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,o,e,r,n,c=this;return Object(s.e)(this,(function(i){switch(i.label){case 0:return t=this,[4,this.protocolService.getActiveProtocols()];case 1:return t.supportedAccountProtocols=i.sent().filter((function(t){return t.options.network.type===b.NetworkType.MAINNET})),r=(e=Array.prototype.concat).apply,n=[[]],[4,Promise.all(Object.values(l.MainProtocolSymbols).map((function(t){return c.protocolService.getSubProtocols(t)})))];case 2:return o=r.apply(e,n.concat([i.sent()])),this.featuredSubAccountProtocols=o.filter((function(t){return c.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT})),this.otherSubAccountProtocols=o.filter((function(t){return!c.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT})),this.filterProtocols(),[2]}}))}))},t.prototype.searchTermChanged=function(){this.filterProtocols()},t.prototype.filterProtocols=function(){var t=this.searchTerm.toLowerCase();this.filteredAccountProtocols=this.supportedAccountProtocols.filter((function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)})),this.filteredFeaturedSubAccountProtocols=this.featuredSubAccountProtocols.filter((function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)})),this.filteredOtherSubAccountProtocols=this.otherSubAccountProtocols.filter((function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)}))},t.prototype.addAccount=function(t){this.ledgerService.isProtocolSupported(t)&&this.platform.is("desktop")?this.showImportInteractionSelection(t):this.importFromVault(t)},t.prototype.addSubAccount=function(t){var o=t.identifier.split("-")[0];this.accountProvider.getWalletList().filter((function(e){return e.protocol.identifier===o&&e.protocol.options.network.identifier===t.options.network.identifier})).length>0?this.router.navigateByUrl("/sub-account-import/"+f.b.PROTOCOL+"/"+t.identifier+"/"+t.options.network.identifier).catch((function(t){return console.error(t)})):this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.showImportInteractionSelection=function(t){var o=this;this.dataService.setData(f.b.INTERACTION,{callback:function(e){switch(e){case m.a.VAULT:o.importFromVault(t);break;case m.a.LEDGER:o.importFromLedger(t);break;default:console.log("Unkonw import interaction type selected.")}}}),this.router.navigateByUrl("/account-import-interaction-selection/"+f.b.INTERACTION,{skipLocationChange:!0}).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.importFromLedger=function(t){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.e)(this,(function(o){return this.router.navigateByUrl("/account-import-ledger-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION)),[2]}))}))},t.prototype.importFromVault=function(t){this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.navigateToScan=function(){this.router.navigateByUrl("/tabs/scan").catch(Object(h.b)(h.a.NAVIGATION))},t.\u0275fac=function(o){return new(o||t)(y.Ib(i.Ib),y.Ib(d.a),y.Ib(g.y),y.Ib(c.g),y.Ib(p.a),y.Ib(f.a))},t.\u0275cmp=y.Cb({type:t,selectors:[["page-account-add"]],decls:21,vars:9,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["mode","md",3,"ngModel","ngModelChange","ionChange"],[1,"ion-padding"],["lines","none"],["color","primary",4,"ngIf"],[3,"protocol","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-more-coins-button","color","secondary",3,"click"],["name","barcode-outline"],["color","primary"],[1,"font--weight__bold"],[3,"protocol","click"]],template:function(t,o){1&t&&(y.Nb(0,"ion-header",0),y.Nb(1,"ion-grid",1),y.Nb(2,"ion-toolbar"),y.Nb(3,"ion-buttons",2),y.Jb(4,"ion-back-button",3),y.Mb(),y.Nb(5,"ion-title"),y.uc(6),y.Yb(7,"translate"),y.Mb(),y.Mb(),y.Nb(8,"ion-toolbar"),y.Nb(9,"ion-searchbar",4),y.Vb("ngModelChange",(function(t){return o.searchTerm=t}))("ionChange",(function(){return o.searchTermChanged()})),y.Mb(),y.Mb(),y.Mb(),y.Mb(),y.Nb(10,"ion-content",5),y.Nb(11,"ion-grid",1),y.Nb(12,"ion-list",6),y.sc(13,P,4,3,"ion-text",7),y.sc(14,A,1,1,"currency-item",8),y.sc(15,N,1,1,"currency-item",8),y.sc(16,T,4,3,"ion-text",7),y.sc(17,O,1,1,"currency-item",8),y.Mb(),y.Mb(),y.Mb(),y.Nb(18,"ion-fab",9),y.Nb(19,"ion-fab-button",10),y.Vb("click",(function(){return o.navigateToScan()})),y.Jb(20,"ion-icon",11),y.Mb(),y.Mb()),2&t&&(y.yb(6),y.vc(y.Zb(7,7,"add-account.title")),y.yb(3),y.dc("ngModel",o.searchTerm),y.yb(4),y.dc("ngIf",o.filteredAccountProtocols.length>0||o.filteredFeaturedSubAccountProtocols.length>0),y.yb(1),y.dc("ngForOf",o.filteredAccountProtocols),y.yb(1),y.dc("ngForOf",o.filteredFeaturedSubAccountProtocols),y.yb(1),y.dc("ngIf",o.filteredOtherSubAccountProtocols.length>0),y.yb(1),y.dc("ngForOf",o.filteredOtherSubAccountProtocols))},directives:[i.A,i.z,i.yb,i.k,i.f,i.g,i.wb,i.gb,i.Nb,n.m,n.p,i.t,i.N,r.t,r.s,i.v,i.w,i.B,i.tb,S.a],pipes:[u.d],styles:[".item__image[_ngcontent-%COMP%]{width:32px;height:32px}"]}),t}(),w=function(){function t(){}return t.\u0275mod=y.Gb({type:t}),t.\u0275inj=y.Fb({factory:function(o){return new(o||t)},imports:[[i.Ab,r.c,n.h,a.a,u.c,c.k.forChild([{path:"",component:v}])]]}),t}()}}]);