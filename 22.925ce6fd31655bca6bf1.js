(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Ldsa:function(t,n,o){"use strict";o.r(n),o.d(n,"TransactionQrPageModule",(function(){return I}));var i=o("138U"),a=o("ofXK"),r=o("3Pt+"),e=o("tyNb"),c=o("TEn/"),s=o("sYmb"),b=o("j1ZV"),l=o("iTUp"),u=o("kB5k"),p=o.n(u),f=o("hPkG"),d=o("fXoL"),g=o("l5qu");function h(t,n){if(1&t&&d.Jb(0,"airgap-qr",12),2&t){var o=d.Xb();d.dc("qrdata",o.preparedDataQR)("size",320)}}function m(t,n){1&t&&(d.Nb(0,"h1"),d.uc(1),d.Yb(2,"translate"),d.Mb()),2&t&&(d.yb(1),d.wc(" ",d.Zb(2,1,"transaction-qr.qr-data-too-big_warning")," "))}var y=function(t){return{protocol:t}};function x(t,n){if(1&t&&(d.Lb(0),d.Nb(1,"ion-row",13),d.Nb(2,"ion-col",14),d.Nb(3,"h5"),d.uc(4),d.Yb(5,"async"),d.Yb(6,"amountConverter"),d.Mb(),d.Mb(),d.Nb(7,"ion-col",14),d.Nb(8,"h5"),d.uc(9),d.Mb(),d.Mb(),d.Nb(10,"ion-col",14),d.Nb(11,"h5"),d.uc(12),d.Yb(13,"async"),d.Yb(14,"feeConverter"),d.Mb(),d.Mb(),d.Nb(15,"ion-col",15),d.Nb(16,"small"),d.uc(17,"Amount"),d.Mb(),d.Mb(),d.Nb(18,"ion-col",15),d.Nb(19,"small"),d.uc(20,"Operations"),d.Mb(),d.Mb(),d.Nb(21,"ion-col",15),d.Nb(22,"small"),d.uc(23,"Fee"),d.Mb(),d.Mb(),d.Mb(),d.Kb()),2&t){var o=d.Xb();d.yb(4),d.wc(" ",d.Zb(5,3,d.ac(6,5,o.aggregatedInfo.totalAmount.toFixed(),d.hc(13,y,o.airGapTxs[0].protocolIdentifier)))," "),d.yb(5),d.vc(o.aggregatedInfo.numberOfTxs),d.yb(3),d.vc(d.Zb(13,8,d.ac(14,10,o.aggregatedInfo.totalFees.toFixed(),d.hc(15,y,o.airGapTxs[0].protocolIdentifier))))}}function N(t,n){1&t&&d.Jb(0,"airgap-from-to",17),2&t&&d.dc("transaction",n.$implicit)}function T(t,n){if(1&t&&(d.Lb(0),d.sc(1,N,1,1,"airgap-from-to",16),d.Kb()),2&t){var o=d.Xb();d.yb(1),d.dc("ngForOf",o.airGapTxs)}}function v(t,n){if(1&t&&d.Jb(0,"signed-transaction",18),2&t){var o=d.Xb();d.dc("syncProtocolString",o.preparedDataQR)}}var M=function(t){return{title:t}},w=function(){function t(t,n,o,i){var a=this;if(this.router=t,this.route=n,this.platform=o,this.deeplinkService=i,this.preparedDataQR="",this.wallet=null,this.airGapTxs=null,this.isBrowser=!1,this.qrDataTooBig=!1,this.route.snapshot.data.special){var r=this.route.snapshot.data.special;this.wallet=r.wallet,this.airGapTxs=r.airGapTxs,this.preparedDataQR=r.data,this.qrDataTooBig=this.preparedDataQR.length>2800,this.airGapTxs.length>1&&this.airGapTxs.every((function(t){return t.protocolIdentifier===a.airGapTxs[0].protocolIdentifier}))&&(this.aggregatedInfo={numberOfTxs:this.airGapTxs.length,totalAmount:this.airGapTxs.map((function(t){return new p.a(t.amount)})).filter((function(t){return!t.isNaN()})).reduce((function(t,n){return t.plus(n)}),new p.a(0)),totalFees:this.airGapTxs.reduce((function(t,n){return t.plus(n.fee)}),new p.a(0))})}this.isBrowser=!this.platform.is("hybrid")}return t.prototype.done=function(){this.router.navigateByUrl("/tabs/portfolio").catch(Object(f.b)(f.a.NAVIGATION))},t.prototype.sameDeviceSign=function(){this.deeplinkService.sameDeviceDeeplink(this.preparedDataQR)},t.\u0275fac=function(n){return new(n||t)(d.Ib(e.g),d.Ib(e.a),d.Ib(c.Ib),d.Ib(i.l))},t.\u0275cmp=d.Cb({type:t,selectors:[["page-transaction-qr"]],decls:24,vars:17,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[1,"ion-padding","ion-margin-bottom"],[3,"innerHTML"],[1,"ion-justify-content-center","ion-padding-vertical"],["id","qr",3,"qrdata","size",4,"ngIf"],[4,"ngIf"],[3,"syncProtocolString",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","done","size","default","color","primary","shape","round",3,"click"],["id","qr",3,"qrdata","size"],[1,"ion-padding-bottom","ion-text-center"],["size","4",1,"content--align__center-center"],["size","4"],["class","ion-padding-horizontal",3,"transaction",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal",3,"transaction"],[3,"syncProtocolString"]],template:function(t,n){1&t&&(d.Nb(0,"ion-header",0),d.Nb(1,"ion-grid",1),d.Nb(2,"ion-toolbar"),d.Nb(3,"ion-buttons",2),d.Jb(4,"ion-back-button",3),d.Mb(),d.Nb(5,"ion-title"),d.uc(6),d.Yb(7,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(8,"ion-content",4),d.Nb(9,"ion-grid",1),d.Nb(10,"ion-row"),d.Jb(11,"h5",5),d.Yb(12,"translate"),d.Mb(),d.Nb(13,"ion-row",6),d.sc(14,h,1,2,"airgap-qr",7),d.Nb(15,"ion-text"),d.sc(16,m,3,3,"h1",8),d.Mb(),d.Mb(),d.sc(17,x,24,17,"ng-container",8),d.sc(18,T,2,1,"ng-container",8),d.sc(19,v,1,1,"signed-transaction",9),d.Mb(),d.Nb(20,"ion-fab",10),d.Nb(21,"ion-button",11),d.Vb("click",(function(){return n.done()})),d.uc(22),d.Yb(23,"translate"),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.yb(6),d.wc(" ",d.ac(7,8,"transaction-qr.title",d.hc(15,M,n.wallet.protocol.symbol))," "),d.yb(5),d.dc("innerHTML",d.Zb(12,11,"transaction-qr.text"),d.mc),d.yb(3),d.dc("ngIf",!n.qrDataTooBig),d.yb(2),d.dc("ngIf",n.qrDataTooBig),d.yb(1),d.dc("ngIf",n.airGapTxs&&n.airGapTxs.length>1),d.yb(1),d.dc("ngIf",n.airGapTxs),d.yb(1),d.dc("ngIf",!n.airGapTxs),d.yb(3),d.wc(" ",d.Zb(23,13,"transaction-qr.done_label")," "))},directives:[c.A,c.z,c.yb,c.k,c.f,c.g,c.wb,c.t,c.fb,a.t,c.tb,c.v,c.j,i.z,c.s,a.s,i.n,g.a],pipes:[s.d,a.b,i.f,i.m],encapsulation:2}),t}(),I=function(){function t(){}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(n){return new(n||t)},imports:[[i.d,c.Ab,a.c,r.h,r.w,s.c,b.a,l.a,e.k.forChild([{path:"",component:w}])]]}),t}()},l5qu:function(t,n,o){"use strict";o.d(n,"a",(function(){return y}));var i=o("mrSG"),a=o("kB5k"),r=o.n(a),e=o("hPkG"),c=o("fXoL"),s=o("138U"),b=o("ofXK"),l=o("TEn/"),u=o("sYmb"),p=function(t){return{protocol:t,maxDigits:void 0}},f=function(t){return{protocol:t}};function d(t,n){if(1&t&&(c.Lb(0),c.Nb(1,"ion-row",1),c.Nb(2,"ion-col",2),c.Nb(3,"h5"),c.uc(4),c.Yb(5,"async"),c.Yb(6,"amountConverter"),c.Mb(),c.Mb(),c.Nb(7,"ion-col",2),c.Nb(8,"h5"),c.uc(9),c.Mb(),c.Mb(),c.Nb(10,"ion-col",2),c.Nb(11,"h5"),c.uc(12),c.Yb(13,"async"),c.Yb(14,"feeConverter"),c.Mb(),c.Mb(),c.Nb(15,"ion-col",3),c.Nb(16,"small"),c.uc(17,"Amount"),c.Mb(),c.Mb(),c.Nb(18,"ion-col",3),c.Nb(19,"small"),c.uc(20,"Operations"),c.Mb(),c.Mb(),c.Nb(21,"ion-col",3),c.Nb(22,"small"),c.uc(23,"Fee"),c.Mb(),c.Mb(),c.Mb(),c.Kb()),2&t){var o=c.Xb();c.yb(4),c.wc(" ",c.Zb(5,3,c.ac(6,5,o.aggregatedInfo.totalAmount.toFixed(),c.hc(13,p,o.airGapTxs[0].protocolIdentifier)))," "),c.yb(5),c.vc(o.aggregatedInfo.numberOfTxs),c.yb(3),c.vc(c.Zb(13,8,c.ac(14,10,o.aggregatedInfo.totalFees.toFixed(),c.hc(15,f,o.airGapTxs[0].protocolIdentifier))))}}function g(t,n){1&t&&c.Jb(0,"airgap-from-to",5),2&t&&c.dc("transaction",n.$implicit)}function h(t,n){if(1&t&&(c.Lb(0),c.sc(1,g,1,1,"airgap-from-to",4),c.Kb()),2&t){var o=c.Xb();c.yb(1),c.dc("ngForOf",o.airGapTxs)}}function m(t,n){if(1&t&&(c.Nb(0,"span"),c.Nb(1,"ion-row"),c.Nb(2,"ion-col",6),c.Jb(3,"ion-icon",7),c.Mb(),c.Nb(4,"ion-col"),c.uc(5),c.Yb(6,"translate"),c.Mb(),c.Mb(),c.Nb(7,"p",8),c.uc(8),c.Mb(),c.Mb()),2&t){var o=c.Xb();c.yb(5),c.wc(" ",c.Zb(6,2,"signed-transaction.transaction-unreadable")," "),c.yb(3),c.wc(" ",o.rawTxData.transaction," ")}}var y=function(){function t(t,n){this.serializerService=t,this.protocolService=n,this.fallbackActivated=!1}return t.prototype.ngOnChanges=function(){return Object(i.b)(this,void 0,void 0,(function(){var t,n,o,a,c,s,b=this;return Object(i.e)(this,(function(i){switch(i.label){case 0:if(!this.syncProtocolString)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,this.serializerService.deserialize(this.syncProtocolString)[0]];case 2:return t.signedTxs=i.sent(),[3,4];case 3:return n=i.sent(),this.fallbackActivated=!0,Object(e.b)(e.a.COINLIB)(n),[3,4];case 4:return this.signedTxs?this.protocols&&this.protocols[0]?(a=this.protocols[0],[3,7]):[3,5]:[3,11];case 5:return[4,this.protocolService.getProtocol(this.signedTxs[0].protocol)];case 6:a=i.sent(),i.label=7;case 7:o=a,i.label=8;case 8:return i.trys.push([8,10,,11]),c=this,[4,Promise.all(this.signedTxs.map((function(t){return o.getTransactionDetailsFromSigned(t.payload)})))];case 9:return c.airGapTxs=i.sent().reduce((function(t,n){return t.concat(n)}),[]),this.airGapTxs.length>1&&this.airGapTxs.every((function(t){return t.protocolIdentifier===b.airGapTxs[0].protocolIdentifier}))&&(this.aggregatedInfo={numberOfTxs:this.airGapTxs.length,totalAmount:this.airGapTxs.map((function(t){return new r.a(t.amount)})).filter((function(t){return!t.isNaN()})).reduce((function(t,n){return t.plus(n)}),new r.a(0)),totalFees:this.airGapTxs.reduce((function(t,n){return t.plus(n.fee)}),new r.a(0))}),this.fallbackActivated=!1,[3,11];case 10:return s=i.sent(),console.error(s),this.fallbackActivated=!0,this.rawTxData=this.signedTxs[0].payload,Object(e.b)(e.a.COINLIB)(s),[3,11];case 11:return[2]}}))}))},t.\u0275fac=function(n){return new(n||t)(c.Ib(s.D),c.Ib(s.y))},t.\u0275cmp=c.Cb({type:t,selectors:[["signed-transaction"]],inputs:{signedTxs:"signedTxs",protocols:"protocols",syncProtocolString:"syncProtocolString"},features:[c.wb],decls:4,vars:3,consts:[[4,"ngIf"],[1,"ion-padding-bottom","ion-text-center"],["size","4",1,"content--align__center-center"],["size","4"],[3,"transaction",4,"ngFor","ngForOf"],[3,"transaction"],["size","2",1,"ion-margin-top"],["color","dark","name","warning",1,"warning-icon"],["ion-text","","color","blackLight",1,"text--selectable","typography--mono"]],template:function(t,n){1&t&&(c.Nb(0,"span"),c.sc(1,d,24,17,"ng-container",0),c.sc(2,h,2,1,"ng-container",0),c.sc(3,m,9,4,"span",0),c.Mb()),2&t&&(c.yb(1),c.dc("ngIf",n.airGapTxs&&n.airGapTxs.length>1),c.yb(1),c.dc("ngIf",n.airGapTxs),c.yb(1),c.dc("ngIf",n.fallbackActivated))},directives:[b.t,l.fb,l.s,b.s,s.n,l.B],pipes:[b.b,s.f,s.m,u.d],styles:[".warning-icon[_ngcontent-%COMP%]{font-size:4rem}"]}),t}()}}]);