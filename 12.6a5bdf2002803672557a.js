(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+hnQ":function(t,o,e){"use strict";e.r(o),e.d(o,"AccountAddPageModule",function(){return C});var r=e("ofXK"),c=e("3Pt+"),n=e("tyNb"),i=e("TEn/"),u=e("sYmb"),a=e("j1ZV"),s=e("mrSG"),l=e("RKiA"),b=e("14cC"),d=e("57MG"),f=e("1y+R"),p=e("z26V"),h=e("hPkG"),m=e("X9E/"),P=e("fXoL"),g=e("138U"),A=e("Bx04");function y(t,o){1&t&&(P.Qb(0,"ion-text",12),P.Qb(1,"p",13),P.wc(2),P.bc(3,"translate"),P.Pb(),P.Pb()),2&t&&(P.Ab(2),P.yc(" ",P.cc(3,1,"account-add.featured")," "))}function S(t,o){if(1&t){var e=P.Rb();P.Qb(0,"currency-item",14),P.Yb("click",function(){P.oc(e);var t=o.$implicit;return P.ac().addAccount(t)}),P.Pb()}2&t&&P.gc("protocol",o.$implicit)}function T(t,o){if(1&t){var e=P.Rb();P.Qb(0,"currency-item",14),P.Yb("click",function(){P.oc(e);var t=o.$implicit;return P.ac().addSubAccount(t)}),P.Pb()}2&t&&P.gc("protocol",o.$implicit)}function v(t,o){1&t&&(P.Qb(0,"ion-text",12),P.Qb(1,"p",13),P.wc(2),P.bc(3,"translate"),P.Pb(),P.Pb()),2&t&&(P.Ab(2),P.yc(" ",P.cc(3,1,"account-add.others")," "))}function w(t,o){if(1&t){var e=P.Rb();P.Qb(0,"currency-item",14),P.Yb("click",function(){P.oc(e);var t=o.$implicit;return P.ac().addSubAccount(t)}),P.Pb()}2&t&&P.gc("protocol",o.$implicit)}var O=function(){function t(t,o,e,r,c,n){this.platform=t,this.accountProvider=o,this.protocolService=e,this.router=r,this.ledgerService=c,this.dataService=n,this.searchTerm="",this.supportedAccountProtocols=[],this.featuredSubAccountProtocols=[],this.otherSubAccountProtocols=[],this.filteredAccountProtocols=[],this.filteredFeaturedSubAccountProtocols=[],this.filteredOtherSubAccountProtocols=[],this.featuredSubProtocols=[l.SubProtocolSymbols.XTZ_KT,l.SubProtocolSymbols.XTZ_BTC,l.SubProtocolSymbols.XTZ_USD,l.SubProtocolSymbols.XTZ_STKR,l.SubProtocolSymbols.ETH_ERC20_XCHF]}return t.prototype.ionViewWillEnter=function(){return Object(s.b)(this,void 0,void 0,function(){var t,o,e,r,c,n=this;return Object(s.e)(this,function(i){switch(i.label){case 0:return t=this,[4,this.protocolService.getActiveProtocols()];case 1:return t.supportedAccountProtocols=i.sent().filter(function(t){return t.options.network.type===b.NetworkType.MAINNET}),r=(e=Array.prototype.concat).apply,c=[[]],[4,Promise.all(Object.values(l.MainProtocolSymbols).map(function(t){return n.protocolService.getSubProtocols(t)}))];case 2:return o=r.apply(e,c.concat([i.sent()])),this.featuredSubAccountProtocols=o.filter(function(t){return n.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT}),this.otherSubAccountProtocols=o.filter(function(t){return!n.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT}),this.filterProtocols(),[2]}})})},t.prototype.searchTermChanged=function(){this.filterProtocols()},t.prototype.filterProtocols=function(){var t=this.searchTerm.toLowerCase();this.filteredAccountProtocols=this.supportedAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)}),this.filteredFeaturedSubAccountProtocols=this.featuredSubAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)}),this.filteredOtherSubAccountProtocols=this.otherSubAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)})},t.prototype.addAccount=function(t){this.ledgerService.isProtocolSupported(t)&&this.platform.is("desktop")?this.showImportInteractionSelection(t):this.importFromVault(t)},t.prototype.addSubAccount=function(t){var o=t.identifier.split("-")[0];this.accountProvider.getWalletList().filter(function(e){return e.protocol.identifier===o&&e.protocol.options.network.identifier===t.options.network.identifier}).length>0?this.router.navigateByUrl("/sub-account-import/"+f.b.PROTOCOL+"/"+t.identifier+"/"+t.options.network.identifier).catch(function(t){return console.error(t)}):this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.showImportInteractionSelection=function(t){var o=this;this.dataService.setData(f.b.INTERACTION,{callback:function(e){switch(e){case m.a.VAULT:o.importFromVault(t);break;case m.a.LEDGER:o.importFromLedger(t);break;default:console.log("Unkonw import interaction type selected.")}}}),this.router.navigateByUrl("/account-import-interaction-selection/"+f.b.INTERACTION,{skipLocationChange:!0}).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.importFromLedger=function(t){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(o){return this.router.navigateByUrl("/account-import-ledger-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION)),[2]})})},t.prototype.importFromVault=function(t){this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.navigateToScan=function(){this.router.navigateByUrl("/tabs/scan").catch(Object(h.b)(h.a.NAVIGATION))},t.\u0275fac=function(o){return new(o||t)(P.Lb(i.pb),P.Lb(d.a),P.Lb(g.y),P.Lb(n.g),P.Lb(p.a),P.Lb(f.a))},t.\u0275cmp=P.Fb({type:t,selectors:[["page-account-add"]],decls:21,vars:9,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["mode","md",3,"ngModel","ngModelChange","ionChange"],[1,"ion-padding"],["lines","none"],["color","primary",4,"ngIf"],[3,"protocol","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-more-coins-button","color","secondary",3,"click"],["name","barcode-outline"],["color","primary"],[1,"font--weight__bold"],[3,"protocol","click"]],template:function(t,o){1&t&&(P.Qb(0,"ion-header",0),P.Qb(1,"ion-grid",1),P.Qb(2,"ion-toolbar"),P.Qb(3,"ion-buttons",2),P.Mb(4,"ion-back-button",3),P.Pb(),P.Qb(5,"ion-title"),P.wc(6),P.bc(7,"translate"),P.Pb(),P.Pb(),P.Qb(8,"ion-toolbar"),P.Qb(9,"ion-searchbar",4),P.Yb("ngModelChange",function(t){return o.searchTerm=t})("ionChange",function(){return o.searchTermChanged()}),P.Pb(),P.Pb(),P.Pb(),P.Pb(),P.Qb(10,"ion-content",5),P.Qb(11,"ion-grid",1),P.Qb(12,"ion-list",6),P.uc(13,y,4,3,"ion-text",7),P.uc(14,S,1,1,"currency-item",8),P.uc(15,T,1,1,"currency-item",8),P.uc(16,v,4,3,"ion-text",7),P.uc(17,w,1,1,"currency-item",8),P.Pb(),P.Pb(),P.Pb(),P.Qb(18,"ion-fab",9),P.Qb(19,"ion-fab-button",10),P.Yb("click",function(){return o.navigateToScan()}),P.Mb(20,"ion-icon",11),P.Pb(),P.Pb()),2&t&&(P.Ab(6),P.xc(P.cc(7,7,"add-account.title")),P.Ab(3),P.gc("ngModel",o.searchTerm),P.Ab(4),P.gc("ngIf",o.filteredAccountProtocols.length>0||o.filteredFeaturedSubAccountProtocols.length>0),P.Ab(1),P.gc("ngForOf",o.filteredAccountProtocols),P.Ab(1),P.gc("ngForOf",o.filteredFeaturedSubAccountProtocols),P.Ab(1),P.gc("ngIf",o.filteredOtherSubAccountProtocols.length>0),P.Ab(1),P.gc("ngForOf",o.filteredOtherSubAccountProtocols))},directives:[i.v,i.u,i.hb,i.j,i.f,i.g,i.fb,i.S,i.ub,c.h,c.j,i.q,i.F,r.n,r.m,i.r,i.s,i.w,i.db,A.a],pipes:[u.c],styles:[".item__image[_ngcontent-%COMP%]{width:32px;height:32px}"]}),t}(),C=function(){function t(){}return t.\u0275mod=P.Jb({type:t}),t.\u0275inj=P.Ib({factory:function(o){return new(o||t)},imports:[[i.ib,r.c,c.e,a.a,u.b,n.j.forChild([{path:"",component:O}])]]}),t}()}}]);