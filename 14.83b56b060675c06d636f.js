(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"1nlr":function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n("NfF3"),s=function(t){function e(e,n){var o=t.call(this,e)||this;return o.actionFactory=n,o.addValidTransition(c.ActionState.EXECUTING,c.ActionState.EXECUTING),o.addValidTransition(c.ActionState.COMPLETED,c.ActionState.EXECUTING),o.addValidTransition(c.ActionState.CANCELLED,c.ActionState.EXECUTING),o}return i(e,t),e.prototype.perform=function(){return r(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return void 0!==this.innerAction&&this.innerAction.getState()===c.ActionState.EXECUTING&&this.innerAction.cancel(),this.innerAction=this.actionFactory(),[4,this.innerAction.start()];case 1:return t.sent(),[2,this.innerAction.result]}}))}))},e.prototype.cancel=function(){void 0!==this.innerAction&&this.innerAction.getState()===c.ActionState.EXECUTING&&this.innerAction.cancel(),t.prototype.cancel.call(this)},e}(c.Action);e.RepeatableAction=s},"JX7+":function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e){var n=t.call(this)||this;return n.identifier="simple-action",n.promise=e,n}return i(e,t),e.prototype.perform=function(){return r(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.promise()]}))}))},e}(n("NfF3").Action);e.SimpleAction=c},JkVq:function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n("q5ax"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.identifier="tezos-import-account-action",e}return i(e,t),e.prototype.perform=function(){return r(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,(new c.TezosKtProtocol).getAddressesFromPublicKey(this.context.publicKey)];case 1:return[2,t.sent()]}}))}))},e}(n("NfF3").Action);e.ImportAccountAction=s},"e+VP":function(t,e,n){"use strict";n.r(e),n.d(e,"AccountTransactionListPageModule",(function(){return wt}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),a=n("TEn/"),c=n("sYmb"),s=n("QUrN"),l=n("j1ZV"),u=n("iTUp"),h=n("mrSG"),d=n("dW0/"),b=n("IVSH"),f=n("kB5k"),p=n("Pb0q"),g=n("0pct"),v=n("JkVq"),y=n("fYay"),w=n("JX7+"),m=n("xA0e"),x=n("Jrcw"),T=n("1y+R"),A=n("hPkG"),O=n("NfF3"),P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.identifier="add-token-action",e.info={name:"account-transaction-list.add-tokens_label",icon:"add-outline"},e}return Object(h.d)(e,t),e.prototype.perform=function(){return Object(h.b)(this,void 0,void 0,(function(){var t=this;return Object(h.e)(this,(function(e){return this.context.subAccounts.filter((function(t){return t.selected})).map((function(t){return t.wallet})).forEach((function(e){return Object(h.b)(t,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return this.context.accountProvider.addWallet(e).catch(Object(A.b)(A.a.WALLET_PROVIDER)),[2]}))}))})),[2]}))}))},e}(O.Action),I=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(h.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},set:function(t){},enumerable:!1,configurable:!0}),e}(n("1nlr").RepeatableAction),_=n("rtTb"),C=n("iLEx"),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(h.d)(e,t),e.prototype.perform=function(){var t=this;return new Promise((function(e){return Object(h.b)(t,void 0,void 0,(function(){var t,n,o=this;return Object(h.e)(this,(function(i){switch(i.label){case 0:return[4,this.context.protocolService.getProtocol(b.MainProtocolSymbols.XTZ)];case 1:return[4,i.sent().getAddressFromPublicKey(this.context.wallet.publicKey)];case 2:return t=i.sent(),n=new C.a,this.context.alertCtrl.create({header:this.context.translateService.instant("account-transaction-list.migrate-alert.header"),message:'Do you want to transfer <span class="style__strong color__primary">'+this.context.wallet.currentBalance.shiftedBy(-1*this.context.wallet.protocol.decimals)+' XTZ</span> </strong> from <span class="style__strong color__primary"> '+n.transform(this.context.wallet.receivingPublicAddress)+' </span> to <span class="style__strong color__primary"> '+n.transform(t)+"</span>?",buttons:[{text:this.context.translateService.instant("account-transaction-list.migrate-alert.cancel"),role:"cancel",handler:function(){e()}},{text:this.context.translateService.instant("account-transaction-list.migrate-alert.confirm"),handler:function(){var n={wallet:o.context.wallet,address:t,forceMigration:!0};o.context.dataService.setData(T.b.DETAIL,n),o.context.router.navigateByUrl("/transaction-prepare/"+T.b.DETAIL+"/"+n.wallet.publicKey+"/"+n.wallet.protocol.identifier+"/"+n.wallet.addressIndex+"/"+n.address+"/0/"+(n.forceMigration?"forced":"not_forced")).catch(Object(A.b)(A.a.NAVIGATION)),e()}}]}).then((function(t){t.present().catch(Object(A.b)(A.a.NAVIGATION))})).catch(Object(A.b)(A.a.IONIC_ALERT)),[2]}}))}))}))},e}(O.Action),N=function(){function t(t){this.callerContext=t}return t.prototype.getActions=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n=this;return Object(h.e)(this,(function(o){return(t=new Map).set(b.MainProtocolSymbols.XTZ,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getTezosActions()]}))}))})),t.set(b.SubProtocolSymbols.XTZ_KT,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getTezosKTActions()]}))}))})),t.set(b.MainProtocolSymbols.ETH,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getEthereumActions()]}))}))})),t.set(b.MainProtocolSymbols.COSMOS,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getCosmosActions()]}))}))})),t.set(b.MainProtocolSymbols.POLKADOT,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getPolkadotActions()]}))}))})),t.set(b.MainProtocolSymbols.KUSAMA,(function(){return Object(h.b)(n,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return[2,this.getKusamaActions()]}))}))})),[2,(e=t.get(this.callerContext.protocolIdentifier))?e():[]]}))}))},t.prototype.getTezosActions=function(){var t=this;return[this.createDelegateButtonAction(),new I({name:"account-transaction-list.add-tokens_label",icon:"add",identifier:"add-tokens"},(function(){var e=new w.SimpleAction((function(){return new Promise((function(e){return Object(h.b)(t,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(n){return this.callerContext.dataService.setData(T.b.DETAIL,t={subProtocolType:x.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+T.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(A.b)(A.a.NAVIGATION)),[2]}))}))}))})),n=new y.LinkedAction(e,P);return n.onComplete=function(){return Object(h.b)(t,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]}))}))},n}))]},t.prototype.getImportAccountsAction=function(){var t=this;return new I({name:"account-transaction-list.import-accounts_label",icon:"add-outline",identifier:"import-accounts"},(function(){var e=new v.ImportAccountAction({publicKey:t.callerContext.wallet.publicKey});return e.onComplete=function(e){return Object(h.b)(t,void 0,void 0,(function(){var t,n,o,i,r,a;return Object(h.e)(this,(function(c){switch(c.label){case 0:return 0!==e.length?[3,1]:(this.callerContext.showToast("No accounts to import."),[3,9]);case 1:c.trys.push([1,6,7,8]),t=Object(h.h)(e.entries()),n=t.next(),c.label=2;case 2:return n.done?[3,5]:(o=Object(h.f)(n.value,1),[4,this.addKtAddress(this.callerContext.wallet,o[0],e)]);case 3:c.sent(),c.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=c.sent(),r={error:i},[3,8];case 7:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(r)throw r.error}return[7];case 8:this.callerContext.router.navigateByUrl("/").catch(Object(A.b)(A.a.NAVIGATION)),this.callerContext.showToast("Accounts imported"),c.label=9;case 9:return[2]}}))}))},e}))},t.prototype.getTezosKTActions=function(){var t=this;return[new I({name:"account-transaction-list.migrate_label",icon:"return-right",identifier:"migrate-action"},(function(){return new j({wallet:t.callerContext.wallet,alertCtrl:t.callerContext.alertCtrl,translateService:t.callerContext.translateService,protocolService:t.callerContext.protocolService,dataService:t.callerContext.dataService,router:t.callerContext.router})}))]},t.prototype.getCosmosActions=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e;return Object(h.e)(this,(function(n){switch(n.label){case 0:return t=this.createDelegateButtonAction(),[4,this.createDelegatorButtonActions({type:m.CosmosDelegationActionType.WITHDRAW_ALL_REWARDS,name:"account-transaction-list.claim_rewards_label",icon:"logo-usd",identifier:"claim-rewards"})];case 1:return e=n.sent(),[2,Object(h.g)([t],e)]}}))}))},t.prototype.getEthereumActions=function(){var t=this;return[new I({name:"account-transaction-list.add-tokens_label",icon:"add-outline",identifier:"add-tokens"},(function(){var e=new w.SimpleAction((function(){return new Promise((function(e){return Object(h.b)(t,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(n){return this.callerContext.dataService.setData(T.b.DETAIL,t={subProtocolType:x.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+T.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(A.b)(A.a.NAVIGATION)),[2]}))}))}))})),n=new y.LinkedAction(e,P);return n.onComplete=function(){return Object(h.b)(t,void 0,void 0,(function(){return Object(h.e)(this,(function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]}))}))},n}))]},t.prototype.getPolkadotActions=function(){return[this.createDelegateButtonAction()]},t.prototype.getKusamaActions=function(){return[this.createDelegateButtonAction()]},t.prototype.addKtAddress=function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var o,i;return Object(h.e)(this,(function(r){switch(r.label){case 0:return(o=this.callerContext.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(t.publicKey,b.SubProtocolSymbols.XTZ_KT,e))?[2,o]:[4,this.callerContext.protocolService.getProtocol(b.SubProtocolSymbols.XTZ_KT)];case 1:return i=r.sent(),(o=new b.AirGapMarketWallet(i,t.publicKey,t.isExtendedPublicKey,t.derivationPath,t.priceService,e)).addresses=n,[4,o.synchronize().catch(Object(A.b)(A.a.COINLIB))];case 2:return r.sent(),[4,this.callerContext.accountProvider.addWallet(o).catch(Object(A.b)(A.a.WALLET_PROVIDER))];case 3:return r.sent(),[2,o]}}))}))},t.prototype.createDelegateButtonAction=function(){var t=this;return new I({name:"account-transaction-list.delegate_label",icon:"logo-usd",identifier:"delegate-action"},(function(){return new w.SimpleAction((function(){return new Promise((function(e){t.callerContext.dataService.setData(T.b.DETAIL,{wallet:t.callerContext.wallet}),t.callerContext.router.navigateByUrl("/delegation-detail/"+T.b.DETAIL+"/"+t.callerContext.wallet.publicKey+"/"+t.callerContext.wallet.protocol.identifier+"/"+t.callerContext.wallet.addressIndex).catch(Object(A.b)(A.a.NAVIGATION)),e()}))}))}))},t.prototype.createDelegatorButtonActions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(h.b)(this,void 0,void 0,(function(){var e,n,o,i=this;return Object(h.e)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.callerContext.operationsProvider.getDelegatorDetails(this.callerContext.wallet)];case 1:return(e=r.sent()).availableActions?(n=e.availableActions.map((function(t){return t.type})),[2,t.filter((function(t){return n.includes(t.type)})).map((function(t){return new I(t,(function(){return new _.a({wallet:i.callerContext.wallet,type:t.type,data:t.data,toastController:i.callerContext.toastController,loadingController:i.callerContext.loadingController,operationsProvider:i.callerContext.operationsProvider,dataService:i.callerContext.dataService,router:i.callerContext.router})}))}))]):[3,3];case 2:return o=r.sent(),console.warn(o),[3,3];case 3:return[2,[]]}}))}))},t}(),S=n("57MG"),k=n("nxqh"),E=n("GsAe"),D=n("AFs5"),M=n("VE8E"),L=n("PqYM"),K=n("quSY"),B=n("Xl7a"),R=n("jysE"),G=n("fXoL"),V=n("tk/3"),X=n("138U");function z(t,e){if(1&t&&(G.Nb(0,"ion-button",32),G.Vb("click",(function(){return e.$implicit.start()})),G.Jb(1,"ion-icon",33),G.uc(2),G.Yb(3,"translate"),G.Mb()),2&t){var n=e.$implicit;G.yb(1),G.dc("name",n.context.icon),G.yb(1),G.wc(" ",G.Zb(3,2,n.context.name)," ")}}function F(t,e){if(1&t){var n=G.Ob();G.Nb(0,"tezos-delegation-card",34),G.Vb("onDelegatedClick",(function(){return G.lc(n),G.Xb().openDelegationDetails()}))("onUndelegatedClick",(function(){return G.lc(n),G.Xb().openDelegationDetails()})),G.Mb()}if(2&t){var o=G.Xb();G.dc("wallet",o.wallet)("isDelegated",o.isKtDelegated)("delegateAmount",o.wallet.currentBalance)}}function J(t,e){if(1&t){var n=G.Ob();G.Nb(0,"card-actionable",35),G.Vb("click",(function(){return G.lc(n),G.Xb().openPreparePage()})),G.Yb(1,"translate"),G.Yb(2,"translate"),G.Mb()}2&t&&G.dc("imageLeft",!1)("imageName","babylon-migration.svg")("text",G.Zb(1,4,"account-transaction-list.migrate-babylon_card.text"))("heading",G.Zb(2,6,"account-transaction-list.migrate-babylon_card.heading"))}function U(t,e){if(1&t&&G.Jb(0,"widget-account-extended-details",36),2&t){var n=G.Xb();G.dc("widget",n.accountExtendedDetails)}}function Z(t,e){1&t&&G.Jb(0,"ion-spinner",37)}function q(t,e){if(1&t){var n=G.Ob();G.Nb(0,"ion-row"),G.Nb(1,"ion-col",38),G.Nb(2,"ion-text",39),G.Nb(3,"p"),G.uc(4),G.Yb(5,"translate"),G.Mb(),G.Mb(),G.Nb(6,"ion-button",40),G.Vb("click",(function(){return G.lc(n),G.Xb().openBlockexplorer()})),G.Jb(7,"ion-icon",41),G.uc(8),G.Yb(9,"translate"),G.Mb(),G.Mb(),G.Mb()}2&t&&(G.yb(4),G.vc(G.Zb(5,2,"account-transaction-list.tx_not_loading")),G.yb(4),G.wc(" ",G.Zb(9,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}var Y=function(){function t(t,e,n,o,i,r,a,c,s,l,u,d,f,p,g,v,y,w){var m=this;this.alertCtrl=t,this.navController=e,this.router=n,this.translateService=o,this.operationsProvider=i,this.popoverCtrl=r,this.toastController=a,this.loadingController=c,this.accountProvider=s,this.http=l,this.dataService=u,this.protocolService=d,this.route=f,this.storageProvider=p,this.pushBackendProvider=g,this.exchangeProvider=v,this.extensionsService=y,this.browserService=w,this.mainProtocolSymbols=b.MainProtocolSymbols,this.subProtocolSymbols=b.SubProtocolSymbols,this.timer$=Object(L.a)(0,3e3),this.subscription=new K.a,this.isRefreshing=!1,this.initialTransactionsLoaded=!1,this.infiniteEnabled=!1,this.showLinkToBlockExplorer=!1,this.txOffset=0,this.transactions=[],this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.pendingTransactions=[],this.formattedExchangeTransactions=[],this.isKtDelegated=!1,this.lottieConfig={path:"./assets/animations/loading.json"},this.TRANSACTION_LIMIT=10,this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.wallet=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),this.updateExtendedDetails(),this.walletChanged=s.walletChangedObservable.subscribe((function(){m.loadInitialTransactions(!0),m.updateExtendedDetails()})),this.subscription=this.timer$.subscribe((function(){return Object(h.b)(m,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(e){switch(e.label){case 0:return this.formattedExchangeTransactions.length>0?(t=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])]):[3,2];case 1:t.formattedExchangeTransactions=e.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,e.label=2;case 2:return[2]}}))}))})),this.protocolIdentifier=this.wallet.protocol.identifier,this.protocolIdentifier===b.SubProtocolSymbols.XTZ_KT&&this.isDelegated().catch(Object(A.b)(A.a.COINLIB)),this.protocolIdentifier===b.MainProtocolSymbols.XTZ&&(this.getKtAddresses().catch(Object(A.b)(A.a.COINLIB)),this.isDelegated().catch(Object(A.b)(A.a.COINLIB))),this.actionGroup=new N(this),this.actionGroup.getActions().then((function(t){m.actions=t}))}return t.prototype.showNoTransactionScreen=function(){return 0===this.transactions.length},t.prototype.ionViewWillEnter=function(){this.doRefresh()},t.prototype.openPreparePage=function(){this.protocolIdentifier!==b.SubProtocolSymbols.XTZ_KT?this.router.navigateByUrl("/transaction-prepare/"+T.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex+"/"+(""!==(this.protocolIdentifier===b.SubProtocolSymbols.XTZ_BTC?{wallet:this.wallet,address:"",disableFees:!0}:{wallet:this.wallet,address:""}).address)+"/0/not_forced").catch(Object(A.b)(A.a.NAVIGATION)):new j({wallet:this.wallet,alertCtrl:this.alertCtrl,translateService:this.translateService,protocolService:this.protocolService,dataService:this.dataService,router:this.router}).start()},t.prototype.openReceivePage=function(){this.router.navigateByUrl("/account-address/"+T.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex).catch(Object(A.b)(A.a.NAVIGATION))},t.prototype.openTransactionDetailPage=function(t){this.dataService.setData(T.b.DETAIL,t),this.router.navigateByUrl("/transaction-detail/"+T.b.DETAIL+"/"+t.hash).catch(Object(A.b)(A.a.NAVIGATION))},t.prototype.openBlockexplorer=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),this.browserService.openUrl(t),[2]}}))}))},t.prototype.doRefresh=function(t){void 0===t&&(t=null),Object(M.b)(this.wallet.protocol)&&this.operationsProvider.refreshAllDelegationStatuses([this.wallet]),this.isRefreshing=!0,t&&t.target.complete(),this.loadInitialTransactions().catch(Object(A.b)())},t.prototype.doInfinite=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.e)(this,(function(n){switch(n.label){case 0:return this.infiniteEnabled?[4,this.getTransactions(this.transactionResult?this.transactionResult.cursor:void 0,this.TRANSACTION_LIMIT)]:[2,t.target.complete()];case 1:return e=n.sent(),this.transactions=this.mergeTransactions(this.transactions,e),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 2:return n.sent(),e.length<this.TRANSACTION_LIMIT&&(this.infiniteEnabled=!1),t.target.complete(),[2]}}))}))},t.prototype.loadInitialTransactions=function(t){return void 0===t&&(t=!1),Object(h.b)(this,void 0,void 0,(function(){var e,n,o,i,r,a,c,s=this;return Object(h.e)(this,(function(l){switch(l.label){case 0:return 0!==this.transactions.length?[3,2]:(e=this,[4,this.storageProvider.getCache(this.accountProvider.getAccountIdentifier(this.wallet))]);case 1:e.transactions=l.sent()||[],l.label=2;case 2:return n=this.getTransactions(),[4,Object(g.b)(1e4,n).catch((function(t){return console.error(t),s.showLinkToBlockExplorer=!0,[]}))];case 3:o=l.sent(),this.transactions=this.mergeTransactions(t?[]:this.transactions,o),this.isRefreshing=!1,this.initialTransactionsLoaded=!0,i=this.wallet.receivingPublicAddress,l.label=4;case 4:return l.trys.push([4,6,,7]),r=this,[4,this.pushBackendProvider.getPendingTxs(i,this.protocolIdentifier)];case 5:return r.pendingTransactions=l.sent(),[3,7];case 6:return l.sent(),[3,7];case 7:return a=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])];case 8:return a.formattedExchangeTransactions=l.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,c=this.transactions.map((function(t){return t.hash})),this.pendingTransactions=this.pendingTransactions.filter((function(t){return-1===c.indexOf(t.hash)})),this.pendingTransactions.length>0?(this.pendingTransactions=this.pendingTransactions.map((function(t){return t.fee=new f.BigNumber(t.fee).toString(10),t.amount=new f.BigNumber(t.amount).toString(10),t})),this.hasPendingTransactions=!0):this.hasPendingTransactions=!1,t||this.accountProvider.triggerWalletChanged(),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 9:return l.sent(),this.txOffset=this.transactions.length,this.infiniteEnabled=!0,[2]}}))}))},t.prototype.getTransactions=function(t,e){return void 0===e&&(e=10),Object(h.b)(this,void 0,void 0,(function(){var n,o;return Object(h.e)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.transactionResult?this.wallet.fetchTransactions(e,t):this.wallet.fetchTransactions(e),this.wallet.synchronize().catch((function(t){console.error(t)}))])];case 1:return n=h.f.apply(void 0,[i.sent(),1]),this.transactionResult=o=n[0],[2,o.transactions]}}))}))},t.prototype.mergeTransactions=function(t,e){var n=this;if(!t)return e;var o=new Map(t.map((function(t){return[n.mergeKeyForTransaction(t),t]}))),i=o.size;return e.forEach((function(t){var e=n.mergeKeyForTransaction(t);o.set(e,t)})),i===o.size?t:Array.from(o.values()).sort((function(t,e){return void 0!==t.timestamp&&void 0!==e.timestamp?e.timestamp-t.timestamp:new f.BigNumber(e.blockHeight).minus(new f.BigNumber(t.blockHeight)).toNumber()}))},t.prototype.mergeKeyForTransaction=function(t){return""+(t.hash?t.hash:"")+t.from.reduce((function(t,e){return t+e}),"")+t.to.reduce((function(t,e){return t+e}),"")+t.amount+t.fee+(t.timestamp?t.timestamp:"")},t.prototype.presentEditPopover=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e=this;return Object(h.e)(this,(function(n){switch(n.label){case 0:return[4,this.popoverCtrl.create({component:p.a,componentProps:{wallet:this.wallet,importAccountAction:this.wallet.protocol.identifier===b.MainProtocolSymbols.XTZ?this.actionGroup.getImportAccountsAction():void 0,onDelete:function(){e.navController.pop()}},event:t,translucent:!0})];case 1:return[2,n.sent().present().catch(Object(A.b)(A.a.NAVIGATION))]}}))}))},t.prototype.isDelegated=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(e){switch(e.label){case 0:return[4,this.operationsProvider.checkDelegated(this.wallet.protocol,this.wallet.receivingPublicAddress)];case 1:return t=e.sent(),this.isKtDelegated=t,[2]}}))}))},t.prototype.getKtAddresses=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.e)(this,(function(t){switch(t.label){case 0:return[4,(new b.TezosKtProtocol).getAddressesFromPublicKey(this.wallet.publicKey)];case 1:return[2,t.sent()]}}))}))},t.prototype.openDelegationDetails=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(e){switch(e.label){case 0:return(t=this.actions.find((function(t){return"delegate-action"===t.identifier})))?[4,t.start()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.showToast=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.e)(this,(function(e){switch(e.label){case 0:return[4,this.toastController.create({duration:3e3,message:t,buttons:[{text:"Ok",role:"cancel"}],position:"bottom"})];case 1:return e.sent().present().catch(Object(A.b)(A.a.NAVIGATION)),[2]}}))}))},t.prototype.updateExtendedDetails=function(){var t=this;Object(M.b)(this.wallet.protocol)&&void 0!==this.wallet.receivingPublicAddress&&this.extensionsService.loadDelegationExtensions().then((function(){return Object(h.b)(t,void 0,void 0,(function(){var t;return Object(h.e)(this,(function(e){switch(e.label){case 0:return t=this,[4,this.operationsProvider.getAccountExtendedDetails(this.wallet)];case 1:return t.accountExtendedDetails=e.sent(),[2]}}))}))}))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.walletChanged.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(G.Ib(a.a),G.Ib(a.Eb),G.Ib(r.g),G.Ib(c.e),G.Ib(k.a),G.Ib(a.Jb),G.Ib(a.Ob),G.Ib(a.Cb),G.Ib(S.a),G.Ib(V.a),G.Ib(T.a),G.Ib(X.y),G.Ib(r.a),G.Ib(D.b),G.Ib(E.a),G.Ib(d.a),G.Ib(B.a),G.Ib(R.a))},t.\u0275cmp=G.Cb({type:t,selectors:[["page-account-transaction-list"]],decls:49,vars:39,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/portfolio"],["slot","end"],["id","edit-popover","color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[2,"display","block"],[3,"wallet","maxDigits"],[1,"ion-padding-top","ion-padding-horizontal","action--container"],["color","secondary","shape","round","size","small","fill","outline",3,"click",4,"ngFor","ngForOf"],["no-bounce","","has-bouncing","false","forceOverscroll","false"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],[3,"widget",4,"ngIf"],[3,"transactionType","hasPendingTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"transactionType","hasExchangeTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[1,"ion-align-items-center","ion-padding-top"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],["size","1",1,"justify--content__end","ion-no-padding"],["color","primary","name","dots",4,"ngIf"],["size","1"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],[3,"transactionType","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"ionInfinite"],["vertical","bottom","slot","fixed"],["id","receive","expand","full","size","default","color","primary","shape","round",3,"click"],["slot","start","src","./assets/custom-ion-icons/md-call_received.svg"],["id","send","expand","full","size","default","color","primary","shape","round",3,"disabled","click"],["slot","start","name","send-outline"],["color","secondary","shape","round","size","small","fill","outline",3,"click"],["slot","start",3,"name"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick"],["tappable","",3,"imageLeft","imageName","text","heading","click"],[3,"widget"],["color","primary","name","dots"],[1,"ion-padding"],["color","secondary",1,"font--weight__bold"],["fill","outline","color","secondary","shape","round",1,"ion-margin-top",3,"click"],["name","open","slot","start"]],template:function(t,e){1&t&&(G.Nb(0,"ion-header",0),G.Nb(1,"ion-grid",1),G.Nb(2,"ion-toolbar"),G.Nb(3,"ion-buttons",2),G.Jb(4,"ion-back-button",3),G.Mb(),G.Nb(5,"ion-title"),G.uc(6),G.Yb(7,"translate"),G.Mb(),G.Nb(8,"ion-buttons",4),G.Nb(9,"ion-button",5),G.Vb("click",(function(t){return e.presentEditPopover(t)})),G.Jb(10,"ion-icon",6),G.Mb(),G.Mb(),G.Mb(),G.Nb(11,"ion-row",7),G.Jb(12,"portfolio-item",8),G.Mb(),G.Nb(13,"ion-row",9),G.sc(14,z,4,4,"ion-button",10),G.Mb(),G.Mb(),G.Mb(),G.Nb(15,"ion-content",11),G.Nb(16,"ion-grid",1),G.sc(17,F,1,3,"tezos-delegation-card",12),G.sc(18,J,3,8,"card-actionable",13),G.sc(19,U,1,1,"widget-account-extended-details",14),G.Jb(20,"transaction-list",15),G.Jb(21,"transaction-list",16),G.Nb(22,"ion-row",17),G.Nb(23,"ion-col",18),G.Nb(24,"ion-text",19),G.Nb(25,"p"),G.uc(26),G.Yb(27,"translate"),G.Mb(),G.Mb(),G.Mb(),G.Nb(28,"ion-col",20),G.sc(29,Z,1,0,"ion-spinner",21),G.Mb(),G.Jb(30,"ion-col",22),G.Mb(),G.sc(31,q,10,6,"ion-row",23),G.Nb(32,"ion-refresher",24),G.Vb("ionRefresh",(function(t){return e.doRefresh(t)})),G.Jb(33,"ion-refresher-content"),G.Mb(),G.Jb(34,"transaction-list",25),G.Nb(35,"ion-infinite-scroll",26),G.Vb("ionInfinite",(function(t){return e.doInfinite(t)})),G.Jb(36,"ion-infinite-scroll-content"),G.Mb(),G.Mb(),G.Nb(37,"ion-fab",27),G.Nb(38,"ion-row"),G.Nb(39,"ion-col"),G.Nb(40,"ion-button",28),G.Vb("click",(function(){return e.openReceivePage()})),G.Jb(41,"ion-icon",29),G.uc(42),G.Yb(43,"translate"),G.Mb(),G.Mb(),G.Nb(44,"ion-col"),G.Nb(45,"ion-button",30),G.Vb("click",(function(){return e.openPreparePage()})),G.Jb(46,"ion-icon",31),G.uc(47),G.Yb(48,"translate"),G.Mb(),G.Mb(),G.Mb(),G.Mb(),G.Mb()),2&t&&(G.yb(6),G.xc("",null==e.wallet?null:e.wallet.protocol.symbol," ",G.Zb(7,31,"account-transaction-list.title"),""),G.yb(6),G.dc("wallet",e.wallet)("maxDigits",0),G.yb(2),G.dc("ngForOf",e.actions),G.yb(3),G.dc("ngIf",e.wallet.protocol.identifier===e.mainProtocolSymbols.XTZ&&e.wallet.currentBalance),G.yb(1),G.dc("ngIf",e.wallet.protocol.identifier===e.subProtocolSymbols.XTZ_KT),G.yb(1),G.dc("ngIf",void 0!==e.accountExtendedDetails),G.yb(1),G.dc("transactionType","pendingTransaction")("hasPendingTransactions",e.hasPendingTransactions)("transactions",e.pendingTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),G.yb(1),G.dc("transactionType","exchangeTransaction")("hasExchangeTransactions",e.hasExchangeTransactions)("transactions",e.formattedExchangeTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),G.yb(5),G.vc(G.Zb(27,33,"account-transaction-list.transactions_label")),G.yb(3),G.dc("ngIf",e.isRefreshing&&!e.showLinkToBlockExplorer),G.yb(2),G.dc("ngIf",e.showLinkToBlockExplorer),G.yb(3),G.dc("transactionType","normalTransaction")("transactions",e.transactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),G.yb(8),G.wc(" ",G.Zb(43,35,"account-transaction-list.receive_label")," "),G.yb(3),G.dc("disabled",0===(null==e.wallet.currentBalance?null:e.wallet.currentBalance.toNumber())),G.yb(2),G.wc(" ",G.Zb(48,37,"account-transaction-list.send_label")," "))},styles:[".loading-header[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;text-align:center}.loading-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px;stroke:#fff!important}.loading-content[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;margin-top:20vh;text-align:center}.loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px}ion-fab[_ngcontent-%COMP%]{width:100%}svg[_ngcontent-%COMP%]{stroke:none}.action--container[_ngcontent-%COMP%]{background:#fff}"]}),t}(),W=n("F07p"),H=n("0HKr"),Q=n("vAld"),$=n("vs69"),tt=n("5n3a"),et=n("1Mpf"),nt=n("l5qu"),ot=n("Q6rr"),it=n("Bx04"),rt=n("lqTi"),at=n("ZATT"),ct=n("o7/J"),st=n("pNtj"),lt=n("cwVp"),ut=n("0CrI"),ht=n("2Eq5"),dt=n("vMYo"),bt=n("vqqn"),ft=n("sXsg"),pt=n("ECOn"),gt=n("wcx9"),vt=n("onrW"),yt=function(){function t(){}return t.prototype.transform=function(t){return f.BigNumber.isBigNumber(t)&&(t=t.toNumber()),new f.BigNumber(t).shiftedBy(2).toFixed(2)+"%"},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=G.Hb({name:"percentage",type:t,pure:!0}),t}(),wt=function(){function t(){}return t.\u0275mod=G.Gb({type:t}),t.\u0275inj=G.Fb({factory:function(e){return new(e||t)},imports:[[a.Ab,o.c,i.h,l.a,c.c,u.a,s.l,r.k.forChild([{path:"",component:Y}])]]}),t}();G.oc(Y,[a.d,a.e,a.f,a.h,a.i,a.j,a.k,a.l,a.m,a.n,a.o,a.p,a.q,a.r,a.s,a.t,a.u,a.v,a.w,a.x,a.y,a.z,a.A,a.B,a.C,a.D,a.E,a.F,a.G,a.H,a.I,a.J,a.K,a.L,a.M,a.N,a.O,a.P,a.Q,a.R,a.S,a.T,a.U,a.V,a.W,a.X,a.Y,a.Z,a.ab,a.bb,a.cb,a.db,a.fb,a.gb,a.hb,a.ib,a.jb,a.kb,a.lb,a.mb,a.nb,a.ob,a.pb,a.qb,a.rb,a.tb,a.ub,a.vb,a.xb,a.yb,a.wb,a.sb,a.b,a.Hb,a.Kb,a.Mb,a.Nb,a.eb,a.g,a.Fb,a.Lb,a.Pb,a.Qb,a.Rb,a.zb,o.q,o.r,o.s,o.t,o.A,o.w,o.x,o.y,o.z,o.u,o.v,i.C,i.r,i.B,i.c,i.s,i.v,i.a,i.y,i.z,i.u,i.m,i.n,i.x,i.j,i.i,i.t,i.b,i.d,i.p,i.q,i.o,W.a,H.a,Q.a,$.a,p.a,tt.a,et.a,nt.a,ot.a,it.a,rt.a,at.a,ct.a,st.a,lt.a,ut.a,ht.a,dt.a,bt.a,ft.a,pt.a,gt.a,c.a,r.l,r.h,r.j,r.i,r.n,Y],[o.b,o.G,o.p,o.k,o.E,o.g,o.C,o.F,o.d,o.f,o.i,o.j,o.l,c.d,C.a,vt.a,yt,s.a,s.b,s.c,s.d,s.e,s.f,s.m,s.o,s.p,s.q,s.g,s.j,s.k,s.n,s.i,s.h])},fYay:function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=n("NfF3"),s=function(t){function e(e,n){var o=t.call(this)||this;return o.linkedActionType=n,o.action=e,o}return i(e,t),e.prototype.getLinkedAction=function(){return this.linkedAction},e.prototype.perform=function(){return r(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.action.start()];case 1:return t.sent(),this.linkedAction=new this.linkedActionType(this.action.result),[4,this.linkedAction.start()];case 2:return t.sent(),[2,this.linkedAction.result]}}))}))},e.prototype.cancel=function(){this.action.getState()===c.ActionState.EXECUTING?this.action.cancel():void 0!==this.linkedAction&&this.linkedAction.getState()===c.ActionState.EXECUTING&&this.linkedAction.cancel(),t.prototype.cancel.call(this)},e}(c.Action);e.LinkedAction=s}}]);