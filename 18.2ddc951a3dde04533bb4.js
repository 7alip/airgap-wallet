(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"e+VP":function(t,e,n){"use strict";n.r(e),n.d(e,"AccountTransactionListPageModule",function(){return zt});var i=n("ofXK"),o=n("3Pt+"),a=n("tyNb"),r=n("TEn/"),c=n("sYmb"),s=n("QUrN"),l=n("j1ZV"),b=n("iTUp"),d=n("mrSG"),u=n("dW0/"),h=n("RKiA"),f=n("kB5k"),p=n("VE8E"),g=n("jysE"),v=n("57MG"),m=n("nxqh"),y=n("hPkG"),w=n("fXoL"),O=n("138U");function x(t,e){if(1&t){var n=w.Pb();w.Ob(0,"ion-item",9),w.Wb("click",function(){return w.mc(n),w.Yb().changeNetwork()}),w.Kb(1,"ion-icon",10),w.vc(2),w.Zb(3,"translate"),w.Nb()}2&t&&(w.yb(2),w.xc(" ",w.ac(3,1,"wallet-edit-popover-component.change-network_label")," "))}function T(t,e){if(1&t){var n=w.Pb();w.Ob(0,"ion-item",1),w.Wb("click",function(){return w.mc(n),w.Yb().importAccountAction.start()}),w.Kb(1,"ion-icon",11),w.vc(2),w.Zb(3,"translate"),w.Nb()}if(2&t){var i=w.Yb();w.yb(1),w.ec("name",i.importAccountAction.context.icon),w.yb(1),w.xc(" ",w.ac(3,2,i.importAccountAction.context.name)," ")}}var I=function(){function t(t,e,n,i,o,a,r,c,s,l){this.alertCtrl=t,this.navParams=e,this.walletsProvider=n,this.viewCtrl=i,this.clipboardProvider=o,this.translateService=a,this.operationsProvider=r,this.browserService=c,this.cdr=s,this.protocolService=l,this.isTezosKT=!1,this.isDelegated=!1,this.networks=[],this.wallet=this.navParams.get("wallet"),this.importAccountAction=this.navParams.get("importAccountAction"),this.onDelete=this.navParams.get("onDelete"),this.initNetworks()}return t.prototype.copyAddressToClipboard=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.clipboardProvider.copyAndShowToast(this.wallet.receivingPublicAddress)];case 1:return t.sent(),[4,this.dismissPopover()];case 2:return t.sent(),[2]}})})},t.prototype.openBlockExplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),[4,this.browserService.openUrl(t)];case 2:return e.sent(),[2]}})})},t.prototype.ngOnInit=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.wallet.protocol.identifier===h.SubProtocolSymbols.XTZ_KT&&(this.isTezosKT=!0),Object(p.b)(this.wallet.protocol)?(t=this,[4,this.operationsProvider.getDelegationStatusOfAddress(this.wallet.protocol,this.wallet.receivingPublicAddress)]):[3,2];case 1:t.isDelegated=e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.delete=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:this.translateService.instant("account-edit-popover-component.header"),message:this.translateService.instant("account-edit-popover-component.message"),buttons:[{text:this.translateService.instant("account-edit-popover-component.cancel"),role:"cancel",handler:function(){t.dismissPopover()}},{text:this.translateService.instant("account-edit-popover-component.delete"),handler:function(){t.walletsProvider.removeWallet(t.wallet).then(function(){t.dismissPopover(),t.onDelete?t.onDelete():Object(y.b)(y.a.OTHER)("onDelete not defined")}).catch(Object(y.b)(y.a.WALLET_PROVIDER))}}]})];case 1:return e.sent().present().catch(Object(y.b)(y.a.IONIC_ALERT)),[2]}})})},t.prototype.changeNetwork=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.alertCtrl.create({header:"Network",inputs:this.networks.map(function(e,n){return{name:e.name,type:"radio",label:e.name,value:n,checked:t.wallet.protocol.options.network.identifier===e.identifier}}),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.walletsProvider.setWalletNetwork(this.wallet,this.networks[e])];case 1:return t.sent(),this.cdr.detectChanges(),[4,this.dismissPopover()];case 2:return t.sent(),[2]}})})}}]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[2]}})})},t.prototype.dismissPopover=function(){return this.viewCtrl.dismiss().catch(Object(y.b)(y.a.NAVIGATION))},t.prototype.initNetworks=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.wallet.protocol.identifier!==h.MainProtocolSymbols.XTZ?[3,2]:(t=this,[4,this.protocolService.getNetworksForProtocol(this.wallet.protocol.identifier)]);case 1:t.networks=e.sent(),e.label=2;case 2:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(w.Jb(r.a),w.Jb(r.nb),w.Jb(v.a),w.Jb(r.qb),w.Jb(O.j),w.Jb(c.d),w.Jb(m.a),w.Jb(g.a),w.Jb(w.i),w.Jb(O.x))},t.\u0275cmp=w.Db({type:t,selectors:[["ng-component"]],decls:19,vars:14,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","clipboard-outline","color","dark","slot","end"],["id","blockexplorer","button","","detail","false",3,"click"],["name","open-outline","color","dark","slot","end"],["id","network","button","","detail","false",3,"click",4,"ngIf"],["id","delete","button","","detail","false",3,"click"],["name","trash-outline","color","dark","slot","end"],["button","","detail","false",3,"click",4,"ngIf"],["id","network","button","","detail","false",3,"click"],["name","globe-outline","color","dark","slot","end"],["color","dark","slot","end",3,"name"]],template:function(t,e){1&t&&(w.Ob(0,"ion-list",0),w.Ob(1,"ion-list-header"),w.Ob(2,"ion-label"),w.vc(3),w.Zb(4,"translate"),w.Nb(),w.Nb(),w.Ob(5,"ion-item",1),w.Wb("click",function(){return e.copyAddressToClipboard()}),w.Kb(6,"ion-icon",2),w.vc(7),w.Zb(8,"translate"),w.Nb(),w.Ob(9,"ion-item",3),w.Wb("click",function(){return e.openBlockExplorer()}),w.Kb(10,"ion-icon",4),w.vc(11),w.Zb(12,"translate"),w.Nb(),w.tc(13,x,4,3,"ion-item",5),w.Ob(14,"ion-item",6),w.Wb("click",function(){return e.delete()}),w.Kb(15,"ion-icon",7),w.vc(16),w.Zb(17,"translate"),w.Nb(),w.tc(18,T,4,4,"ion-item",8),w.Nb()),2&t&&(w.yb(3),w.wc(w.ac(4,6,"wallet-edit-popover-component.settings_label")),w.yb(4),w.xc(" ",w.ac(8,8,"wallet-edit-popover-component.copy-address_label")," "),w.yb(4),w.xc(" ",w.ac(12,10,"wallet-edit-popover-component.block-explorer_label")," "),w.yb(2),w.ec("ngIf",e.networks.length>1),w.yb(3),w.xc(" ",w.ac(17,12,"wallet-edit-popover-component.delete_label")," "),w.yb(2),w.ec("ngIf",e.importAccountAction))},directives:[r.F,r.G,r.E,r.A,r.w,i.n],pipes:[c.c],styles:["ion-list.list-ios[_ngcontent-%COMP%]{margin-bottom:0}"]}),t}(),P=n("0pct"),A=n("Y9VN"),N=n("+B6e"),k=n("ZheS"),C=n("Z7Z5"),j=n("Z7VQ"),D=n("1y+R"),S=n("u8Qk"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.info={name:"account-transaction-list.add-tokens_label",icon:"add-outline"},e}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return"add-token-action"},enumerable:!1,configurable:!0}),e.prototype.perform=function(){return Object(d.b)(this,void 0,void 0,function(){var t=this;return Object(d.e)(this,function(e){return this.context.subAccounts.filter(function(t){return t.selected}).map(function(t){return t.wallet}).forEach(function(e){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return this.context.accountProvider.addWallet(e).catch(Object(y.b)(y.a.WALLET_PROVIDER)),[2]})})}),[2]})})},e}(S.Action),L=function(t){function e(e,n){return t.call(this,e,n)||this}return Object(d.d)(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},set:function(t){},enumerable:!1,configurable:!0}),e}(n("zLwR").RepeatableAction),E=n("rtTb"),K=n("iLEx"),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(d.d)(e,t),e.prototype.perform=function(){var t=this;return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t,n,i=this;return Object(d.e)(this,function(o){switch(o.label){case 0:return[4,this.context.protocolService.getProtocol(h.MainProtocolSymbols.XTZ)];case 1:return[4,o.sent().getAddressFromPublicKey(this.context.wallet.publicKey)];case 2:return t=o.sent(),n=new K.a,this.context.alertCtrl.create({header:this.context.translateService.instant("account-transaction-list.migrate-alert.header"),message:'Do you want to transfer <span class="style__strong color__primary">'+this.context.wallet.currentBalance.shiftedBy(-1*this.context.wallet.protocol.decimals)+' XTZ</span> </strong> from <span class="style__strong color__primary"> '+n.transform(this.context.wallet.receivingPublicAddress)+' </span> to <span class="style__strong color__primary"> '+n.transform(t)+"</span>?",buttons:[{text:this.context.translateService.instant("account-transaction-list.migrate-alert.cancel"),role:"cancel",handler:function(){e()}},{text:this.context.translateService.instant("account-transaction-list.migrate-alert.confirm"),handler:function(){var n={wallet:i.context.wallet,address:t,forceMigration:!0};i.context.dataService.setData(D.b.DETAIL,n),i.context.router.navigateByUrl("/transaction-prepare/"+D.b.DETAIL+"/"+n.wallet.publicKey+"/"+n.wallet.protocol.identifier+"/"+n.wallet.addressIndex+"/"+n.address+"/0/"+(n.forceMigration?"forced":"not_forced")).catch(Object(y.b)(y.a.NAVIGATION)),e()}}]}).then(function(t){t.present().catch(Object(y.b)(y.a.NAVIGATION))}).catch(Object(y.b)(y.a.IONIC_ALERT)),[2]}})})})},e}(S.Action),R=function(){function t(t){this.callerContext=t}return t.prototype.getActions=function(){return Object(d.b)(this,void 0,void 0,function(){var t,e,n=this;return Object(d.e)(this,function(i){return(t=new Map).set(h.MainProtocolSymbols.XTZ,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getTezosActions()]})})}),t.set(h.SubProtocolSymbols.XTZ_KT,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getTezosKTActions()]})})}),t.set(h.MainProtocolSymbols.ETH,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getEthereumActions()]})})}),t.set(h.MainProtocolSymbols.COSMOS,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getCosmosActions()]})})}),t.set(h.MainProtocolSymbols.POLKADOT,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getPolkadotActions()]})})}),t.set(h.MainProtocolSymbols.KUSAMA,function(){return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(t){return[2,this.getKusamaActions()]})})}),[2,(e=t.get(this.callerContext.protocolIdentifier))?e():[]]})})},t.prototype.getTezosActions=function(){var t=this;return[this.createDelegateButtonAction(),new L({name:"account-transaction-list.add-tokens_label",icon:"add",identifier:"add-tokens"},function(){var e=new k.SimpleAction(function(){return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(n){return this.callerContext.dataService.setData(D.b.DETAIL,t={subProtocolType:j.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+D.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(y.b)(y.a.NAVIGATION)),[2]})})})}),n=new N.LinkedAction(e,_);return n.onComplete=function(){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]})})},n})]},t.prototype.getImportAccountsAction=function(){var t=this;return new L({name:"account-transaction-list.import-accounts_label",icon:"add-outline",identifier:"import-accounts"},function(){var e=new A.ImportAccountAction({publicKey:t.callerContext.wallet.publicKey});return e.onComplete=function(e){return Object(d.b)(t,void 0,void 0,function(){var t,n,i,o,a,r;return Object(d.e)(this,function(c){switch(c.label){case 0:return 0!==e.length?[3,1]:(this.callerContext.showToast("No accounts to import."),[3,9]);case 1:c.trys.push([1,6,7,8]),t=Object(d.j)(e.entries()),n=t.next(),c.label=2;case 2:return n.done?[3,5]:(i=Object(d.h)(n.value,1),[4,this.addKtAddress(this.callerContext.wallet,i[0],e)]);case 3:c.sent(),c.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return o=c.sent(),a={error:o},[3,8];case 7:try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}return[7];case 8:this.callerContext.router.navigateByUrl("/").catch(Object(y.b)(y.a.NAVIGATION)),this.callerContext.showToast("Accounts imported"),c.label=9;case 9:return[2]}})})},e})},t.prototype.getTezosKTActions=function(){var t=this;return[new L({name:"account-transaction-list.migrate_label",icon:"return-right",identifier:"migrate-action"},function(){return new Z({wallet:t.callerContext.wallet,alertCtrl:t.callerContext.alertCtrl,translateService:t.callerContext.translateService,protocolService:t.callerContext.protocolService,dataService:t.callerContext.dataService,router:t.callerContext.router})})]},t.prototype.getCosmosActions=function(){return Object(d.b)(this,void 0,void 0,function(){var t,e;return Object(d.e)(this,function(n){switch(n.label){case 0:return t=this.createDelegateButtonAction(),[4,this.createDelegatorButtonActions({type:C.CosmosDelegationActionType.WITHDRAW_ALL_REWARDS,name:"account-transaction-list.claim_rewards_label",icon:"logo-usd",identifier:"claim-rewards"})];case 1:return e=n.sent(),[2,Object(d.i)([t],e)]}})})},t.prototype.getEthereumActions=function(){var t=this;return[new L({name:"account-transaction-list.add-tokens_label",icon:"add-outline",identifier:"add-tokens"},function(){var e=new k.SimpleAction(function(){return new Promise(function(e){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(n){return this.callerContext.dataService.setData(D.b.DETAIL,t={subProtocolType:j.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:e}),this.callerContext.router.navigateByUrl("/sub-account-add/"+D.b.DETAIL+"/"+t.wallet.publicKey+"/"+t.wallet.protocol.identifier+"/"+t.wallet.addressIndex+"/"+t.subProtocolType).catch(Object(y.b)(y.a.NAVIGATION)),[2]})})})}),n=new N.LinkedAction(e,_);return n.onComplete=function(){return Object(d.b)(t,void 0,void 0,function(){return Object(d.e)(this,function(t){return n.getLinkedAction().context.location.navigateRoot(""),[2]})})},n})]},t.prototype.getPolkadotActions=function(){return[this.createDelegateButtonAction()]},t.prototype.getKusamaActions=function(){return[this.createDelegateButtonAction()]},t.prototype.addKtAddress=function(t,e,n){return Object(d.b)(this,void 0,void 0,function(){var i,o;return Object(d.e)(this,function(a){switch(a.label){case 0:return(i=this.callerContext.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(t.publicKey,h.SubProtocolSymbols.XTZ_KT,e))?[2,i]:[4,this.callerContext.protocolService.getProtocol(h.SubProtocolSymbols.XTZ_KT)];case 1:return o=a.sent(),(i=new h.AirGapMarketWallet(o,t.publicKey,t.isExtendedPublicKey,t.derivationPath,t.priceService,e)).addresses=n,[4,i.synchronize().catch(Object(y.b)(y.a.COINLIB))];case 2:return a.sent(),[4,this.callerContext.accountProvider.addWallet(i).catch(Object(y.b)(y.a.WALLET_PROVIDER))];case 3:return a.sent(),[2,i]}})})},t.prototype.createDelegateButtonAction=function(){var t=this;return new L({name:"account-transaction-list.delegate_label",icon:"logo-usd",identifier:"delegate-action"},function(){return new k.SimpleAction(function(){return new Promise(function(e){t.callerContext.dataService.setData(D.b.DETAIL,{wallet:t.callerContext.wallet}),t.callerContext.router.navigateByUrl("/delegation-detail/"+D.b.DETAIL+"/"+t.callerContext.wallet.publicKey+"/"+t.callerContext.wallet.protocol.identifier+"/"+t.callerContext.wallet.addressIndex).catch(Object(y.b)(y.a.NAVIGATION)),e()})})})},t.prototype.createDelegatorButtonActions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(d.b)(this,void 0,void 0,function(){var e,n,i,o=this;return Object(d.e)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.callerContext.operationsProvider.getDelegatorDetails(this.callerContext.wallet)];case 1:return(e=a.sent()).availableActions?(n=e.availableActions.map(function(t){return t.type}),[2,t.filter(function(t){return n.includes(t.type)}).map(function(t){return new L(t,function(){return new E.a({wallet:o.callerContext.wallet,type:t.type,data:t.data,toastController:o.callerContext.toastController,loadingController:o.callerContext.loadingController,operationsProvider:o.callerContext.operationsProvider,dataService:o.callerContext.dataService,router:o.callerContext.router})})})]):[3,3];case 2:return i=a.sent(),console.warn(i),[3,3];case 3:return[2,[]]}})})},t}(),M=n("GsAe"),B=n("AFs5"),Y=n("PqYM"),z=n("quSY"),J=n("Xl7a"),W=n("tk/3");function F(t,e){if(1&t&&(w.Ob(0,"ion-button",32),w.Wb("click",function(){return e.$implicit.start()}),w.Kb(1,"ion-icon",33),w.vc(2),w.Zb(3,"translate"),w.Nb()),2&t){var n=e.$implicit;w.yb(1),w.ec("name",n.context.icon),w.yb(1),w.xc(" ",w.ac(3,2,n.context.name)," ")}}function V(t,e){if(1&t){var n=w.Pb();w.Ob(0,"tezos-delegation-card",34),w.Wb("onDelegatedClick",function(){return w.mc(n),w.Yb().openDelegationDetails()})("onUndelegatedClick",function(){return w.mc(n),w.Yb().openDelegationDetails()}),w.Nb()}if(2&t){var i=w.Yb();w.ec("wallet",i.wallet)("isDelegated",i.isKtDelegated)("delegateAmount",i.wallet.currentBalance)}}function U(t,e){if(1&t){var n=w.Pb();w.Ob(0,"card-actionable",35),w.Wb("click",function(){return w.mc(n),w.Yb().openPreparePage()}),w.Zb(1,"translate"),w.Zb(2,"translate"),w.Nb()}2&t&&w.ec("imageLeft",!1)("imageName","babylon-migration.svg")("text",w.ac(1,4,"account-transaction-list.migrate-babylon_card.text"))("heading",w.ac(2,6,"account-transaction-list.migrate-babylon_card.heading"))}function G(t,e){if(1&t&&w.Kb(0,"widget-account-extended-details",36),2&t){var n=w.Yb();w.ec("widget",n.accountExtendedDetails)}}function H(t,e){1&t&&w.Kb(0,"ion-spinner",37)}function X(t,e){if(1&t){var n=w.Pb();w.Ob(0,"ion-row"),w.Ob(1,"ion-col",38),w.Ob(2,"ion-text",39),w.Ob(3,"p"),w.vc(4),w.Zb(5,"translate"),w.Nb(),w.Nb(),w.Ob(6,"ion-button",40),w.Wb("click",function(){return w.mc(n),w.Yb().openBlockexplorer()}),w.Kb(7,"ion-icon",41),w.vc(8),w.Zb(9,"translate"),w.Nb(),w.Nb(),w.Nb()}2&t&&(w.yb(4),w.wc(w.ac(5,2,"account-transaction-list.tx_not_loading")),w.yb(4),w.xc(" ",w.ac(9,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}var q=function(){function t(t,e,n,i,o,a,r,c,s,l,b,u,f,p,g,v,m,w){var O=this;this.alertCtrl=t,this.navController=e,this.router=n,this.translateService=i,this.operationsProvider=o,this.popoverCtrl=a,this.toastController=r,this.loadingController=c,this.accountProvider=s,this.http=l,this.dataService=b,this.protocolService=u,this.route=f,this.storageProvider=p,this.pushBackendProvider=g,this.exchangeProvider=v,this.extensionsService=m,this.browserService=w,this.mainProtocolSymbols=h.MainProtocolSymbols,this.subProtocolSymbols=h.SubProtocolSymbols,this.timer$=Object(Y.a)(0,3e3),this.subscription=new z.a,this.isRefreshing=!1,this.initialTransactionsLoaded=!1,this.infiniteEnabled=!1,this.showLinkToBlockExplorer=!1,this.txOffset=0,this.transactions=[],this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.pendingTransactions=[],this.formattedExchangeTransactions=[],this.isKtDelegated=!1,this.lottieConfig={path:"./assets/animations/loading.json"},this.TRANSACTION_LIMIT=10,this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.wallet=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),this.updateExtendedDetails(),this.walletChanged=s.walletChangedObservable.subscribe(function(){O.loadInitialTransactions(!0),O.updateExtendedDetails()}),this.subscription=this.timer$.subscribe(function(){return Object(d.b)(O,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return this.formattedExchangeTransactions.length>0?(t=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])]):[3,2];case 1:t.formattedExchangeTransactions=e.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,e.label=2;case 2:return[2]}})})}),this.protocolIdentifier=this.wallet.protocol.identifier,this.protocolIdentifier===h.SubProtocolSymbols.XTZ_KT&&this.isDelegated().catch(Object(y.b)(y.a.COINLIB)),this.protocolIdentifier===h.MainProtocolSymbols.XTZ&&(this.getKtAddresses().catch(Object(y.b)(y.a.COINLIB)),this.isDelegated().catch(Object(y.b)(y.a.COINLIB))),this.actionGroup=new R(this),this.actionGroup.getActions().then(function(t){O.actions=t})}return t.prototype.showNoTransactionScreen=function(){return 0===this.transactions.length},t.prototype.ionViewWillEnter=function(){this.doRefresh()},t.prototype.openPreparePage=function(){this.protocolIdentifier!==h.SubProtocolSymbols.XTZ_KT?this.router.navigateByUrl("/transaction-prepare/"+D.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex+"/"+(""!==(this.protocolIdentifier===h.SubProtocolSymbols.XTZ_BTC?{wallet:this.wallet,address:"",disableFees:!0}:{wallet:this.wallet,address:""}).address)+"/0/not_forced").catch(Object(y.b)(y.a.NAVIGATION)):new Z({wallet:this.wallet,alertCtrl:this.alertCtrl,translateService:this.translateService,protocolService:this.protocolService,dataService:this.dataService,router:this.router}).start()},t.prototype.openReceivePage=function(){this.router.navigateByUrl("/account-address/"+D.b.DETAIL+"/"+this.publicKey+"/"+this.protocolID+"/"+this.addressIndex).catch(Object(y.b)(y.a.NAVIGATION))},t.prototype.openTransactionDetailPage=function(t){this.dataService.setData(D.b.DETAIL,t),this.router.navigateByUrl("/transaction-detail/"+D.b.DETAIL+"/"+t.hash).catch(Object(y.b)(y.a.NAVIGATION))},t.prototype.openBlockexplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),this.browserService.openUrl(t),[2]}})})},t.prototype.doRefresh=function(t){void 0===t&&(t=null),Object(p.b)(this.wallet.protocol)&&this.operationsProvider.refreshAllDelegationStatuses([this.wallet]),this.isRefreshing=!0,t&&t.target.complete(),this.loadInitialTransactions().catch(Object(y.b)())},t.prototype.doInfinite=function(t){return Object(d.b)(this,void 0,void 0,function(){var e;return Object(d.e)(this,function(n){switch(n.label){case 0:return this.infiniteEnabled?[4,this.getTransactions(this.transactionResult?this.transactionResult.cursor:void 0,this.TRANSACTION_LIMIT)]:[2,t.target.complete()];case 1:return e=n.sent(),this.transactions=this.mergeTransactions(this.transactions,e),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 2:return n.sent(),e.length<this.TRANSACTION_LIMIT&&(this.infiniteEnabled=!1),t.target.complete(),[2]}})})},t.prototype.loadInitialTransactions=function(t){return void 0===t&&(t=!1),Object(d.b)(this,void 0,void 0,function(){var e,n,i,o,a,r,c,s=this;return Object(d.e)(this,function(l){switch(l.label){case 0:return 0!==this.transactions.length?[3,2]:(e=this,[4,this.storageProvider.getCache(this.accountProvider.getAccountIdentifier(this.wallet))]);case 1:e.transactions=l.sent()||[],l.label=2;case 2:return n=this.getTransactions(),[4,Object(P.b)(1e4,n).catch(function(t){return console.error(t),s.showLinkToBlockExplorer=!0,[]})];case 3:i=l.sent(),this.transactions=this.mergeTransactions(t?[]:this.transactions,i),this.isRefreshing=!1,this.initialTransactionsLoaded=!0,o=this.wallet.receivingPublicAddress,l.label=4;case 4:return l.trys.push([4,6,,7]),a=this,[4,this.pushBackendProvider.getPendingTxs(o,this.protocolIdentifier)];case 5:return a.pendingTransactions=l.sent(),[3,7];case 6:return l.sent(),[3,7];case 7:return r=this,[4,this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0])];case 8:return r.formattedExchangeTransactions=l.sent(),this.hasExchangeTransactions=this.formattedExchangeTransactions.length>0,c=this.transactions.map(function(t){return t.hash}),this.pendingTransactions=this.pendingTransactions.filter(function(t){return-1===c.indexOf(t.hash)}),this.pendingTransactions.length>0?(this.pendingTransactions=this.pendingTransactions.map(function(t){return t.fee=new f.BigNumber(t.fee).toString(10),t.amount=new f.BigNumber(t.amount).toString(10),t}),this.hasPendingTransactions=!0):this.hasPendingTransactions=!1,t||this.accountProvider.triggerWalletChanged(),[4,this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions)];case 9:return l.sent(),this.txOffset=this.transactions.length,this.infiniteEnabled=!0,[2]}})})},t.prototype.getTransactions=function(t,e){return void 0===e&&(e=10),Object(d.b)(this,void 0,void 0,function(){var n,i;return Object(d.e)(this,function(o){switch(o.label){case 0:return[4,Promise.all([this.transactionResult?this.wallet.fetchTransactions(e,t):this.wallet.fetchTransactions(e),this.wallet.synchronize().catch(function(t){console.error(t)})])];case 1:return n=d.h.apply(void 0,[o.sent(),1]),this.transactionResult=i=n[0],[2,i.transactions]}})})},t.prototype.mergeTransactions=function(t,e){var n=this;if(!t)return e;var i=new Map(t.map(function(t){return[n.mergeKeyForTransaction(t),t]})),o=i.size;return e.forEach(function(t){var e=n.mergeKeyForTransaction(t);i.set(e,t)}),o===i.size?t:Array.from(i.values()).sort(function(t,e){return void 0!==t.timestamp&&void 0!==e.timestamp?e.timestamp-t.timestamp:new f.BigNumber(e.blockHeight).minus(new f.BigNumber(t.blockHeight)).toNumber()})},t.prototype.mergeKeyForTransaction=function(t){return""+(t.hash?t.hash:"")+t.from.reduce(function(t,e){return t+e},"")+t.to.reduce(function(t,e){return t+e},"")+t.amount+t.fee+(t.timestamp?t.timestamp:"")},t.prototype.presentEditPopover=function(t){return Object(d.b)(this,void 0,void 0,function(){var e=this;return Object(d.e)(this,function(n){switch(n.label){case 0:return[4,this.popoverCtrl.create({component:I,componentProps:{wallet:this.wallet,importAccountAction:this.wallet.protocol.identifier===h.MainProtocolSymbols.XTZ?this.actionGroup.getImportAccountsAction():void 0,onDelete:function(){e.navController.pop()}},event:t,translucent:!0})];case 1:return[2,n.sent().present().catch(Object(y.b)(y.a.NAVIGATION))]}})})},t.prototype.isDelegated=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.operationsProvider.checkDelegated(this.wallet.protocol,this.wallet.receivingPublicAddress)];case 1:return t=e.sent(),this.isKtDelegated=t,[2]}})})},t.prototype.getKtAddresses=function(){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,(new h.TezosKtProtocol).getAddressesFromPublicKey(this.wallet.publicKey)];case 1:return[2,t.sent()]}})})},t.prototype.openDelegationDetails=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return(t=this.actions.find(function(t){return"delegate-action"===t.identifier}))?[4,t.start()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.showToast=function(t){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.toastController.create({duration:3e3,message:t,buttons:[{text:"Ok",role:"cancel"}],position:"bottom"})];case 1:return e.sent().present().catch(Object(y.b)(y.a.NAVIGATION)),[2]}})})},t.prototype.updateExtendedDetails=function(){var t=this;Object(p.b)(this.wallet.protocol)&&void 0!==this.wallet.receivingPublicAddress&&this.extensionsService.loadDelegationExtensions().then(function(){return Object(d.b)(t,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return t=this,[4,this.operationsProvider.getAccountExtendedDetails(this.wallet)];case 1:return t.accountExtendedDetails=e.sent(),[2]}})})})},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.walletChanged.unsubscribe()},t.\u0275fac=function(e){return new(e||t)(w.Jb(r.a),w.Jb(r.mb),w.Jb(a.g),w.Jb(c.d),w.Jb(m.a),w.Jb(r.qb),w.Jb(r.vb),w.Jb(r.kb),w.Jb(v.a),w.Jb(W.a),w.Jb(D.a),w.Jb(O.x),w.Jb(a.a),w.Jb(B.b),w.Jb(M.a),w.Jb(u.a),w.Jb(J.a),w.Jb(g.a))},t.\u0275cmp=w.Db({type:t,selectors:[["page-account-transaction-list"]],decls:49,vars:39,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/portfolio"],["slot","end"],["id","edit-popover","color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[2,"display","block"],[3,"wallet","maxDigits"],[1,"ion-padding-top","ion-padding-horizontal","action--container"],["color","secondary","shape","round","size","small","fill","outline",3,"click",4,"ngFor","ngForOf"],["no-bounce","","has-bouncing","false","forceOverscroll","false"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],[3,"widget",4,"ngIf"],[3,"transactionType","hasPendingTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"transactionType","hasExchangeTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[1,"ion-align-items-center","ion-padding-top"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],["size","1",1,"justify--content__end","ion-no-padding"],["color","primary","name","dots",4,"ngIf"],["size","1"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],[3,"transactionType","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"ionInfinite"],["vertical","bottom","slot","fixed"],["id","receive","expand","full","size","default","color","primary","shape","round",3,"click"],["slot","start","src","./assets/custom-ion-icons/md-call_received.svg"],["id","send","expand","full","size","default","color","primary","shape","round",3,"disabled","click"],["slot","start","name","send-outline"],["color","secondary","shape","round","size","small","fill","outline",3,"click"],["slot","start",3,"name"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick"],["tappable","",3,"imageLeft","imageName","text","heading","click"],[3,"widget"],["color","primary","name","dots"],[1,"ion-padding"],["color","secondary",1,"font--weight__bold"],["fill","outline","color","secondary","shape","round",1,"ion-margin-top",3,"click"],["name","open","slot","start"]],template:function(t,e){1&t&&(w.Ob(0,"ion-header",0),w.Ob(1,"ion-grid",1),w.Ob(2,"ion-toolbar"),w.Ob(3,"ion-buttons",2),w.Kb(4,"ion-back-button",3),w.Nb(),w.Ob(5,"ion-title"),w.vc(6),w.Zb(7,"translate"),w.Nb(),w.Ob(8,"ion-buttons",4),w.Ob(9,"ion-button",5),w.Wb("click",function(t){return e.presentEditPopover(t)}),w.Kb(10,"ion-icon",6),w.Nb(),w.Nb(),w.Nb(),w.Ob(11,"ion-row",7),w.Kb(12,"portfolio-item",8),w.Nb(),w.Ob(13,"ion-row",9),w.tc(14,F,4,4,"ion-button",10),w.Nb(),w.Nb(),w.Nb(),w.Ob(15,"ion-content",11),w.Ob(16,"ion-grid",1),w.tc(17,V,1,3,"tezos-delegation-card",12),w.tc(18,U,3,8,"card-actionable",13),w.tc(19,G,1,1,"widget-account-extended-details",14),w.Kb(20,"transaction-list",15),w.Kb(21,"transaction-list",16),w.Ob(22,"ion-row",17),w.Ob(23,"ion-col",18),w.Ob(24,"ion-text",19),w.Ob(25,"p"),w.vc(26),w.Zb(27,"translate"),w.Nb(),w.Nb(),w.Nb(),w.Ob(28,"ion-col",20),w.tc(29,H,1,0,"ion-spinner",21),w.Nb(),w.Kb(30,"ion-col",22),w.Nb(),w.tc(31,X,10,6,"ion-row",23),w.Ob(32,"ion-refresher",24),w.Wb("ionRefresh",function(t){return e.doRefresh(t)}),w.Kb(33,"ion-refresher-content"),w.Nb(),w.Kb(34,"transaction-list",25),w.Ob(35,"ion-infinite-scroll",26),w.Wb("ionInfinite",function(t){return e.doInfinite(t)}),w.Kb(36,"ion-infinite-scroll-content"),w.Nb(),w.Nb(),w.Ob(37,"ion-fab",27),w.Ob(38,"ion-row"),w.Ob(39,"ion-col"),w.Ob(40,"ion-button",28),w.Wb("click",function(){return e.openReceivePage()}),w.Kb(41,"ion-icon",29),w.vc(42),w.Zb(43,"translate"),w.Nb(),w.Nb(),w.Ob(44,"ion-col"),w.Ob(45,"ion-button",30),w.Wb("click",function(){return e.openPreparePage()}),w.Kb(46,"ion-icon",31),w.vc(47),w.Zb(48,"translate"),w.Nb(),w.Nb(),w.Nb(),w.Nb(),w.Nb()),2&t&&(w.yb(6),w.yc("",null==e.wallet?null:e.wallet.protocol.symbol," ",w.ac(7,31,"account-transaction-list.title"),""),w.yb(6),w.ec("wallet",e.wallet)("maxDigits",0),w.yb(2),w.ec("ngForOf",e.actions),w.yb(3),w.ec("ngIf",e.wallet.protocol.identifier===e.mainProtocolSymbols.XTZ&&e.wallet.currentBalance),w.yb(1),w.ec("ngIf",e.wallet.protocol.identifier===e.subProtocolSymbols.XTZ_KT),w.yb(1),w.ec("ngIf",void 0!==e.accountExtendedDetails),w.yb(1),w.ec("transactionType","pendingTransaction")("hasPendingTransactions",e.hasPendingTransactions)("transactions",e.pendingTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),w.yb(1),w.ec("transactionType","exchangeTransaction")("hasExchangeTransactions",e.hasExchangeTransactions)("transactions",e.formattedExchangeTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),w.yb(5),w.wc(w.ac(27,33,"account-transaction-list.transactions_label")),w.yb(3),w.ec("ngIf",e.isRefreshing&&!e.showLinkToBlockExplorer),w.yb(2),w.ec("ngIf",e.showLinkToBlockExplorer),w.yb(3),w.ec("transactionType","normalTransaction")("transactions",e.transactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),w.yb(8),w.xc(" ",w.ac(43,35,"account-transaction-list.receive_label")," "),w.yb(3),w.ec("disabled",0===(null==e.wallet.currentBalance?null:e.wallet.currentBalance.toNumber())),w.yb(2),w.xc(" ",w.ac(48,37,"account-transaction-list.send_label")," "))},styles:[".loading-header[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;text-align:center}.loading-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px;stroke:#fff!important}.loading-content[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;margin-top:20vh;text-align:center}.loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px}ion-fab[_ngcontent-%COMP%]{width:100%}svg[_ngcontent-%COMP%]{stroke:none}.action--container[_ngcontent-%COMP%]{background:#fff}"]}),t}(),$=n("F07p");function Q(t,e){if(1&t&&(w.Ob(0,"ion-col",8),w.Kb(1,"img",9),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.gc("src","./assets/img/",n.imageName,"",w.oc)}}function tt(t,e){if(1&t&&(w.Ob(0,"ion-col",8),w.Kb(1,"img",9),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.gc("src","./assets/img/",n.imageName,"",w.oc)}}var et=function(){function t(){this.imageLeft=!0}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=w.Db({type:t,selectors:[["card-actionable"]],inputs:{imageLeft:"imageLeft",imageName:"imageName",heading:"heading",text:"text"},decls:9,vars:5,consts:[[3,"ngClass"],[1,"ion-align-items-center","ion-padding-horizontal"],["size","4",4,"ngIf"],["size","8"],["ion-text","","color","white",1,"ion-no-padding",3,"innerHTML"],["name","arrow-forward-outline"],["color","white"],[1,"ion-padding-top",3,"innerHTML"],["size","4"],[3,"src"]],template:function(t,e){1&t&&(w.Ob(0,"ion-card",0),w.Ob(1,"ion-row",1),w.tc(2,Q,2,1,"ion-col",2),w.Ob(3,"ion-col",3),w.Ob(4,"ion-card-title",4),w.Kb(5,"ion-icon",5),w.Nb(),w.Ob(6,"ion-text",6),w.Kb(7,"p",7),w.Nb(),w.Nb(),w.tc(8,tt,2,1,"ion-col",2),w.Nb(),w.Nb()),2&t&&(w.ec("ngClass",e.imageLeft?"background--color__gradient--reverse":"background--color__gradient"),w.yb(2),w.ec("ngIf",e.imageLeft),w.yb(2),w.ec("innerHTML",e.heading,w.nc),w.yb(3),w.ec("innerHTML",e.text,w.nc),w.yb(1),w.ec("ngIf",!e.imageLeft))},directives:[r.k,i.l,r.R,i.n,r.p,r.n,r.w,r.db],styles:[".background--color__gradient--reverse[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-primary),55%,var(--ion-color-secondaryLight))}.background--color__gradient[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-secondaryLight),45%,var(--ion-color-primary))}"]}),t}(),nt=function(t){return{protocol:t,maxDigits:3}},it=function(t){return{amount:t}};function ot(t,e){if(1&t){var n=w.Pb();w.Ob(0,"card-actionable",1),w.Wb("click",function(){return w.mc(n),w.Yb().undelegatedClick()}),w.Zb(1,"translate"),w.Zb(2,"async"),w.Zb(3,"amountConverter"),w.Zb(4,"translate"),w.Zb(5,"async"),w.Zb(6,"amountConverter"),w.Nb()}if(2&t){var i=w.Yb();w.ec("imageLeft",!1)("imageName","tezos-coins.svg")("text",w.bc(1,4,"account-transaction-list.not-delegated_card.text",w.ic(22,it,w.ac(2,7,w.bc(3,9,i.delegateAmount,w.ic(20,nt,i.wallet.protocol))))))("heading",w.bc(4,12,"account-transaction-list.not-delegated_card.heading",w.ic(26,it,w.ac(5,15,w.bc(6,17,i.delegateAmount,w.ic(24,nt,i.wallet.protocol))))))}}function at(t,e){if(1&t){var n=w.Pb();w.Ob(0,"card-actionable",1),w.Wb("click",function(){return w.mc(n),w.Yb().delegatedClick()}),w.Zb(1,"translate"),w.Zb(2,"async"),w.Zb(3,"amountConverter"),w.Zb(4,"translate"),w.Zb(5,"async"),w.Zb(6,"amountConverter"),w.Nb()}if(2&t){var i=w.Yb();w.ec("imageLeft",!0)("imageName","tezos-baking.svg")("text",w.bc(1,4,"account-transaction-list.has-delegated_card.text",w.ic(22,it,w.ac(2,7,w.bc(3,9,i.delegateAmount,w.ic(20,nt,i.wallet.protocol))))))("heading",w.bc(4,12,"account-transaction-list.has-delegated_card.heading",w.ic(26,it,w.ac(5,15,w.bc(6,17,i.delegateAmount,w.ic(24,nt,i.wallet.protocol))))))}}var rt=function(){function t(){this.isDelegated=!1,this.delegateAmount=0,this.onDelegatedClick=new w.o,this.onUndelegatedClick=new w.o}return t.prototype.delegatedClick=function(){this.onDelegatedClick.emit()},t.prototype.undelegatedClick=function(){this.onUndelegatedClick.emit()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=w.Db({type:t,selectors:[["tezos-delegation-card"]],inputs:{wallet:"wallet",isDelegated:"isDelegated",delegateAmount:"delegateAmount"},outputs:{onDelegatedClick:"onDelegatedClick",onUndelegatedClick:"onUndelegatedClick"},decls:3,vars:2,consts:[["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click"]],template:function(t,e){1&t&&(w.Ob(0,"ion-row"),w.tc(1,ot,7,28,"card-actionable",0),w.tc(2,at,7,28,"card-actionable",0),w.Nb()),2&t&&(w.yb(1),w.ec("ngIf",!e.isDelegated),w.yb(1),w.ec("ngIf",e.isDelegated))},directives:[r.R,i.n,et],pipes:[c.c,i.b,O.f],encapsulation:2}),t}();function ct(t,e){if(1&t&&(w.Mb(0),w.Ob(1,"ion-row",1),w.Ob(2,"ion-col"),w.Ob(3,"ion-text",2),w.Ob(4,"h3",3),w.vc(5),w.Zb(6,"translate"),w.Nb(),w.Nb(),w.Nb(),w.Ob(7,"ion-col"),w.Ob(8,"p",4),w.Ob(9,"strong"),w.vc(10),w.Nb(),w.Nb(),w.Nb(),w.Nb(),w.Lb()),2&t){var n=e.$implicit;w.yb(5),w.xc(" ",w.ac(6,2,n.label)," "),w.yb(5),w.xc(" ",n.text," ")}}n("kq8F");var st=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=w.Db({type:t,selectors:[["widget-account-extended-details"]],inputs:{widget:"widget"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"ion-padding-horizontal","ion-padding-top"],["color","blackLight"],[1,"typography--mono","ion-no-margin"],[1,"ion-text-end","ion-no-margin"]],template:function(t,e){1&t&&w.tc(0,ct,11,4,"ng-container",0),2&t&&w.ec("ngForOf",e.widget.items)},directives:[i.m,r.R,r.p,r.db],pipes:[c.c],styles:[""]}),t}();function lt(t,e){if(1&t&&w.Kb(0,"airgap-identicon",11),2&t){var n=w.Yb(2);w.ec("address",n.tx.from[0])}}function bt(t,e){if(1&t&&w.Kb(0,"airgap-identicon",11),2&t){var n=w.Yb(2);w.ec("address",n.tx.to[0])}}function dt(t,e){if(1&t&&(w.Ob(0,"ion-avatar",9),w.tc(1,lt,1,1,"airgap-identicon",10),w.tc(2,bt,1,1,"airgap-identicon",10),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.ec("ngIf",n.tx.isInbound),w.yb(1),w.ec("ngIf",!n.tx.isInbound)}}function ut(t,e){if(1&t&&w.Kb(0,"airgap-identicon",11),2&t){var n=w.Yb(2);w.ec("address",n.tx.to[0])}}function ht(t,e){if(1&t&&w.Kb(0,"airgap-identicon",11),2&t){var n=w.Yb(2);w.ec("address",n.tx.from[0])}}function ft(t,e){if(1&t&&(w.Ob(0,"ion-avatar",9),w.tc(1,ut,1,1,"airgap-identicon",10),w.tc(2,ht,1,1,"airgap-identicon",10),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.ec("ngIf",n.tx.isInbound),w.yb(1),w.ec("ngIf",!n.tx.isInbound)}}function pt(t,e){1&t&&w.Kb(0,"ion-icon",12)}function gt(t,e){1&t&&w.Kb(0,"ion-icon",13)}function vt(t,e){if(1&t&&(w.Ob(0,"ion-badge",14),w.vc(1),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.xc(" ",n.tx.status," ")}}var mt=function(t){return{ifMatches:t}};function yt(t,e){if(1&t&&(w.Mb(0),w.vc(1),w.Zb(2,"shortenString"),w.Lb()),2&t){var n=w.Yb(3);w.yb(1),w.xc(" ",w.bc(2,1,n.tx.from[0],w.ic(4,mt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function wt(t,e){if(1&t&&(w.Mb(0),w.vc(1),w.Zb(2,"shortenString"),w.Lb()),2&t){var n=w.Yb(3);w.yb(1),w.xc(" ",w.bc(2,1,n.tx.to[0],w.ic(4,mt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function Ot(t,e){if(1&t&&(w.Ob(0,"h3",16),w.tc(1,yt,3,6,"ng-container",6),w.tc(2,wt,3,6,"ng-container",6),w.Nb()),2&t){var n=w.Yb(2);w.yb(1),w.ec("ngIf",n.tx.isInbound),w.yb(1),w.ec("ngIf",!n.tx.isInbound)}}function xt(t,e){if(1&t&&(w.Mb(0),w.vc(1),w.Zb(2,"shortenString"),w.Lb()),2&t){var n=w.Yb(3);w.yb(1),w.xc(" ",w.bc(2,1,n.tx.to[0],w.ic(4,mt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function Tt(t,e){if(1&t&&(w.Mb(0),w.vc(1),w.Zb(2,"shortenString"),w.Lb()),2&t){var n=w.Yb(3);w.yb(1),w.xc(" ",w.bc(2,1,n.tx.from[0],w.ic(4,mt,null==n.protocol?null:n.protocol.addressValidationPattern))," ")}}function It(t,e){if(1&t&&(w.Ob(0,"h3",16),w.tc(1,xt,3,6,"ng-container",6),w.tc(2,Tt,3,6,"ng-container",6),w.Nb()),2&t){var n=w.Yb(2);w.yb(1),w.ec("ngIf",n.tx.isInbound),w.yb(1),w.ec("ngIf",!n.tx.isInbound)}}function Pt(t,e){if(1&t&&(w.Mb(0),w.tc(1,Ot,3,2,"h3",15),w.tc(2,It,3,2,"h3",15),w.Lb()),2&t){var n=w.Yb();w.yb(1),w.ec("ngIf","exchangeTransaction"!==n.transactionType),w.yb(1),w.ec("ngIf","exchangeTransaction"===n.transactionType)}}function At(t,e){if(1&t&&(w.Ob(0,"p",17),w.vc(1),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.xc(" ",n.tx.extra," ")}}var Nt=function(){return{sameDay:"[Today]",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"HH:mm"}};function kt(t,e){if(1&t&&(w.Ob(0,"p",23),w.vc(1),w.Zb(2,"amCalendar"),w.Zb(3,"amFromUnix"),w.Nb()),2&t){var n=w.Yb(2);w.yb(1),w.xc(" ",w.bc(2,1,w.ac(3,4,n.tx.timestamp),w.hc(6,Nt))," ")}}var Ct=function(){return{sameDay:"[at] HH:mm",lastDay:"[at] HH:mm",lastWeek:"[at] HH:mm",sameElse:"L"}};function jt(t,e){if(1&t&&(w.Ob(0,"p",23),w.vc(1),w.Zb(2,"amCalendar"),w.Zb(3,"amFromUnix"),w.Nb()),2&t){var n=w.Yb(2);w.yb(1),w.xc(" ",w.bc(2,1,w.ac(3,4,n.tx.timestamp),w.hc(6,Ct))," ")}}function Dt(t,e){if(1&t&&(w.Ob(0,"ion-row",18),w.Ob(1,"ion-col",19),w.Ob(2,"ion-row",20),w.Ob(3,"ion-text",21),w.tc(4,kt,4,7,"p",22),w.Nb(),w.Nb(),w.Ob(5,"ion-row",20),w.Ob(6,"ion-text",21),w.tc(7,jt,4,7,"p",22),w.Nb(),w.Nb(),w.Nb(),w.Nb()),2&t){var n=w.Yb();w.yb(4),w.ec("ngIf",n.tx.timestamp),w.yb(3),w.ec("ngIf",n.tx.timestamp)}}var St=function(t){return{protocol:t}},_t=function(){function t(t){this.protocolService=t}return t.prototype.ngOnInit=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this,[4,this.protocolService.getProtocol(this.tx.protocolIdentifier)];case 1:return t.protocol=e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})},t.\u0275fac=function(e){return new(e||t)(w.Jb(O.x))},t.\u0275cmp=w.Db({type:t,selectors:[["transaction-item"]],inputs:{tx:"tx",transactionType:"transactionType"},decls:16,vars:16,consts:[["slot","start",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_received.svg",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_made.svg",4,"ngIf"],["color","black",1,"font--weight__bold"],["color","blackLight",1,"address-container"],["class","ion-text-capitalize","color","primary",4,"ngIf"],[4,"ngIf"],["slot","end",4,"ngIf"],["class","items--right","slot","end",4,"ngIf"],["slot","start"],[3,"address",4,"ngIf"],[3,"address"],["src","./assets/custom-ion-icons/md-call_received.svg"],["src","./assets/custom-ion-icons/md-call_made.svg"],["color","primary",1,"ion-text-capitalize"],["class","typography--mono",4,"ngIf"],[1,"typography--mono"],["slot","end"],["slot","end",1,"items--right"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["color","blackLight"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"]],template:function(t,e){1&t&&(w.Ob(0,"ion-item"),w.tc(1,dt,3,2,"ion-avatar",0),w.tc(2,ft,3,2,"ion-avatar",0),w.Ob(3,"ion-label"),w.Ob(4,"h2"),w.tc(5,pt,1,0,"ion-icon",1),w.tc(6,gt,1,0,"ion-icon",2),w.Ob(7,"span",3),w.vc(8),w.Zb(9,"async"),w.Zb(10,"amountConverter"),w.Nb(),w.Nb(),w.Ob(11,"ion-text",4),w.tc(12,vt,2,1,"ion-badge",5),w.tc(13,Pt,3,2,"ng-container",6),w.Nb(),w.Nb(),w.tc(14,At,2,1,"p",7),w.tc(15,Dt,8,2,"ion-row",8),w.Nb()),2&t&&(w.yb(1),w.ec("ngIf","exchangeTransaction"!==e.transactionType),w.yb(1),w.ec("ngIf","exchangeTransaction"===e.transactionType),w.yb(3),w.ec("ngIf",e.tx.isInbound),w.yb(1),w.ec("ngIf",!e.tx.isInbound),w.yb(2),w.xc(" ",w.ac(9,9,w.bc(10,11,e.tx.amount,w.ic(14,St,e.tx.protocolIdentifier)))," "),w.yb(4),w.ec("ngIf",e.tx.status&&"applied"!==e.tx.status),w.yb(1),w.ec("ngIf",!e.tx.status||"applied"===e.tx.status),w.yb(1),w.ec("ngIf","exchangeTransaction"===e.transactionType),w.yb(1),w.ec("ngIf","normalTransaction"===e.transactionType))},directives:[r.A,i.n,r.E,r.db,r.e,O.r,r.w,r.h,r.R,r.p],pipes:[i.b,O.f,K.a,s.a,s.b],styles:[".address-container[_ngcontent-%COMP%]{display:flex}.address-container[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin-right:8px}"]}),t}();function Lt(t,e){if(1&t){var n=w.Pb();w.Ob(0,"ion-row"),w.Ob(1,"ion-col",3),w.Ob(2,"ion-text",4),w.Ob(3,"p",5),w.vc(4),w.Zb(5,"translate"),w.Nb(),w.Nb(),w.Nb(),w.Ob(6,"ion-col",6),w.Ob(7,"ion-button",7),w.Wb("click",function(){return w.mc(n),w.Yb().openBlockexplorer()}),w.Kb(8,"ion-icon",8),w.vc(9),w.Zb(10,"translate"),w.Nb(),w.Nb(),w.Nb()}2&t&&(w.yb(4),w.wc(w.ac(5,2,"account-transaction-list.pending-transactions.label")),w.yb(5),w.xc(" ",w.ac(10,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}function Et(t,e){1&t&&(w.Ob(0,"ion-row",9),w.Ob(1,"ion-text",4),w.Ob(2,"p"),w.vc(3),w.Zb(4,"translate"),w.Nb(),w.Nb(),w.Nb()),2&t&&(w.yb(3),w.wc(w.ac(4,1,"account-transaction-list.pending-exchange-transactions.label")))}function Kt(t,e){if(1&t){var n=w.Pb();w.Mb(0),w.Ob(1,"transaction-item",13),w.Wb("click",function(){w.mc(n);var t=e.$implicit;return w.Yb(2).openTransactionDetailPage(t)}),w.Nb(),w.Lb()}if(2&t){var i=e.$implicit,o=w.Yb(2);w.yb(1),w.ec("tx",i)("transactionType",o.transactionType)}}function Zt(t,e){1&t&&(w.Ob(0,"ion-row",14),w.Kb(1,"ion-spinner",15),w.Nb())}function Rt(t,e){if(1&t&&(w.Ob(0,"ion-list",10),w.tc(1,Kt,2,2,"ng-container",11),w.tc(2,Zt,2,0,"ion-row",12),w.Nb()),2&t){var n=w.Yb();w.yb(1),w.ec("ngForOf",n.transactions),w.yb(1),w.ec("ngIf",n.isRefreshing&&!n.initialTransactionsLoaded)}}function Mt(t,e){1&t&&(w.Ob(0,"div",17),w.Kb(1,"img",18),w.Ob(2,"p"),w.vc(3),w.Zb(4,"translate"),w.Nb(),w.Nb()),2&t&&(w.yb(3),w.wc(w.ac(4,1,"account-transaction-list.no-transactions_text")))}function Bt(t,e){if(1&t&&(w.Mb(0),w.tc(1,Mt,5,3,"div",16),w.Lb()),2&t){var n=w.Yb();w.yb(1),w.ec("ngIf",!n.isRefreshing&&0===n.transactions.length)}}var Yt=function(){function t(t,e,n){this.dataService=t,this.router=e,this.browserService=n,this.transactions=[],this.isRefreshing=!1,this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.initialTransactionsLoaded=!1}return t.prototype.openBlockexplorer=function(){return Object(d.b)(this,void 0,void 0,function(){var t;return Object(d.e)(this,function(e){switch(e.label){case 0:return[4,this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0])];case 1:return t=e.sent(),this.browserService.openUrl(t),[2]}})})},t.prototype.openTransactionDetailPage=function(t){return Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(e){switch(e.label){case 0:return this.dataService.setData(D.b.DETAIL,t),[4,this.dataService.set(t.hash,t)];case 1:return e.sent(),this.router.navigateByUrl("/transaction-detail/"+D.b.DETAIL+"/"+t.hash).catch(Object(y.b)(y.a.NAVIGATION)),[2]}})})},t.\u0275fac=function(e){return new(e||t)(w.Jb(D.a),w.Jb(a.g),w.Jb(g.a))},t.\u0275cmp=w.Db({type:t,selectors:[["transaction-list"]],inputs:{transactions:"transactions",isRefreshing:"isRefreshing",transactionType:"transactionType",hasPendingTransactions:"hasPendingTransactions",hasExchangeTransactions:"hasExchangeTransactions",initialTransactionsLoaded:"initialTransactionsLoaded",wallet:"wallet"},decls:4,vars:4,consts:[[4,"ngIf"],["class","ion-padding-horizontal",4,"ngIf"],["lines","none","class","ion-padding-bottom",4,"ngIf"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],[1,"ion-no-margin"],["size","12",1,"ion-no-padding"],["fill","outline","color","secondary","shape","round","slot","start","size","small",3,"click"],["slot","start","name","open"],[1,"ion-padding-horizontal"],["lines","none",1,"ion-padding-bottom"],[4,"ngFor","ngForOf"],["class","loading-content ion-justify-content-center",4,"ngIf"],[3,"tx","transactionType","click"],[1,"loading-content","ion-justify-content-center"],["color","black"],["class","empty-list ion-padding-horizontal",4,"ngIf"],[1,"empty-list","ion-padding-horizontal"],["src","./assets/img/empty-state-no-transaction.svg",1,"ion-padding-vertical"]],template:function(t,e){1&t&&(w.tc(0,Lt,11,6,"ion-row",0),w.tc(1,Et,5,3,"ion-row",1),w.tc(2,Rt,3,2,"ion-list",2),w.tc(3,Bt,2,1,"ng-container",0)),2&t&&(w.ec("ngIf","pendingTransaction"===e.transactionType&&e.hasPendingTransactions),w.yb(1),w.ec("ngIf","exchangeTransaction"===e.transactionType&&e.hasExchangeTransactions),w.yb(1),w.ec("ngIf",void 0!==e.transactions&&e.transactions.length>0),w.yb(1),w.ec("ngIf","normalTransaction"===e.transactionType))},directives:[i.n,r.R,r.p,r.db,r.i,r.w,r.F,i.m,_t,r.Y],pipes:[c.c],styles:[".empty-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;font-weight:100;font-size:1.4rem;height:50%}"]}),t}(),zt=function(){function t(){}return t.\u0275mod=w.Hb({type:t}),t.\u0275inj=w.Gb({factory:function(e){return new(e||t)},imports:[[r.ib,i.c,o.e,l.a,c.b,b.a,s.c,a.j.forChild([{path:"",component:q}])]]}),t}();w.pc(q,[r.v,r.u,r.hb,r.j,r.f,r.g,r.fb,r.i,r.w,r.R,$.a,i.m,r.q,i.n,rt,et,st,Yt,r.p,r.db,r.Y,r.O,r.P,r.x,r.y,r.r],[c.c])}}]);