(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{lbWX:function(e,t,n){"use strict";n.r(t),n.d(t,"DelegationListPageModule",function(){return S});var i=n("138U"),a=n("ofXK"),l=n("3Pt+"),o=n("tyNb"),r=n("TEn/"),s=n("sYmb"),c=n("j1ZV"),b=n("iTUp"),d=n("mrSG"),g=n("fXoL"),u=function(e){return{delegateeLabel:e}};function p(e,t){if(1&e&&(g.Qb(0,"span"),g.wc(1),g.bc(2,"translate"),g.bc(3,"translate"),g.Pb()),2&e){var n=g.ac();g.Ab(1),g.yc(" ",g.dc(2,1,"delegate-edit-popover.change-delegatee_label",g.kc(6,u,g.cc(3,4,n.delegateeLabel)))," ")}}var h=function(){function e(e,t,n,i,a){this.alertController=e,this.popoverController=t,this.navParams=n,this.translateService=i,this.addressService=a;var l=this.navParams.get("delegateeLabel"),o=this.navParams.get("delegateeLabelPlural");this.protocolIdentifier=this.navParams.get("protocolIdentifier"),this.networkIdentifier=this.navParams.get("network"),this.delegateeLabel=void 0!==l?l:"delegation-detail.default-delegatee-label",this.delegateeLabelPlural=void 0!==o?o:"delegation-detail.default-delegatee-label-plural"}return e.prototype.changeDelegatee=function(){return Object(d.b)(this,void 0,void 0,function(){var e;return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.createAlertOptions()];case 1:return e=t.sent(),[4,this.alertController.create(e)];case 2:return[4,t.sent().present()];case 3:return t.sent(),[2]}})})},e.prototype.createAlertOptions=function(){return Object(d.b)(this,void 0,void 0,function(){var e=this;return Object(d.e)(this,function(t){return[2,{header:this.translateService.instant("delegate-edit-popover.delegation-settings_label"),message:this.translateService.instant("delegate-edit-popover.change-alert.text",{delegateeLabel:this.translateService.instant(this.delegateeLabel)}),inputs:[{name:"delegatee",id:"delegatee",placeholder:this.translateService.instant("delegate-edit-popover.change-alert.placeholder_text",{delegateeLabel:this.translateService.instant(this.delegateeLabel)})}],buttons:[{text:this.translateService.instant("delegate-edit-popover.change-alert.cancel_label"),role:"cancel",cssClass:"secondary",handler:function(){e.popoverController.dismiss()}},{text:this.translateService.instant("delegate-edit-popover.change-alert.set-delegatee_label",{delegateeLabel:this.translateService.instant(this.delegateeLabel)}),handler:function(t){var n=t.delegatee;return Object(d.b)(e,void 0,void 0,function(){var e;return Object(d.e)(this,function(t){switch(t.label){case 0:return[4,this.addressService.getAddress(n,this.protocolIdentifier,this.networkIdentifier)];case 1:return e=t.sent(),this.popoverController.dismiss({delegateeAddress:e||""}),[2,!0]}})})}}]}]})})},e.\u0275fac=function(t){return new(t||e)(g.Lb(r.a),g.Lb(r.qb),g.Lb(r.nb),g.Lb(s.d),g.Lb(i.d))},e.\u0275cmp=g.Fb({type:e,selectors:[["app-delegate-edit-popover"]],decls:8,vars:4,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","create-outline","color","dark","slot","end"],[4,"ngIf"]],template:function(e,t){1&e&&(g.Qb(0,"ion-list",0),g.Qb(1,"ion-list-header"),g.Qb(2,"ion-label"),g.wc(3),g.bc(4,"translate"),g.Pb(),g.Pb(),g.Qb(5,"ion-item",1),g.Yb("click",function(){return t.changeDelegatee()}),g.Mb(6,"ion-icon",2),g.uc(7,p,4,8,"span",3),g.Pb(),g.Pb()),2&e&&(g.Ab(3),g.xc(g.cc(4,2,"delegate-edit-popover.delegation-settings_label")),g.Ab(4),g.gc("ngIf",t.delegateeLabel))},directives:[r.F,r.G,r.E,r.A,r.w,a.n],pipes:[s.c],styles:[""]}),e}(),f=n("nxqh"),v=n("hPkG"),P=n("oCjk"),m=n("2Eq5");function Q(e,t){if(1&e){var n=g.Rb();g.Qb(0,"div",15),g.Yb("click",function(){g.oc(n);var e=t.$implicit;return g.ac(3).navigateToDetails(e.address)}),g.Mb(1,"widget-account-summary",16),g.Pb()}if(2&e){var i=t.$implicit;g.Ab(1),g.gc("widget",i)}}var w=function(e){return{delegateeLabelPlural:e}};function D(e,t){if(1&e&&(g.Qb(0,"ion-list",12),g.Qb(1,"ion-list-header"),g.Qb(2,"ion-label"),g.Qb(3,"ion-text",13),g.wc(4),g.bc(5,"translate"),g.bc(6,"translate"),g.Pb(),g.Pb(),g.Pb(),g.uc(7,Q,2,1,"div",14),g.Pb()),2&e){var n=g.ac(2);g.Ab(4),g.yc(" ",g.dc(5,2,"delegation-list.your-delegatees_label",g.kc(7,w,g.cc(6,5,n.areMultipleDelegationsSupported?n.delegateeLabelPlural:n.delegateeLabel)))," "),g.Ab(3),g.gc("ngForOf",n.currentDelegatees)}}function L(e,t){if(1&e&&(g.Ob(0),g.uc(1,D,8,9,"ion-list",11),g.Nb()),2&e){var n=g.ac();g.Ab(1),g.gc("ngIf",n.currentDelegatees.length>0)}}function k(e,t){if(1&e&&(g.Qb(0,"ion-list",12),g.Qb(1,"ion-list-header"),g.Qb(2,"ion-label"),g.Qb(3,"ion-text",13),g.wc(4),g.bc(5,"translate"),g.bc(6,"translate"),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"ion-item"),g.Qb(8,"ion-avatar",2),g.Mb(9,"airgap-identicon"),g.Pb(),g.Qb(10,"ion-label"),g.Qb(11,"ion-text"),g.Qb(12,"ion-row",17),g.Qb(13,"ion-col",18),g.Qb(14,"h2"),g.Mb(15,"ion-skeleton-text",19),g.Pb(),g.Pb(),g.Qb(16,"ion-col",20),g.Mb(17,"ion-skeleton-text",21),g.Pb(),g.Pb(),g.Pb(),g.Qb(18,"ion-row",17),g.Qb(19,"ion-col",22),g.Qb(20,"ion-text"),g.Mb(21,"ion-skeleton-text",19),g.Pb(),g.Pb(),g.Qb(22,"ion-col",23),g.Qb(23,"ion-text"),g.Qb(24,"p",24),g.Mb(25,"ion-skeleton-text",21),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var n=g.ac();g.Ab(4),g.yc(" ",g.dc(5,1,"delegation-list.your-delegatees_label",g.kc(6,w,g.cc(6,4,n.delegateeLabelPlural)))," ")}}function I(e,t){if(1&e){var n=g.Rb();g.Qb(0,"div",15),g.Yb("click",function(){g.oc(n);var e=t.$implicit;return g.ac(2).navigateToDetails(e.address)}),g.Mb(1,"widget-account-summary",16),g.Pb()}if(2&e){var i=t.$implicit;g.Ab(1),g.gc("widget",i)}}function y(e,t){if(1&e&&(g.Qb(0,"p",28),g.wc(1),g.bc(2,"translate"),g.bc(3,"translate"),g.Pb()),2&e){var n=g.ac(2);g.Ab(1),g.yc(" ",g.dc(2,1,"delegation-list.not-supported_text",g.kc(6,w,g.cc(3,4,n.delegateeLabelPlural)))," ")}}function O(e,t){if(1&e){var n=g.Rb();g.Qb(0,"ion-infinite-scroll",29),g.Yb("ionInfinite",function(){return g.oc(n),g.ac(2).loadMoreItems()}),g.Mb(1,"ion-infinite-scroll-content"),g.Pb()}if(2&e){var i=g.ac(2);g.gc("disabled",i.displayedDelegatees.length>=i.filteredDelegatees.length)}}function M(e,t){if(1&e){var n=g.Rb();g.Qb(0,"ion-button",30),g.Yb("click",function(){return g.oc(n),g.ac(2).loadMoreItems()}),g.wc(1),g.bc(2,"translate"),g.Pb()}2&e&&(g.Ab(1),g.yc(" ",g.cc(2,1,"delegation-list.load-more_label")," "))}function A(e,t){if(1&e&&(g.Ob(0),g.Qb(1,"ion-list",12),g.Qb(2,"ion-list-header"),g.Qb(3,"ion-label"),g.Qb(4,"ion-text",13),g.wc(5),g.bc(6,"translate"),g.bc(7,"translate"),g.Pb(),g.Pb(),g.Pb(),g.uc(8,I,2,1,"div",14),g.Pb(),g.uc(9,y,4,8,"p",25),g.uc(10,O,2,1,"ion-infinite-scroll",26),g.uc(11,M,3,3,"ion-button",27),g.Nb()),2&e){var n=g.ac();g.Ab(5),g.yc(" ",g.dc(6,5,"delegation-list.known-delegatees_label",g.kc(10,w,g.cc(7,8,n.delegateeLabelPlural)))," "),g.Ab(3),g.gc("ngForOf",n.displayedDelegatees),g.Ab(1),g.gc("ngIf",0===n.knownDelegatees.length),g.Ab(1),g.gc("ngIf",!n.isDesktop),g.Ab(1),g.gc("ngIf",n.isDesktop&&n.displayedDelegatees.length<n.filteredDelegatees.length)}}function x(e,t){if(1&e&&(g.Qb(0,"ion-list",12),g.Qb(1,"ion-list-header"),g.Qb(2,"ion-label"),g.Qb(3,"ion-text",13),g.wc(4),g.bc(5,"translate"),g.bc(6,"translate"),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"ion-item"),g.Qb(8,"ion-avatar",2),g.Mb(9,"airgap-identicon"),g.Pb(),g.Qb(10,"ion-label"),g.Qb(11,"ion-text"),g.Qb(12,"ion-row",17),g.Qb(13,"ion-col",18),g.Qb(14,"h2"),g.Mb(15,"ion-skeleton-text",19),g.Pb(),g.Pb(),g.Qb(16,"ion-col",20),g.Mb(17,"ion-skeleton-text",21),g.Pb(),g.Pb(),g.Pb(),g.Qb(18,"ion-row",17),g.Qb(19,"ion-col",22),g.Qb(20,"ion-text"),g.Mb(21,"ion-skeleton-text",19),g.Pb(),g.Pb(),g.Qb(22,"ion-col",23),g.Qb(23,"ion-text"),g.Qb(24,"p",24),g.Mb(25,"ion-skeleton-text",21),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&e){var n=g.ac();g.Ab(4),g.yc(" ",g.dc(5,1,"delegation-list.known-delegatees_label",g.kc(6,w,g.cc(6,4,n.delegateeLabelPlural)))," ")}}var _=[{path:"",component:function(){function e(e,t,n,i,a,l){this.route=e,this.navController=t,this.operations=n,this.popoverController=i,this.ngZone=a,this.platform=l,this.searchTerm="",this.currentDelegatees=[],this.knownDelegatees=[],this.filteredDelegatees=[],this.displayedDelegatees=[],this.isDesktop=this.platform.is("desktop")}return Object.defineProperty(e.prototype,"itemLoadingStep",{get:function(){return this.isDesktop?e.DESKTOP_ITEM_LOADING_STEP:e.DEFAULT_ITEM_LOADING_STEP},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;if(this.route.snapshot.data.special){var t=this.route.snapshot.data.special;this.wallet=t.wallet,this.delegateeLabel=t.delegateeLabel,this.delegateeLabelPlural=t.delegateeLabelPlural,this.areMultipleDelegationsSupported=t.areMultipleDelegationsSupported,this.callback=t.callback,this.operations.getDelegateesSummary(this.wallet,t.currentDelegatees).then(function(n){e.currentDelegatees=n.filter(function(e){return void 0!==e.address&&t.currentDelegatees.includes(e.address)}),e.knownDelegatees=n.filter(function(e){return!t.currentDelegatees.includes(e.address)}),e.filteredDelegatees=e.knownDelegatees,e.ngZone.run(function(){e.loadMoreItems(e.itemLoadingStep)})})}},e.prototype.presentPopover=function(e){return Object(d.b)(this,void 0,void 0,function(){var t,n=this;return Object(d.e)(this,function(i){switch(i.label){case 0:return[4,this.popoverController.create({component:h,componentProps:{delegateeLabel:this.delegateeLabel,delegateeLabelPlural:this.delegateeLabelPlural,protocolIdentifier:this.wallet.protocol.identifier,networkIdentifier:this.wallet.protocol.options.network.identifier},event:e,translucent:!0})];case 1:return(t=i.sent()).onDidDismiss().then(function(e){var t=e.data;return Object(d.b)(n,void 0,void 0,function(){return Object(d.e)(this,function(e){return Object(P.b)(t,"delegateeAddress")?this.navigateToDetails(t.delegateeAddress):console.log("Unknown option selected."),[2]})})}).catch(Object(v.b)(v.a.IONIC_ALERT)),[2,t.present().catch(Object(v.b)(v.a.NAVIGATION))]}})})},e.prototype.setFilteredItems=function(e){this.filteredDelegatees=0===e.length?this.knownDelegatees:this.knownDelegatees.filter(function(t){var n=e.toLowerCase(),i=t.address.toLowerCase().includes(n),a=t.header[0].toLowerCase().includes(n);return i||a}),this.displayedDelegatees=this.getFilteredDlegatees()},e.prototype.loadMoreItems=function(e){return void 0===e&&(e=this.itemLoadingStep),Object(d.b)(this,void 0,void 0,function(){return Object(d.e)(this,function(t){switch(t.label){case 0:return 0===this.searchTerm.length&&(this.displayedDelegatees=Object(d.j)(this.displayedDelegatees,this.getFilteredDlegatees(Math.max(this.displayedDelegatees.length-1,0),e)).filter(function(e,t,n){return n.indexOf(e)===t})),this.infiniteScroll?[4,this.infiniteScroll.complete()]:[3,2];case 1:t.sent(),this.displayedDelegatees.length===this.knownDelegatees.length&&(this.infiniteScroll.disabled=!0),t.label=2;case 2:return[2]}})})},e.prototype.navigateToDetails=function(e){this.callback(e),this.navController.pop()},e.prototype.getFilteredDlegatees=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.itemLoadingStep),this.filteredDelegatees.slice(0,e+t)},e.DEFAULT_ITEM_LOADING_STEP=10,e.DESKTOP_ITEM_LOADING_STEP=30,e.\u0275fac=function(t){return new(t||e)(g.Lb(o.a),g.Lb(r.mb),g.Lb(f.a),g.Lb(r.qb),g.Lb(g.B),g.Lb(r.pb))},e.\u0275cmp=g.Fb({type:e,selectors:[["delegation-list"]],viewQuery:function(e,t){var n;1&e&&g.Cc(r.x,1),2&e&&g.mc(n=g.Zb())&&(t.infiniteScroll=n.first)},decls:22,vars:13,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["slot","end"],["color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[3,"ngModel","ngModelChange","ionChange"],[4,"ngIf","ngIfElse"],["currentLoadingTemplate",""],["filteredLoadingTemplate",""],["lines","none",4,"ngIf"],["lines","none"],["color","primary",1,"font--weight__bold","ion-ion-text"],["class","ion-padding-horizontal",3,"click",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal",3,"click"],[3,"widget"],[1,"ion-no-padding"],["size","9",1,"ion-no-padding"],["animated","",2,"width","80%"],["size","3",1,"ion-no-padding"],["animated","",2,"width","100%"],["size","4",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],[1,"ion-no-margin"],["class","ion-padding-horizontal",4,"ngIf"],[3,"disabled","ionInfinite",4,"ngIf"],["fill","outline","expand","block",3,"click",4,"ngIf"],[1,"ion-padding-horizontal"],[3,"disabled","ionInfinite"],["fill","outline","expand","block",3,"click"]],template:function(e,t){if(1&e&&(g.Qb(0,"ion-header",0),g.Qb(1,"ion-grid",1),g.Qb(2,"ion-toolbar"),g.Qb(3,"ion-buttons",2),g.Mb(4,"ion-back-button",3),g.Pb(),g.Qb(5,"ion-title"),g.wc(6),g.bc(7,"translate"),g.bc(8,"translate"),g.Pb(),g.Qb(9,"ion-buttons",4),g.Qb(10,"ion-button",5),g.Yb("click",function(e){return t.presentPopover(e)}),g.Mb(11,"ion-icon",6),g.Pb(),g.Pb(),g.Pb(),g.Qb(12,"ion-toolbar"),g.Qb(13,"ion-searchbar",7),g.Yb("ngModelChange",function(e){return t.searchTerm=e})("ionChange",function(){return t.setFilteredItems(t.searchTerm)}),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Qb(14,"ion-content"),g.Qb(15,"ion-grid",1),g.uc(16,L,2,1,"ng-container",8),g.uc(17,k,26,8,"ng-template",null,9,g.vc),g.uc(19,A,12,12,"ng-container",8),g.uc(20,x,26,8,"ng-template",null,10,g.vc),g.Pb(),g.Pb()),2&e){var n=g.nc(18),i=g.nc(21);g.Ab(6),g.xc(g.dc(7,6,"delegation-list.title",g.kc(11,w,g.cc(8,9,t.delegateeLabelPlural)))),g.Ab(7),g.gc("ngModel",t.searchTerm),g.Ab(3),g.gc("ngIf",t.currentDelegatees)("ngIfElse",n),g.Ab(3),g.gc("ngIf",t.displayedDelegatees)("ngIfElse",i)}},directives:[r.v,r.u,r.hb,r.j,r.f,r.g,r.fb,r.i,r.w,r.S,r.ub,l.h,l.j,r.q,a.n,r.F,r.G,r.E,r.db,a.m,m.a,r.A,r.e,i.s,r.R,r.p,r.V,r.x,r.y],pipes:[s.c],styles:[".sc-ion-label-ios-s[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .sc-ion-label-md-s[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.list-ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:8px}"]}),e}()}],S=function(){function e(){}return e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({factory:function(t){return new(t||e)},imports:[[a.c,l.e,r.ib,s.b,c.a,b.a,o.j.forChild(_),i.e]]}),e}()}}]);