{"version":3,"sources":["./src/app/pages/interaction-selection/interaction-selection.ts","./src/app/pages/interaction-selection/interaction-selection.html","./src/app/pages/interaction-selection/interaction-selection.module.ts"],"names":[],"mappings":"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","file":"pages-interaction-selection-interaction-selection-module.js","sourcesContent":["import { Component } from '@angular/core'\nimport { ActivatedRoute } from '@angular/router'\nimport { ModalController, Platform } from '@ionic/angular'\nimport { AirGapMarketWallet, IACMessageType, IAirGapTransaction } from '@airgap/coinlib-core'\nimport { LedgerService } from 'src/app/services/ledger/ledger-service'\nimport { ErrorCategory, handleErrorSentry } from '../../services/sentry-error-handler/sentry-error-handler'\nimport { InteractionService } from 'src/app/services/interaction/interaction.service'\nimport { AirGapMarketWalletGroup, InteractionSetting } from 'src/app/models/AirGapMarketWalletGroup'\nimport { InteractionSelectionComponent } from 'src/app/components/interaction-selection/interaction-selection.component'\n\n@Component({\n  selector: 'page-interaction-selection',\n  templateUrl: 'interaction-selection.html',\n  styleUrls: ['./interaction-selection.scss']\n})\nexport class InteractionSelectionPage {\n  public isDesktop: boolean = false\n  public isLedgerSupported: boolean = false\n  public isRelay: boolean = false\n  public interactionData: any\n  private generatedId: number | undefined = undefined\n\n  private readonly group: AirGapMarketWalletGroup\n  private readonly wallet: AirGapMarketWallet\n  private readonly airGapTxs: IAirGapTransaction[]\n  private readonly type: IACMessageType\n\n  constructor(\n    public readonly platform: Platform,\n    private readonly route: ActivatedRoute,\n    private readonly interactionService: InteractionService,\n    private readonly ledgerService: LedgerService,\n    private readonly modalController: ModalController\n  ) {\n    this.isDesktop = this.platform.is('desktop')\n\n    if (this.route.snapshot.data.special) {\n      const info = this.route.snapshot.data.special\n      this.group = info.group\n      this.wallet = info.wallet\n      this.airGapTxs = info.airGapTxs\n      this.interactionData = info.data\n      this.generatedId = info.generatedId\n      this.type = info.type\n      this.isRelay = info.isRelay ?? this.isRelay\n      this.isLedgerSupported = this.isDesktop && this.ledgerService.isProtocolSupported(this.wallet.protocol)\n    }\n  }\n\n  public async offlineDeviceSign() {\n    if (this.group.interactionSetting === InteractionSetting.UNDETERMINED) {\n      await this.select(InteractionSetting.OFFLINE_DEVICE)\n    }\n    this.interactionService.offlineDeviceSign(this.wallet, this.airGapTxs, this.interactionData, this.type, this.isRelay, this.generatedId)\n  }\n\n  public async sameDeviceSign() {\n    if (this.group.interactionSetting === InteractionSetting.UNDETERMINED) {\n      await this.select(InteractionSetting.SAME_DEVICE)\n    }\n    this.interactionService.sameDeviceSign(this.wallet, this.interactionData, this.type, this.isRelay, this.generatedId)\n  }\n\n  public async ledgerSign() {\n    if (this.group.interactionSetting === InteractionSetting.UNDETERMINED) {\n      await this.select(InteractionSetting.LEDGER)\n    }\n    this.interactionService.ledgerSign(this.wallet, this.airGapTxs, this.interactionData)\n  }\n\n  async select(selectedSetting: InteractionSetting): Promise<void> {\n    return new Promise(async (resolve) => {\n      const modal: HTMLIonModalElement = await this.modalController.create({\n        component: InteractionSelectionComponent,\n        componentProps: {\n          walletGroup: this.group,\n          selectedSetting,\n          onlyOneGroupPresent: true,\n          dismissOnly: true\n        }\n      })\n\n      modal.present().catch(handleErrorSentry(ErrorCategory.IONIC_MODAL))\n      modal.onDidDismiss().then(() => {\n        resolve()\n      })\n    })\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <ion-toolbar>\n      <ion-buttons slot=\"start\">\n        <ion-back-button defaultHref=\"/\"></ion-back-button>\n      </ion-buttons>\n      <ion-title *ngIf=\"!isDesktop\">{{ 'interaction-selection.title' | translate }}</ion-title>\n      <ion-title *ngIf=\"isDesktop\">{{ 'interaction-selection-desktop.title' | translate }}</ion-title>\n    </ion-toolbar>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"ion-padding\" *ngIf=\"!isDesktop\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <h3 class=\"ion-padding-bottom ion-no-margin\" [innerHTML]=\"'interaction-selection.heading' | translate\"></h3>\n    <ion-row class=\"ion-no-padding\">\n      <ion-col size=\"12\" size-md=\"6\">\n        <ion-row class=\"ion-justify-content-center\">\n          <img src=\"./assets/img/sign-one-device.svg\" />\n        </ion-row>\n\n        <ion-row>\n          <ion-col size=\"12\">\n            <ion-button id=\"online\" expand=\"block\" color=\"primary\" (click)=\"sameDeviceSign()\" shape=\"round\">\n              {{ 'interaction-selection.same-device_label' | translate }}\n            </ion-button>\n            <p>{{ 'interaction-selection.same-device_info' | translate }}</p>\n          </ion-col>\n        </ion-row>\n\n        <ion-row class=\"ion-justify-content-center ion-padding-top\">\n          <img src=\"./assets/img/sign-two-device.svg\" />\n        </ion-row>\n\n        <ion-row>\n          <ion-col size=\"12\">\n            <ion-button id=\"offline\" expand=\"block\" size=\"default\" color=\"primary\" (click)=\"offlineDeviceSign()\" shape=\"round\">\n              {{ 'interaction-selection.offline-device_label' | translate }}\n            </ion-button>\n            <p>{{ 'interaction-selection.offline-device_info' | translate }}</p>\n          </ion-col>\n        </ion-row>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n\n<ion-content class=\"ion-padding\" *ngIf=\"isDesktop\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <h3 class=\"ion-padding-bottom ion-no-margin\" [innerHTML]=\"'interaction-selection-desktop.heading' | translate\"></h3>\n    <ion-row class=\"ion-no-padding\">\n      <ion-col size=\"12\" size-md=\"6\">\n        <ion-row class=\"ion-justify-content-center ion-padding-top\">\n          <img *ngIf=\"!isDesktop\" src=\"./assets/img/sign-two-device.svg\" />\n          <img *ngIf=\"isDesktop\" src=\"./assets/img/signer-vault-desktop.svg\" />\n        </ion-row>\n\n        <ion-row>\n          <ion-col size=\"12\">\n            <ion-button id=\"offline\" expand=\"block\" size=\"default\" color=\"primary\" (click)=\"offlineDeviceSign()\" shape=\"round\">\n              {{ 'interaction-selection-desktop.vault_label' | translate }}\n            </ion-button>\n            <p>{{ 'interaction-selection-desktop.vault_info' | translate }}</p>\n          </ion-col>\n        </ion-row>\n\n        <ion-row class=\"ion-justify-content-center\"><img src=\"./assets/img/signer-ledger.svg\" /></ion-row>\n\n        <ion-row>\n          <ion-col size=\"12\">\n            <ion-button id=\"online\" expand=\"block\" color=\"primary\" (click)=\"ledgerSign()\" shape=\"round\" [disabled]=\"!isLedgerSupported\">\n              {{ 'interaction-selection-desktop.ledger_label' | translate }}\n            </ion-button>\n            <p>{{ 'interaction-selection-desktop.ledger_info' | translate }}</p>\n          </ion-col>\n        </ion-row>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n","import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\n\nimport { ComponentsModule } from '../../components/components.module'\n\nimport { InteractionSelectionPage } from './interaction-selection'\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild([{ path: '', component: InteractionSelectionPage }])\n  ],\n  declarations: [InteractionSelectionPage]\n})\nexport class InteractionSelectionPageModule {}\n"],"sourceRoot":"webpack:///"}