{"version":3,"sources":["./src/app/pages/scan-address/scan-address.ts","./src/app/pages/scan-address/scan-address.html","./src/app/pages/scan-address/scan-address.module.ts"],"names":[],"mappings":"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","file":"pages-scan-address-scan-address-module.js","sourcesContent":["import { PermissionsService, QrScannerService } from '@airgap/angular-core'\nimport { Component, ViewChild } from '@angular/core'\nimport { ActivatedRoute } from '@angular/router'\nimport { NavController, Platform } from '@ionic/angular'\nimport { ZXingScannerComponent } from '@zxing/ngx-scanner'\n\nimport { ErrorCategory, handleErrorSentry } from '../../services/sentry-error-handler/sentry-error-handler'\nimport { ScanBasePage } from '../scan-base/scan-base'\n\n@Component({\n  selector: 'page-scan-address',\n  templateUrl: 'scan-address.html',\n  styleUrls: ['./scan-address.scss']\n})\nexport class ScanAddressPage extends ScanBasePage {\n  private readonly callback: ((address: string) => void) | ((address: string) => Promise<void>)\n  private callbackCalled: boolean = false\n\n  @ViewChild('addressScanner')\n  public zxingScanner?: ZXingScannerComponent\n\n  constructor(\n    protected readonly platform: Platform,\n    protected readonly scanner: QrScannerService,\n    protected readonly permissionsProvider: PermissionsService,\n    private readonly navCtrl: NavController,\n    private readonly route: ActivatedRoute\n  ) {\n    super(platform, scanner, permissionsProvider)\n    if (this.route.snapshot.data.special) {\n      const info = this.route.snapshot.data.special\n      this.callback = info.callback\n    }\n  }\n\n  public checkScan(resultString: string): void {\n    this.handleQRScanned(resultString)\n  }\n\n  public handleQRScanned(text: string): void {\n    if (!this.callbackCalled) {\n      this.callbackCalled = true\n      if (this.platform.is('hybrid')) {\n        this.scanner.destroy()\n      } else if (this.zxingScanner) {\n        this.zxingScanner.reset()\n      }\n      this.navCtrl\n        .pop()\n        .then(() => {\n          this.sendAddressToParent(text)\n        })\n        .catch(handleErrorSentry(ErrorCategory.NAVIGATION))\n    }\n  }\n\n  private sendAddressToParent(text: string): void {\n    if (this.callback) {\n      // Strip \"scheme\" and \"parameters\" from URIs\n      // TODO: Use URL\n      let address: string = text\n\n      // ignore first element\n      const [, path]: string[] = text.split(':')\n      if (path) {\n        const splits: string[] = path.split('?')\n        address = splits[0]\n      }\n      this.callback(address.trim())\n    }\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <ion-toolbar>\n      <ion-buttons slot=\"start\">\n        <ion-back-button defaultHref=\"/\"></ion-back-button>\n      </ion-buttons>\n      <ion-title>{{ 'scan-address.title' | translate }}</ion-title>\n    </ion-toolbar>\n  </ion-grid>\n</ion-header>\n\n<ion-content forceOverflow=\"false\" [class.transparent]=\"hasCameraPermission\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <ion-text color=\"white\">\n      <p class=\"ion-padding ion-no-margin ion-text-center\">\n        {{ 'scan-address.text' | translate }}\n      </p>\n    </ion-text>\n    <ion-row [hidden]=\"!hasCameraPermission\" class=\"row--height__100 ion-justify-content-center ion-align-items-center \">\n      <ion-col class=\"guides--container content--align__center-center\">\n        <img class=\"guides--container__img\" src=\"./assets/img/qr_code_guides.svg\" />\n      </ion-col>\n      <zxing-scanner *ngIf=\"isBrowser || isElectron\" #addressScanner (scanSuccess)=\"checkScan($event)\"></zxing-scanner>\n    </ion-row>\n\n    <ion-row\n      [hidden]=\"hasCameraPermission\"\n      (click)=\"requestPermission()\"\n      class=\"row--height__100 ion-justify-content-center ion-align-items-center \"\n    >\n      <ion-col class=\"text-center\">\n        <img src=\"./assets/img/permission_onboarding_camera.svg\" />\n        <h3 class=\"ion-padding-horizontal\" [innerHTML]=\"'scan.empty-state_heading' | translate\"></h3>\n        <ion-button shape=\"round\" color=\"primary\">{{ 'scan.grant-permission_label' | translate }}</ion-button>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>\n","import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\nimport { ZXingScannerModule } from '@zxing/ngx-scanner'\n\nimport { ComponentsModule } from '../../components/components.module'\n\nimport { ScanAddressPage } from './scan-address'\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ComponentsModule,\n    TranslateModule,\n    ZXingScannerModule,\n    RouterModule.forChild([{ path: '', component: ScanAddressPage }])\n  ],\n  declarations: [ScanAddressPage]\n})\nexport class ScanAddressPageModule {}\n"],"sourceRoot":"webpack:///"}