{"version":3,"sources":["./src/app/pages/sub-account-add-generic/sub-account-add-generic.module.ts","./src/app/pages/sub-account-add-generic/sub-account-add-generic.ts","./src/app/pages/sub-account-add-generic/sub-account-add-generic.html"],"names":[],"mappings":"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","file":"pages-sub-account-add-generic-sub-account-add-generic-module.js","sourcesContent":["import { AirGapAngularCoreModule } from '@airgap/angular-core'\nimport { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\n\nimport { ComponentsModule } from '../../components/components.module'\n\nimport { SubAccountAddGenericPage } from './sub-account-add-generic'\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ComponentsModule,\n    TranslateModule,\n    RouterModule.forChild([{ path: '', component: SubAccountAddGenericPage }]),\n    AirGapAngularCoreModule\n  ],\n  declarations: [SubAccountAddGenericPage]\n})\nexport class SubAccountAddGenericPageModule {}\n","import { getProtocolAndNetworkIdentifier, ProtocolService } from '@airgap/angular-core'\nimport { ICoinProtocol, ProtocolSymbols } from '@airgap/coinlib-core'\nimport { Component } from '@angular/core'\nimport { ActivatedRoute, Router } from '@angular/router'\n\nimport { DataServiceKey } from '../../services/data/data.service'\nimport { WalletStorageKey, WalletStorageService } from '../../services/storage/storage'\nimport { GenericSubProtocolSymbol } from '../../types/GenericProtocolSymbols'\n\n@Component({\n  selector: 'page-sub-account-add-generic',\n  templateUrl: 'sub-account-add-generic.html',\n  styleUrls: ['./sub-account-add-generic.scss']\n})\nexport class SubAccountAddGenericPage {\n  public readonly GenericSubProtocolSymbol: typeof GenericSubProtocolSymbol = GenericSubProtocolSymbol\n\n  public readonly protocolID: ProtocolSymbols\n  public readonly networkID: string | undefined\n  public readonly genericSubProtocolType: GenericSubProtocolSymbol\n\n  public readonly genericSubProtocolName: string\n\n  public protocol: ICoinProtocol | undefined\n\n  constructor(\n    private readonly route: ActivatedRoute,\n    private readonly router: Router,\n    private readonly protocolService: ProtocolService,\n    private readonly storage: WalletStorageService\n  ) {\n    this.protocolID = this.route.snapshot.params.protocolID\n    this.networkID = this.route.snapshot.params.networkID\n    this.genericSubProtocolType = this.route.snapshot.params.genericSubProtocolType\n\n    this.genericSubProtocolName = `add-generic-sub-account.${this.genericSubProtocolType}.name`\n  }\n\n  public saveProtocol(protocol: ICoinProtocol): void {\n    this.protocol = protocol\n  }\n\n  public async addGenericSubAccount(): Promise<void> {\n    if (!this.protocol) {\n      return\n    }\n\n    await this.saveGenericProtocol(this.protocol)\n\n    this.router\n      .navigateByUrl(`/sub-account-import/${DataServiceKey.PROTOCOL}/${this.protocol.identifier}/${this.protocol.options.network.identifier}`)\n      .catch((err) => console.error(err))\n  }\n\n  private async saveGenericProtocol(protocol: ICoinProtocol): Promise<void> {\n    const protocolNetworkIdentifier = getProtocolAndNetworkIdentifier(protocol)\n\n    await Promise.all([\n      this.protocolService.addActiveSubProtocols(protocol),\n      this.storage.get(WalletStorageKey.GENERIC_SUBPROTOCOLS).then((genericSubProtocols) => {\n        return this.storage.set(\n          WalletStorageKey.GENERIC_SUBPROTOCOLS,\n          Object.assign(genericSubProtocols, { [protocolNetworkIdentifier]: protocol.options })\n        )\n      })\n    ])\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <ion-toolbar>\n      <ion-buttons slot=\"start\">\n        <ion-back-button defaultHref=\"/\"></ion-back-button>\n      </ion-buttons>\n      <ion-title>\n        {{ 'add-generic-sub-account.title' | translate: { genericSubProtocolName: genericSubProtocolName | translate } }}\n      </ion-title>\n    </ion-toolbar>\n  </ion-grid>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-grid fixed=\"true\" class=\"ion-no-padding\">\n    <ng-container [ngSwitch]=\"genericSubProtocolType\">\n      <tezos-fa-form *ngSwitchCase=\"GenericSubProtocolSymbol.XTZ_FA\" (protocol)=\"saveProtocol($event)\"></tezos-fa-form>\n      <ng-container *ngSwitchDefault>\n        <empty-state [text]=\"'add-generic-sub-account.unsupported_text' | translate\" [imageName]=\"'no-imports.svg'\"></empty-state>\n      </ng-container>\n    </ng-container>\n  </ion-grid>\n\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n    <ion-button shape=\"round\" color=\"secondary\" (click)=\"addGenericSubAccount()\" [disabled]=\"protocol === undefined\">\n      <ion-icon slot=\"start\" name=\"add\"></ion-icon>\n      {{ 'add-generic-sub-account.add-button_label' | translate }}\n    </ion-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}