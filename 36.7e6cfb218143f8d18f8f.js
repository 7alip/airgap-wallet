(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{Q4oi:function(t,o,e){"use strict";e.r(o),e.d(o,"SubAccountImportPageModule",function(){return W});var i=e("ofXK"),n=e("3Pt+"),r=e("tyNb"),c=e("TEn/"),a=e("sYmb"),s=e("j1ZV"),b=e("mrSG"),l=e("138U"),u=e("RKiA"),p=e("lJxs"),d=e("1y+R"),f=e("QMTT"),h=e("57MG"),P=e("hPkG"),m=e("fXoL"),g=e("F07p"),v=e("1Mpf");function I(t,o){if(1&t){var e=m.Rb();m.Qb(0,"ion-list",11),m.Qb(1,"portfolio-item",12),m.Yb("click",function(){m.oc(e);var t=o.$implicit;return m.ac(2).importWallet(t)}),m.Pb(),m.Pb()}if(2&t){var i=o.$implicit;m.Ab(1),m.gc("wallet",i)}}var y=function(t){return{tokenName:t}};function w(t,o){if(1&t&&(m.Mb(0,"empty-state",13),m.bc(1,"translate")),2&t){var e=m.ac(2);m.gc("text",m.dc(1,2,"sub-account-import.empty_text",m.kc(5,y,e.subProtocol.name)))("imageName","no-imports.svg")}}var k=function(t){return{subProtocolName:t}},A=function(t){return{typeLabel:t}};function L(t,o){if(1&t){var e=m.Rb();m.Qb(0,"ion-grid",1),m.Mb(1,"p",5),m.bc(2,"translate"),m.uc(3,I,2,1,"ion-list",6),m.uc(4,w,2,7,"empty-state",7),m.Qb(5,"ion-fab",8),m.Qb(6,"ion-button",9),m.Yb("click",function(){return m.oc(e),m.ac().importWallets()}),m.Mb(7,"ion-icon",10),m.wc(8),m.bc(9,"translate"),m.bc(10,"translate"),m.Pb(),m.Pb(),m.Pb()}if(2&t){var i=m.ac();m.Ab(1),m.gc("innerHTML",m.dc(2,5,"sub-account-import.text",m.kc(13,k,i.subProtocol.name)),m.pc),m.Ab(2),m.gc("ngForOf",i.subWallets),m.Ab(1),m.gc("ngIf",0===i.subWallets.length),m.Ab(2),m.gc("disabled",0===i.subWallets.length),m.Ab(2),m.yc(" ",m.dc(9,8,"sub-account-import.import-all_label",m.kc(15,A,m.cc(10,11,i.typeLabel)))," ")}}var O=function(){function t(t,o,e,i,n,r){var c,a=this;this.router=t,this.route=o,this.accountProvider=e,this.priceService=i,this.protocolService=n,this.typeLabel="",this.subWallets=[],void 0!==(c=r.getData(d.b.PROTOCOL))?(this.subProtocolIdentifier=c.subProtocolIdentifier,this.networkIdentifier=c.networkIdentifier,this.protocolService.getProtocol(this.subProtocolIdentifier,this.networkIdentifier).then(function(t){a.subProtocol=t})):(this.subProtocolIdentifier=this.route.snapshot.params.protocolID,this.networkIdentifier=this.route.snapshot.params.networkID,this.protocolService.getProtocol(this.subProtocolIdentifier,this.networkIdentifier).then(function(t){a.subProtocol=t})),this.accountProvider.wallets.pipe(Object(p.a)(function(t){return t.filter(function(t){return t.protocol.identifier===Object(l.I)(a.subProtocolIdentifier)&&t.protocol.options.network.type===u.NetworkType.MAINNET})})).subscribe(function(t){var o=t.map(function(t){return Object(b.b)(a,void 0,void 0,function(){var o,e;return Object(b.e)(this,function(i){switch(i.label){case 0:return this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(t.publicKey,this.subProtocolIdentifier)?[3,2]:[4,this.protocolService.getProtocol(this.subProtocolIdentifier)];case 1:return o=i.sent(),(e=new u.AirGapMarketWallet(o,t.publicKey,t.isExtendedPublicKey,t.derivationPath,this.priceService)).addresses=t.addresses,this.subWallets.push(e),[2,e.synchronize()];case 2:return[2]}})})});Promise.all(o).then(function(){return a.accountProvider.triggerWalletChanged()}).catch(Object(P.b)(P.a.COINLIB))})}return t.prototype.importWallets=function(){var t=this;this.subWallets.forEach(function(o){t.accountProvider.addWallet(o).catch(Object(P.b)(P.a.WALLET_PROVIDER))}),this.popToRoot()},t.prototype.importWallet=function(t){this.accountProvider.addWallet(t).catch(Object(P.b)(P.a.WALLET_PROVIDER)),this.popToRoot()},t.prototype.popToRoot=function(){this.router.navigateByUrl("/tabs/portfolio").catch(Object(P.b)(P.a.NAVIGATION))},t.\u0275fac=function(o){return new(o||t)(m.Lb(r.g),m.Lb(r.a),m.Lb(h.a),m.Lb(f.a),m.Lb(l.y),m.Lb(d.a))},t.\u0275cmp=m.Fb({type:t,selectors:[["page-sub-account-import"]],decls:10,vars:4,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["fixed","true","class","ion-no-padding",4,"ngIf"],[1,"ion-padding-horizontal",3,"innerHTML"],["lines","none","class","ion-margin-top",4,"ngFor","ngForOf"],[3,"text","imageName",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["shape","round","color","secondary",3,"disabled","click"],["slot","start","name","add"],["lines","none",1,"ion-margin-top"],["tappable","",3,"wallet","click"],[3,"text","imageName"]],template:function(t,o){1&t&&(m.Qb(0,"ion-header",0),m.Qb(1,"ion-grid",1),m.Qb(2,"ion-toolbar"),m.Qb(3,"ion-buttons",2),m.Mb(4,"ion-back-button",3),m.Pb(),m.Qb(5,"ion-title"),m.wc(6),m.bc(7,"translate"),m.Pb(),m.Pb(),m.Pb(),m.Pb(),m.Qb(8,"ion-content"),m.uc(9,L,11,17,"ion-grid",4),m.Pb()),2&t&&(m.Ab(6),m.xc(m.cc(7,2,"sub-account-import.title")),m.Ab(3),m.gc("ngIf",o.subProtocol))},directives:[c.v,c.u,c.hb,c.j,c.f,c.g,c.fb,c.q,i.n,i.m,c.r,c.i,c.w,c.F,g.a,v.a],pipes:[a.c],encapsulation:2}),t}(),W=function(){function t(){}return t.\u0275mod=m.Jb({type:t}),t.\u0275inj=m.Ib({factory:function(o){return new(o||t)},imports:[[c.ib,i.c,n.e,s.a,a.b,r.j.forChild([{path:"",component:O}])]]}),t}()}}]);