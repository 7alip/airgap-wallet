(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{VPfA:function(n,e,t){"use strict";t.r(e),t.d(e,"AccountImportLedgerOnboardingPageModule",function(){return h});var o=t("ofXK"),i=t("3Pt+"),r=t("tyNb"),c=t("TEn/"),a=t("sYmb"),s=t("j1ZV"),g=t("mrSG"),d=t("RKiA"),b=t("0pct"),l=t("1y+R"),u=t("z26V"),p=t("hPkG"),m=t("fXoL"),_=t("138U"),_c0=function(n){return{protocolName:n}};function AccountImportLedgerOnboardingPage_ion_title_5_Template(n,e){if(1&n&&(m.Ob(0,"ion-title"),m.Kb(1,"span",13),m.Zb(2,"translate"),m.Nb()),2&n){var t=m.Yb();m.yb(1),m.ec("innerHTML",m.bc(2,1,"account-import-ledger-onboarding.title",m.ic(4,_c0,t.protocol.name)),m.nc)}}function AccountImportLedgerOnboardingPage_p_8_Template(n,e){if(1&n&&(m.Kb(0,"p",14),m.Zb(1,"translate")),2&n){var t=m.Yb();m.ec("innerHTML",m.bc(1,1,"account-import-ledger-onboarding.text",m.ic(4,_c0,t.protocol.name)),m.nc)}}function AccountImportLedgerOnboardingPage_ng_container_12_Template(n,e){1&n&&(m.Mb(0),m.Kb(1,"ion-spinner",2),m.Ob(2,"ion-label"),m.Ob(3,"h3"),m.vc(4),m.Zb(5,"translate"),m.Nb(),m.Nb(),m.Lb()),2&n&&(m.yb(4),m.wc(m.ac(5,1,"account-import-ledger-onboarding.status-card.connecting")))}function AccountImportLedgerOnboardingPage_ng_container_13_Template(n,e){if(1&n&&(m.Mb(0),m.Kb(1,"ion-icon",15),m.Ob(2,"ion-label",16),m.Ob(3,"h3"),m.vc(4),m.Zb(5,"translate"),m.Nb(),m.Ob(6,"p"),m.vc(7),m.Zb(8,"translate"),m.Nb(),m.Nb(),m.Lb()),2&n){var t=m.Yb();m.yb(4),m.xc(" ",m.ac(5,2,"account-import-ledger-onboarding.status-card.error.header")," "),m.yb(3),m.wc(m.bc(8,4,"account-import-ledger-onboarding.status-card.error.message",m.ic(7,_c0,t.protocol.name)))}}function AccountImportLedgerOnboardingPage_ng_container_14_Template(n,e){1&n&&(m.Mb(0),m.Kb(1,"ion-icon",17),m.Ob(2,"ion-label",16),m.Ob(3,"h3"),m.vc(4),m.Zb(5,"translate"),m.Nb(),m.Nb(),m.Lb()),2&n&&(m.yb(4),m.wc(m.ac(5,1,"account-import-ledger-onboarding.status-card.success")))}function AccountImportLedgerOnboardingPage_ng_container_15_Template(n,e){if(1&n){var t=m.Pb();m.Mb(0),m.Ob(1,"ion-button",18),m.Wb("click",function AccountImportLedgerOnboardingPage_ng_container_15_Template_ion_button_click_1_listener(){return m.mc(t),m.Yb().retry()}),m.vc(2),m.Zb(3,"translate"),m.Nb(),m.Lb()}2&n&&(m.yb(2),m.xc(" ",m.ac(3,1,"account-import-ledger-onboarding.status-card.retry_button")," "))}function AccountImportLedgerOnboardingPage_ng_container_18_ion_slide_1_Template(n,e){if(1&n&&(m.Ob(0,"ion-slide",20),m.Ob(1,"div",21),m.Kb(2,"img",22),m.Ob(3,"ion-text"),m.Kb(4,"p",23),m.Zb(5,"translate"),m.Nb(),m.Nb(),m.Nb()),2&n){var t=e.$implicit,o=m.Yb(2);m.yb(2),m.ec("src","./assets/img/"+t[0],m.oc),m.yb(2),m.ec("innerHTML",m.bc(5,2,t[1],m.ic(5,_c0,o.protocol.name)),m.nc)}}function AccountImportLedgerOnboardingPage_ng_container_18_Template(n,e){if(1&n&&(m.Mb(0),m.tc(1,AccountImportLedgerOnboardingPage_ng_container_18_ion_slide_1_Template,6,7,"ion-slide",19),m.Lb()),2&n){var t=m.Yb();m.yb(1),m.ec("ngForOf",t.slideAssets)}}function AccountImportLedgerOnboardingPage_ion_button_23_Template(n,e){if(1&n){var t=m.Pb();m.Ob(0,"ion-button",18),m.Wb("click",function AccountImportLedgerOnboardingPage_ion_button_23_Template_ion_button_click_0_listener(){return m.mc(t),m.Yb().showPrevSlide()}),m.Kb(1,"ion-icon",24),m.vc(2),m.Zb(3,"translate"),m.Nb()}2&n&&(m.yb(2),m.xc(" ",m.ac(3,1,"account-import-ledger-onboarding.back_button")," "))}function AccountImportLedgerOnboardingPage_ion_button_24_Template(n,e){if(1&n){var t=m.Pb();m.Ob(0,"ion-button",18),m.Wb("click",function AccountImportLedgerOnboardingPage_ion_button_24_Template_ion_button_click_0_listener(){return m.mc(t),m.Yb().finish()}),m.vc(1),m.Zb(2,"translate"),m.Nb()}2&n&&(m.yb(1),m.xc(" ",m.ac(2,1,"account-import-ledger-onboarding.done_button")," "))}function AccountImportLedgerOnboardingPage_ion_button_25_Template(n,e){if(1&n){var t=m.Pb();m.Ob(0,"ion-button",18),m.Wb("click",function AccountImportLedgerOnboardingPage_ion_button_25_Template_ion_button_click_0_listener(){return m.mc(t),m.Yb().showNextSlide()}),m.vc(1),m.Zb(2,"translate"),m.Kb(3,"ion-icon",25),m.Nb()}2&n&&(m.yb(1),m.xc(" ",m.ac(2,1,"account-import-ledger-onboarding.next_button")," "))}var O=function(){function AccountImportLedgerOnboardingPage(n,e,t,o,i){var r=this;this.route=n,this.router=e,this.protocolService=t,this.dataService=o,this.ledgerService=i,this.slideAssets=[],this.slideOpts={initialSlide:0,speed:400,pagination:{el:".swiper-pagination",type:"custom",renderCustom:function(n,e,t){return r.customProgressBar(e,t)}}},this.canSlidePrev=!1,this.canSlideNext=!0,this.canFinish=!1,this.isLoading=!0,this.isSuccess=void 0,this.isConnected=!1;var c=this.route.snapshot.params.protocolID;this.protocol=Object(d.getProtocolByIdentifier)(c),this.init()}return AccountImportLedgerOnboardingPage.prototype.showPrevSlide=function(){return Object(g.b)(this,void 0,void 0,function(){return Object(g.e)(this,function(n){switch(n.label){case 0:return[4,this.slides.slidePrev()];case 1:return n.sent(),[2]}})})},AccountImportLedgerOnboardingPage.prototype.showNextSlide=function(){return Object(g.b)(this,void 0,void 0,function(){return Object(g.e)(this,function(n){switch(n.label){case 0:return[4,this.slides.slideNext()];case 1:return n.sent(),[2]}})})},AccountImportLedgerOnboardingPage.prototype.ionSlideDidChange=function(){var n=this;this.slides.getActiveIndex().then(function(e){var t=e===n.slideAssets.length-1;n.canSlidePrev=e>0,n.canSlideNext=!t,n.canFinish=t,n.importFromLedger()}).catch(Object(p.b)(p.a.OTHER))},AccountImportLedgerOnboardingPage.prototype.retry=function(){this.isLoading=!0,this.isSuccess=void 0,this.importFromLedger()},AccountImportLedgerOnboardingPage.prototype.finish=function(){this.router.navigateByUrl("/tabs/portfolio",{replaceUrl:!0}).catch(Object(p.b)(p.a.NAVIGATION))},AccountImportLedgerOnboardingPage.prototype.customProgressBar=function(n,e){var t="<div class='swiper-pagination-progressbar' style='height: 4px; top: 6px; width: calc(100% - 32px);left: 16px;'>";return(t+="<span class='swiper-pagination-progressbar-fill' style='transform: translate3d(0px, 0px, 0px) scaleX("+n/e+") scaleY(1); transition-duration: 300ms;'></span>")+"</span></div>"},AccountImportLedgerOnboardingPage.prototype.init=function(){return Object(g.b)(this,void 0,void 0,function(){var n,e;return Object(g.e)(this,function(t){switch(t.label){case 0:return n=this.route.snapshot.params.protocolID,e=this,[4,this.protocolService.getProtocol(n)];case 1:return e.protocol=t.sent(),this.slideAssets=[["ledger_app_connected.svg","account-import-ledger-onboarding.slides.slide-1"],["ledger_app_"+this.protocol.identifier+".svg","account-import-ledger-onboarding.slides.slide-2"],["ledger_app_confirm.svg","account-import-ledger-onboarding.slides.slide-3"]],this.importFromLedger(),[2]}})})},AccountImportLedgerOnboardingPage.prototype.importFromLedger=function(){return Object(g.b)(this,void 0,void 0,function(){var n=this;return Object(g.e)(this,function(e){return this.isSuccess||!this.protocol?[2]:(this.importPromise||(this.importPromise=Object(b.a)(this.connectWithLedger(),{maxRetries:4,interval:300}).then(function(){return Object(b.a)(n.ledgerService.importWallet(n.protocol.identifier).then(function(e){n.isLoading=!1,n.isSuccess=!0,n.dataService.setData(l.b.WALLET,e),n.router.navigateByUrl("/account-import/"+l.b.WALLET).catch(Object(p.b)(p.a.NAVIGATION))}),{maxRetries:1,interval:300})}).catch(function(e){console.warn(e),n.canFinish&&(n.isLoading=!1,n.isSuccess=!1)}).finally(function(){n.importPromise=void 0})),[2,this.importPromise])})})},AccountImportLedgerOnboardingPage.prototype.connectWithLedger=function(){return Object(g.b)(this,void 0,void 0,function(){var n=this;return Object(g.e)(this,function(e){return this.isConnected||!this.protocol?[2]:(this.isLoading=!0,[2,this.ledgerService.openConnection(this.protocol.identifier).then(function(){n.isConnected=!0})])})})},AccountImportLedgerOnboardingPage.\u0275fac=function AccountImportLedgerOnboardingPage_Factory(n){return new(n||AccountImportLedgerOnboardingPage)(m.Jb(r.a),m.Jb(r.g),m.Jb(_.x),m.Jb(l.a),m.Jb(u.a))},AccountImportLedgerOnboardingPage.\u0275cmp=m.Db({type:AccountImportLedgerOnboardingPage,selectors:[["page-account-import-ledger-onboarding"]],viewQuery:function AccountImportLedgerOnboardingPage_Query(n,e){var t;1&n&&m.rc(c.X,!0),2&n&&m.kc(t=m.Xb())&&(e.slides=t.first)},decls:26,vars:11,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[4,"ngIf"],["class","ion-padding-horizontal",3,"innerHTML",4,"ngIf"],[1,"ion-margin"],["lines","none",1,"ion-no-padding"],["pager","true",3,"options","ionSlideDidChange"],["slides",""],[1,"ion-no-padding"],["slot","end"],["fill","clear","color","primary",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"ion-padding-horizontal",3,"innerHTML"],["name","alert-circle-outline","slot","start","size","large","color","warning"],[1,"ion-text-wrap"],["name","checkmark-circle-outline","slot","start","size","large","color","success"],["fill","clear","color","primary",3,"click"],["class","ion-padding-horizontal",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal"],[1,"slide-zoom"],[3,"src"],[1,"ion-text-left",3,"innerHTML"],["name","arrow-back"],["name","arrow-forward"]],template:function AccountImportLedgerOnboardingPage_Template(n,e){1&n&&(m.Ob(0,"ion-header",0),m.Ob(1,"ion-grid",1),m.Ob(2,"ion-toolbar"),m.Ob(3,"ion-buttons",2),m.Kb(4,"ion-back-button",3),m.Nb(),m.tc(5,AccountImportLedgerOnboardingPage_ion_title_5_Template,3,6,"ion-title",4),m.Nb(),m.Nb(),m.Nb(),m.Ob(6,"ion-content"),m.Ob(7,"ion-grid",1),m.tc(8,AccountImportLedgerOnboardingPage_p_8_Template,2,6,"p",5),m.Ob(9,"ion-card",6),m.Ob(10,"ion-card-content"),m.Ob(11,"ion-item",7),m.tc(12,AccountImportLedgerOnboardingPage_ng_container_12_Template,6,3,"ng-container",4),m.tc(13,AccountImportLedgerOnboardingPage_ng_container_13_Template,9,9,"ng-container",4),m.tc(14,AccountImportLedgerOnboardingPage_ng_container_14_Template,6,3,"ng-container",4),m.Nb(),m.tc(15,AccountImportLedgerOnboardingPage_ng_container_15_Template,4,3,"ng-container",4),m.Nb(),m.Nb(),m.Ob(16,"ion-slides",8,9),m.Wb("ionSlideDidChange",function AccountImportLedgerOnboardingPage_Template_ion_slides_ionSlideDidChange_16_listener(){return e.ionSlideDidChange()}),m.tc(18,AccountImportLedgerOnboardingPage_ng_container_18_Template,2,1,"ng-container",4),m.Nb(),m.Nb(),m.Nb(),m.Ob(19,"ion-footer",0),m.Ob(20,"ion-grid",1),m.Ob(21,"ion-toolbar",10),m.Ob(22,"ion-buttons",11),m.tc(23,AccountImportLedgerOnboardingPage_ion_button_23_Template,4,3,"ion-button",12),m.tc(24,AccountImportLedgerOnboardingPage_ion_button_24_Template,3,3,"ion-button",12),m.tc(25,AccountImportLedgerOnboardingPage_ion_button_25_Template,4,3,"ion-button",12),m.Nb(),m.Nb(),m.Nb(),m.Nb()),2&n&&(m.yb(5),m.ec("ngIf",e.protocol),m.yb(3),m.ec("ngIf",e.protocol),m.yb(4),m.ec("ngIf",e.isLoading),m.yb(1),m.ec("ngIf",e.protocol&&!e.isLoading&&void 0!==e.isSuccess&&!e.isSuccess),m.yb(1),m.ec("ngIf",!e.isLoading&&e.isSuccess),m.yb(1),m.ec("ngIf",!e.isLoading&&void 0!==e.isSuccess&&!e.isSuccess),m.yb(1),m.ec("options",e.slideOpts),m.yb(2),m.ec("ngIf",e.protocol),m.yb(5),m.ec("ngIf",e.canSlidePrev),m.yb(1),m.ec("ngIf",e.canFinish),m.yb(1),m.ec("ngIf",e.canSlideNext))},directives:[c.v,c.u,c.hb,c.j,c.f,c.g,o.n,c.q,c.k,c.l,c.A,c.X,c.t,c.fb,c.Y,c.E,c.w,c.i,o.m,c.W,c.db],pipes:[a.c],styles:["ion-slides[_ngcontent-%COMP%]{height:calc(100% - 72px)}@media (min-width:768px){ion-slides[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vw}}.swiper-slide[_ngcontent-%COMP%]{font-size:1rem}.slide-zoom[_ngcontent-%COMP%]{height:100%;padding:64px 0 0}"]}),AccountImportLedgerOnboardingPage}(),h=function(){function AccountImportLedgerOnboardingPageModule(){}return AccountImportLedgerOnboardingPageModule.\u0275mod=m.Hb({type:AccountImportLedgerOnboardingPageModule}),AccountImportLedgerOnboardingPageModule.\u0275inj=m.Gb({factory:function AccountImportLedgerOnboardingPageModule_Factory(n){return new(n||AccountImportLedgerOnboardingPageModule)},imports:[[c.ib,o.c,i.e,s.a,a.b,r.j.forChild([{path:"",component:O}])]]}),AccountImportLedgerOnboardingPageModule}()}}]);