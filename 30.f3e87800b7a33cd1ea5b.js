(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{VPfA:function(t,n,i){"use strict";i.r(n),i.d(n,"AccountImportLedgerOnboardingPageModule",(function(){return C}));var o=i("ofXK"),e=i("3Pt+"),r=i("tyNb"),c=i("TEn/"),s=i("sYmb"),a=i("j1ZV"),b=i("mrSG"),d=i("IVSH"),l=i("0pct"),u=i("1y+R"),p=i("z26V"),g=i("hPkG"),h=i("fXoL"),f=i("138U"),m=function(t){return{protocolName:t}};function v(t,n){if(1&t&&(h.Nb(0,"ion-title"),h.Jb(1,"span",13),h.Yb(2,"translate"),h.Mb()),2&t){var i=h.Xb();h.yb(1),h.dc("innerHTML",h.ac(2,1,"account-import-ledger-onboarding.title",h.hc(4,m,i.protocol.name)),h.mc)}}function y(t,n){if(1&t&&(h.Jb(0,"p",14),h.Yb(1,"translate")),2&t){var i=h.Xb();h.dc("innerHTML",h.ac(1,1,"account-import-ledger-onboarding.text",h.hc(4,m,i.protocol.name)),h.mc)}}function M(t,n){1&t&&(h.Lb(0),h.Jb(1,"ion-spinner",2),h.Nb(2,"ion-label"),h.Nb(3,"h3"),h.uc(4),h.Yb(5,"translate"),h.Mb(),h.Mb(),h.Kb()),2&t&&(h.yb(4),h.vc(h.Zb(5,1,"account-import-ledger-onboarding.status-card.connecting")))}function N(t,n){if(1&t&&(h.Lb(0),h.Jb(1,"ion-icon",15),h.Nb(2,"ion-label",16),h.Nb(3,"h3"),h.uc(4),h.Yb(5,"translate"),h.Mb(),h.Nb(6,"p"),h.uc(7),h.Yb(8,"translate"),h.Mb(),h.Mb(),h.Kb()),2&t){var i=h.Xb();h.yb(4),h.wc(" ",h.Zb(5,2,"account-import-ledger-onboarding.status-card.error.header")," "),h.yb(3),h.vc(h.ac(8,4,"account-import-ledger-onboarding.status-card.error.message",h.hc(7,m,i.protocol.name)))}}function w(t,n){1&t&&(h.Lb(0),h.Jb(1,"ion-icon",17),h.Nb(2,"ion-label",16),h.Nb(3,"h3"),h.uc(4),h.Yb(5,"translate"),h.Mb(),h.Mb(),h.Kb()),2&t&&(h.yb(4),h.vc(h.Zb(5,1,"account-import-ledger-onboarding.status-card.success")))}function O(t,n){if(1&t){var i=h.Ob();h.Lb(0),h.Nb(1,"ion-button",18),h.Vb("click",(function(){return h.lc(i),h.Xb().retry()})),h.uc(2),h.Yb(3,"translate"),h.Mb(),h.Kb()}2&t&&(h.yb(2),h.wc(" ",h.Zb(3,1,"account-import-ledger-onboarding.status-card.retry_button")," "))}function S(t,n){if(1&t&&(h.Nb(0,"ion-slide",20),h.Nb(1,"div",21),h.Jb(2,"img",22),h.Nb(3,"ion-text"),h.Jb(4,"p",23),h.Yb(5,"translate"),h.Mb(),h.Mb(),h.Mb()),2&t){var i=n.$implicit,o=h.Xb(2);h.yb(2),h.dc("src","./assets/img/"+i[0],h.nc),h.yb(2),h.dc("innerHTML",h.ac(5,2,i[1],h.hc(5,m,o.protocol.name)),h.mc)}}function L(t,n){if(1&t&&(h.Lb(0),h.sc(1,S,6,7,"ion-slide",19),h.Kb()),2&t){var i=h.Xb();h.yb(1),h.dc("ngForOf",i.slideAssets)}}function I(t,n){if(1&t){var i=h.Ob();h.Nb(0,"ion-button",18),h.Vb("click",(function(){return h.lc(i),h.Xb().showPrevSlide()})),h.Jb(1,"ion-icon",24),h.uc(2),h.Yb(3,"translate"),h.Mb()}2&t&&(h.yb(2),h.wc(" ",h.Zb(3,1,"account-import-ledger-onboarding.back_button")," "))}function x(t,n){if(1&t){var i=h.Ob();h.Nb(0,"ion-button",18),h.Vb("click",(function(){return h.lc(i),h.Xb().finish()})),h.uc(1),h.Yb(2,"translate"),h.Mb()}2&t&&(h.yb(1),h.wc(" ",h.Zb(2,1,"account-import-ledger-onboarding.done_button")," "))}function P(t,n){if(1&t){var i=h.Ob();h.Nb(0,"ion-button",18),h.Vb("click",(function(){return h.lc(i),h.Xb().showNextSlide()})),h.uc(1),h.Yb(2,"translate"),h.Jb(3,"ion-icon",25),h.Mb()}2&t&&(h.yb(1),h.wc(" ",h.Zb(2,1,"account-import-ledger-onboarding.next_button")," "))}var j=function(){function t(t,n,i,o,e){var r=this;this.route=t,this.router=n,this.protocolService=i,this.dataService=o,this.ledgerService=e,this.slideAssets=[],this.slideOpts={initialSlide:0,speed:400,pagination:{el:".swiper-pagination",type:"custom",renderCustom:function(t,n,i){return r.customProgressBar(n,i)}}},this.canSlidePrev=!1,this.canSlideNext=!0,this.canFinish=!1,this.isLoading=!0,this.isSuccess=void 0,this.isConnected=!1;var c=this.route.snapshot.params.protocolID;this.protocol=Object(d.getProtocolByIdentifier)(c),this.init()}return t.prototype.showPrevSlide=function(){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return[4,this.slides.slidePrev()];case 1:return t.sent(),[2]}}))}))},t.prototype.showNextSlide=function(){return Object(b.b)(this,void 0,void 0,(function(){return Object(b.e)(this,(function(t){switch(t.label){case 0:return[4,this.slides.slideNext()];case 1:return t.sent(),[2]}}))}))},t.prototype.ionSlideDidChange=function(){var t=this;this.slides.getActiveIndex().then((function(n){var i=n===t.slideAssets.length-1;t.canSlidePrev=n>0,t.canSlideNext=!i,t.canFinish=i,t.importFromLedger()})).catch(Object(g.b)(g.a.OTHER))},t.prototype.retry=function(){this.isLoading=!0,this.isSuccess=void 0,this.importFromLedger()},t.prototype.finish=function(){this.router.navigateByUrl("/tabs/portfolio",{replaceUrl:!0}).catch(Object(g.b)(g.a.NAVIGATION))},t.prototype.customProgressBar=function(t,n){var i="<div class='swiper-pagination-progressbar' style='height: 4px; top: 6px; width: calc(100% - 32px);left: 16px;'>";return(i+="<span class='swiper-pagination-progressbar-fill' style='transform: translate3d(0px, 0px, 0px) scaleX("+t/n+") scaleY(1); transition-duration: 300ms;'></span>")+"</span></div>"},t.prototype.init=function(){return Object(b.b)(this,void 0,void 0,(function(){var t;return Object(b.e)(this,(function(n){switch(n.label){case 0:return t=this,[4,this.protocolService.getProtocol(this.route.snapshot.params.protocolID)];case 1:return t.protocol=n.sent(),this.slideAssets=[["ledger_app_connected.svg","account-import-ledger-onboarding.slides.slide-1"],["ledger_app_"+this.protocol.identifier+".svg","account-import-ledger-onboarding.slides.slide-2"],["ledger_app_confirm.svg","account-import-ledger-onboarding.slides.slide-3"]],this.importFromLedger(),[2]}}))}))},t.prototype.importFromLedger=function(){return Object(b.b)(this,void 0,void 0,(function(){var t=this;return Object(b.e)(this,(function(n){return this.isSuccess||!this.protocol?[2]:(this.importPromise||(this.importPromise=Object(l.a)(this.connectWithLedger(),{maxRetries:4,interval:300}).then((function(){return Object(l.a)(t.ledgerService.importWallet(t.protocol.identifier).then((function(n){t.isLoading=!1,t.isSuccess=!0,t.dataService.setData(u.b.WALLET,n),t.router.navigateByUrl("/account-import/"+u.b.WALLET).catch(Object(g.b)(g.a.NAVIGATION))})),{maxRetries:1,interval:300})})).catch((function(n){console.warn(n),t.canFinish&&(t.isLoading=!1,t.isSuccess=!1)})).finally((function(){t.importPromise=void 0}))),[2,this.importPromise])}))}))},t.prototype.connectWithLedger=function(){return Object(b.b)(this,void 0,void 0,(function(){var t=this;return Object(b.e)(this,(function(n){return this.isConnected||!this.protocol?[2]:(this.isLoading=!0,[2,this.ledgerService.openConnection(this.protocol.identifier).then((function(){t.isConnected=!0}))])}))}))},t.\u0275fac=function(n){return new(n||t)(h.Ib(r.a),h.Ib(r.g),h.Ib(f.y),h.Ib(u.a),h.Ib(p.a))},t.\u0275cmp=h.Cb({type:t,selectors:[["page-account-import-ledger-onboarding"]],viewQuery:function(t,n){var i;1&t&&h.qc(c.nb,!0),2&t&&h.jc(i=h.Wb())&&(n.slides=i.first)},decls:26,vars:11,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[4,"ngIf"],["class","ion-padding-horizontal",3,"innerHTML",4,"ngIf"],[1,"ion-margin"],["lines","none",1,"ion-no-padding"],["pager","true",3,"options","ionSlideDidChange"],["slides",""],[1,"ion-no-padding"],["slot","end"],["fill","clear","color","primary",3,"click",4,"ngIf"],[3,"innerHTML"],[1,"ion-padding-horizontal",3,"innerHTML"],["name","alert-circle-outline","slot","start","size","large","color","warning"],[1,"ion-text-wrap"],["name","checkmark-circle-outline","slot","start","size","large","color","success"],["fill","clear","color","primary",3,"click"],["class","ion-padding-horizontal",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal"],[1,"slide-zoom"],[3,"src"],[1,"ion-text-left",3,"innerHTML"],["name","arrow-back"],["name","arrow-forward"]],template:function(t,n){1&t&&(h.Nb(0,"ion-header",0),h.Nb(1,"ion-grid",1),h.Nb(2,"ion-toolbar"),h.Nb(3,"ion-buttons",2),h.Jb(4,"ion-back-button",3),h.Mb(),h.sc(5,v,3,6,"ion-title",4),h.Mb(),h.Mb(),h.Mb(),h.Nb(6,"ion-content"),h.Nb(7,"ion-grid",1),h.sc(8,y,2,6,"p",5),h.Nb(9,"ion-card",6),h.Nb(10,"ion-card-content"),h.Nb(11,"ion-item",7),h.sc(12,M,6,3,"ng-container",4),h.sc(13,N,9,9,"ng-container",4),h.sc(14,w,6,3,"ng-container",4),h.Mb(),h.sc(15,O,4,3,"ng-container",4),h.Mb(),h.Mb(),h.Nb(16,"ion-slides",8,9),h.Vb("ionSlideDidChange",(function(){return n.ionSlideDidChange()})),h.sc(18,L,2,1,"ng-container",4),h.Mb(),h.Mb(),h.Mb(),h.Nb(19,"ion-footer",0),h.Nb(20,"ion-grid",1),h.Nb(21,"ion-toolbar",10),h.Nb(22,"ion-buttons",11),h.sc(23,I,4,3,"ion-button",12),h.sc(24,x,3,3,"ion-button",12),h.sc(25,P,4,3,"ion-button",12),h.Mb(),h.Mb(),h.Mb(),h.Mb()),2&t&&(h.yb(5),h.dc("ngIf",n.protocol),h.yb(3),h.dc("ngIf",n.protocol),h.yb(4),h.dc("ngIf",n.isLoading),h.yb(1),h.dc("ngIf",n.protocol&&!n.isLoading&&void 0!==n.isSuccess&&!n.isSuccess),h.yb(1),h.dc("ngIf",!n.isLoading&&n.isSuccess),h.yb(1),h.dc("ngIf",!n.isLoading&&void 0!==n.isSuccess&&!n.isSuccess),h.yb(1),h.dc("options",n.slideOpts),h.yb(2),h.dc("ngIf",n.protocol),h.yb(5),h.dc("ngIf",n.canSlidePrev),h.yb(1),h.dc("ngIf",n.canFinish),h.yb(1),h.dc("ngIf",n.canSlideNext))},directives:[c.A,c.z,c.yb,c.k,c.f,c.g,o.t,c.t,c.l,c.m,c.G,c.nb,c.y,c.wb,c.ob,c.M,c.B,c.j,o.s,c.mb,c.tb],pipes:[s.d],styles:["ion-slides[_ngcontent-%COMP%]{height:calc(100% - 72px)}@media (min-width:768px){ion-slides[_ngcontent-%COMP%]   .swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vw}}.swiper-slide[_ngcontent-%COMP%]{font-size:1rem}.slide-zoom[_ngcontent-%COMP%]{height:100%;padding:64px 0 0}"]}),t}(),C=function(){function t(){}return t.\u0275mod=h.Gb({type:t}),t.\u0275inj=h.Fb({factory:function(n){return new(n||t)},imports:[[c.Ab,o.c,e.h,a.a,s.c,r.k.forChild([{path:"",component:j}])]]}),t}()}}]);