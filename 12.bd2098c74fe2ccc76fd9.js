(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+hnQ":function(t,o,e){"use strict";e.r(o),e.d(o,"AccountAddPageModule",function(){return w});var r=e("ofXK"),c=e("3Pt+"),n=e("tyNb"),i=e("TEn/"),u=e("sYmb"),a=e("j1ZV"),s=e("mrSG"),l=e("RKiA"),b=e("14cC"),d=e("57MG"),f=e("1y+R"),p=e("z26V"),h=e("hPkG"),m=e("X9E/"),y=e("fXoL"),O=e("138U"),g=e("Bx04");function P(t,o){1&t&&(y.Ob(0,"ion-text",12),y.Ob(1,"p",13),y.vc(2),y.Zb(3,"translate"),y.Nb(),y.Nb()),2&t&&(y.yb(2),y.xc(" ",y.ac(3,1,"account-add.featured")," "))}function S(t,o){if(1&t){var e=y.Pb();y.Ob(0,"currency-item",14),y.Wb("click",function(){y.mc(e);var t=o.$implicit;return y.Yb().addAccount(t)}),y.Nb()}2&t&&y.ec("protocol",o.$implicit)}function A(t,o){if(1&t){var e=y.Pb();y.Ob(0,"currency-item",14),y.Wb("click",function(){y.mc(e);var t=o.$implicit;return y.Yb().addSubAccount(t)}),y.Nb()}2&t&&y.ec("protocol",o.$implicit)}function N(t,o){1&t&&(y.Ob(0,"ion-text",12),y.Ob(1,"p",13),y.vc(2),y.Zb(3,"translate"),y.Nb(),y.Nb()),2&t&&(y.yb(2),y.xc(" ",y.ac(3,1,"account-add.others")," "))}function v(t,o){if(1&t){var e=y.Pb();y.Ob(0,"currency-item",14),y.Wb("click",function(){y.mc(e);var t=o.$implicit;return y.Yb().addSubAccount(t)}),y.Nb()}2&t&&y.ec("protocol",o.$implicit)}var T=function(){function t(t,o,e,r,c,n){this.platform=t,this.accountProvider=o,this.protocolService=e,this.router=r,this.ledgerService=c,this.dataService=n,this.searchTerm="",this.supportedAccountProtocols=[],this.featuredSubAccountProtocols=[],this.otherSubAccountProtocols=[],this.filteredAccountProtocols=[],this.filteredFeaturedSubAccountProtocols=[],this.filteredOtherSubAccountProtocols=[],this.featuredSubProtocols=[l.SubProtocolSymbols.XTZ_KT,l.SubProtocolSymbols.XTZ_BTC,l.SubProtocolSymbols.XTZ_USD,l.SubProtocolSymbols.XTZ_STKR,l.SubProtocolSymbols.ETH_ERC20_XCHF]}return t.prototype.ionViewWillEnter=function(){return Object(s.b)(this,void 0,void 0,function(){var t,o,e,r,c,n=this;return Object(s.e)(this,function(i){switch(i.label){case 0:return t=this,[4,this.protocolService.getActiveProtocols()];case 1:return t.supportedAccountProtocols=i.sent().filter(function(t){return t.options.network.type===b.NetworkType.MAINNET}),r=(e=Array.prototype.concat).apply,c=[[]],[4,Promise.all(Object.values(l.MainProtocolSymbols).map(function(t){return n.protocolService.getSubProtocols(t)}))];case 2:return o=r.apply(e,c.concat([i.sent()])),this.featuredSubAccountProtocols=o.filter(function(t){return n.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT}),this.otherSubAccountProtocols=o.filter(function(t){return!n.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===b.NetworkType.MAINNET&&t.identifier!==l.SubProtocolSymbols.XTZ_KT}),this.filterProtocols(),[2]}})})},t.prototype.searchTermChanged=function(){this.filterProtocols()},t.prototype.filterProtocols=function(){var t=this.searchTerm.toLowerCase();this.filteredAccountProtocols=this.supportedAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)}),this.filteredFeaturedSubAccountProtocols=this.featuredSubAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)}),this.filteredOtherSubAccountProtocols=this.otherSubAccountProtocols.filter(function(o){return o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)})},t.prototype.addAccount=function(t){this.ledgerService.isProtocolSupported(t)&&this.platform.is("desktop")?this.showImportInteractionSelection(t):this.importFromVault(t)},t.prototype.addSubAccount=function(t){var o=t.identifier.split("-")[0];this.accountProvider.getWalletList().filter(function(e){return e.protocol.identifier===o&&e.protocol.options.network.identifier===t.options.network.identifier}).length>0?this.router.navigateByUrl("/sub-account-import/"+f.b.PROTOCOL+"/"+t.identifier+"/"+t.options.network.identifier).catch(function(t){return console.error(t)}):this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.showImportInteractionSelection=function(t){var o=this;this.dataService.setData(f.b.INTERACTION,{callback:function(e){switch(e){case m.a.VAULT:o.importFromVault(t);break;case m.a.LEDGER:o.importFromLedger(t);break;default:console.log("Unkonw import interaction type selected.")}}}),this.router.navigateByUrl("/account-import-interaction-selection/"+f.b.INTERACTION,{skipLocationChange:!0}).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.importFromLedger=function(t){return Object(s.b)(this,void 0,void 0,function(){return Object(s.e)(this,function(o){return this.router.navigateByUrl("/account-import-ledger-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION)),[2]})})},t.prototype.importFromVault=function(t){this.router.navigateByUrl("/account-import-onboarding/"+f.b.PROTOCOL+"/"+t.identifier).catch(Object(h.b)(h.a.NAVIGATION))},t.prototype.navigateToScan=function(){this.router.navigateByUrl("/tabs/scan").catch(Object(h.b)(h.a.NAVIGATION))},t.\u0275fac=function(o){return new(o||t)(y.Jb(i.pb),y.Jb(d.a),y.Jb(O.x),y.Jb(n.g),y.Jb(p.a),y.Jb(f.a))},t.\u0275cmp=y.Db({type:t,selectors:[["page-account-add"]],decls:21,vars:9,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["mode","md",3,"ngModel","ngModelChange","ionChange"],[1,"ion-padding"],["lines","none"],["color","primary",4,"ngIf"],[3,"protocol","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-more-coins-button","color","secondary",3,"click"],["name","barcode-outline"],["color","primary"],[1,"font--weight__bold"],[3,"protocol","click"]],template:function(t,o){1&t&&(y.Ob(0,"ion-header",0),y.Ob(1,"ion-grid",1),y.Ob(2,"ion-toolbar"),y.Ob(3,"ion-buttons",2),y.Kb(4,"ion-back-button",3),y.Nb(),y.Ob(5,"ion-title"),y.vc(6),y.Zb(7,"translate"),y.Nb(),y.Nb(),y.Ob(8,"ion-toolbar"),y.Ob(9,"ion-searchbar",4),y.Wb("ngModelChange",function(t){return o.searchTerm=t})("ionChange",function(){return o.searchTermChanged()}),y.Nb(),y.Nb(),y.Nb(),y.Nb(),y.Ob(10,"ion-content",5),y.Ob(11,"ion-grid",1),y.Ob(12,"ion-list",6),y.tc(13,P,4,3,"ion-text",7),y.tc(14,S,1,1,"currency-item",8),y.tc(15,A,1,1,"currency-item",8),y.tc(16,N,4,3,"ion-text",7),y.tc(17,v,1,1,"currency-item",8),y.Nb(),y.Nb(),y.Nb(),y.Ob(18,"ion-fab",9),y.Ob(19,"ion-fab-button",10),y.Wb("click",function(){return o.navigateToScan()}),y.Kb(20,"ion-icon",11),y.Nb(),y.Nb()),2&t&&(y.yb(6),y.wc(y.ac(7,7,"add-account.title")),y.yb(3),y.ec("ngModel",o.searchTerm),y.yb(4),y.ec("ngIf",o.filteredAccountProtocols.length>0||o.filteredFeaturedSubAccountProtocols.length>0),y.yb(1),y.ec("ngForOf",o.filteredAccountProtocols),y.yb(1),y.ec("ngForOf",o.filteredFeaturedSubAccountProtocols),y.yb(1),y.ec("ngIf",o.filteredOtherSubAccountProtocols.length>0),y.yb(1),y.ec("ngForOf",o.filteredOtherSubAccountProtocols))},directives:[i.v,i.u,i.hb,i.j,i.f,i.g,i.fb,i.S,i.ub,c.h,c.j,i.q,i.F,r.n,r.m,i.r,i.s,i.w,i.db,g.a],pipes:[u.c],styles:[".item__image[_ngcontent-%COMP%]{width:32px;height:32px}"]}),t}(),w=function(){function t(){}return t.\u0275mod=y.Hb({type:t}),t.\u0275inj=y.Gb({factory:function(o){return new(o||t)},imports:[[i.ib,r.c,c.e,a.a,u.b,n.j.forChild([{path:"",component:T}])]]}),t}()}}]);